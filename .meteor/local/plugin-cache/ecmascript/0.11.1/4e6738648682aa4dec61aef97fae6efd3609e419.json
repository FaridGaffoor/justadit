{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/farid/Documents/Projects/Meteor/justadit/client/templates/app-body.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"client/templates/app-body.js","filename":"/Users/farid/Documents/Projects/Meteor/justadit/client/templates/app-body.js","passPerPreset":false,"envName":"development","cwd":"/Users/farid/Documents/Projects/Meteor/justadit","root":"/Users/farid/Documents/Projects/Meteor/justadit","generatorOpts":{"filename":"/Users/farid/Documents/Projects/Meteor/justadit/client/templates/app-body.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/templates/app-body.js"}},"code":"var ANIMATION_DURATION = 300;\nvar NOTIFICATION_TIMEOUT = 3000;\nvar MENU_KEY = 'menuOpen';\nvar IGNORE_CONNECTION_ISSUE_KEY = 'ignoreConnectionIssue';\nvar CONNECTION_ISSUE_TIMEOUT = 5000;\nSession.setDefault(IGNORE_CONNECTION_ISSUE_KEY, true);\nSession.setDefault(MENU_KEY, false); // XXX: this work around until IR properly supports this\n//   IR refactor will include Location.back, which will ensure that initator is\n//   set \n\nvar nextInitiator = null,\n    initiator = null;\nDeps.autorun(function () {\n  // add a dep\n  Router.current();\n  initiator = nextInitiator;\n  nextInitiator = null;\n});\nvar notifications = new Mongo.Collection(null);\n\nTemplate.appBody.addNotification = function (notification) {\n  var id = notifications.insert(notification);\n  Meteor.setTimeout(function () {\n    notifications.remove(id);\n  }, NOTIFICATION_TIMEOUT);\n};\n\nMeteor.startup(function () {\n  // set up a s  left / right handler\n  $(document.body).touchwipe({\n    wipeLeft: function () {\n      Session.set(MENU_KEY, false);\n    },\n    wipeRight: function () {\n      Session.set(MENU_KEY, true);\n    },\n    preventDefaultEvents: false\n  }); // Only show the connection error box if it has been 5 seconds since\n  // the app started\n\n  setTimeout(function () {\n    // Launch screen handle created in lib/router.js\n    dataReadyHold.release(); // Allow the connection error box to be shown if there is an issue\n\n    Session.set(IGNORE_CONNECTION_ISSUE_KEY, false);\n  }, CONNECTION_ISSUE_TIMEOUT);\n});\nTemplate.appBody.onRendered(function () {\n  this.find(\"#content-container\")._uihooks = {\n    insertElement: function (node, next) {\n      // short-circuit and just do it right away\n      if (initiator === 'menu') return $(node).insertBefore(next);\n      var start = initiator === 'back' ? '-100%' : '100%';\n      $.Velocity.hook(node, 'translateX', start);\n      $(node).insertBefore(next).velocity({\n        translateX: [0, start]\n      }, {\n        duration: ANIMATION_DURATION,\n        easing: 'ease-in-out',\n        queue: false\n      });\n    },\n    removeElement: function (node) {\n      if (initiator === 'menu') return $(node).remove();\n      var end = initiator === 'back' ? '100%' : '-100%';\n      $(node).velocity({\n        translateX: end\n      }, {\n        duration: ANIMATION_DURATION,\n        easing: 'ease-in-out',\n        queue: false,\n        complete: function () {\n          $(node).remove();\n        }\n      });\n    }\n  };\n  this.find(\".notifications\")._uihooks = {\n    insertElement: function (node, next) {\n      $(node).insertBefore(next).velocity(\"slideDown\", {\n        duration: ANIMATION_DURATION,\n        easing: [0.175, 0.885, 0.335, 1.05]\n      });\n    },\n    removeElement: function (node) {\n      $(node).velocity(\"fadeOut\", {\n        duration: ANIMATION_DURATION,\n        complete: function () {\n          $(node).remove();\n        }\n      });\n    }\n  };\n});\nTemplate.appBody.helpers({\n  menuOpen: function () {\n    return Session.get(MENU_KEY) && 'menu-open';\n  },\n  overlayOpen: function () {\n    return Overlay.isOpen() ? 'overlay-open' : '';\n  },\n  connected: function () {\n    return Session.get(IGNORE_CONNECTION_ISSUE_KEY) || Meteor.status().connected;\n  },\n  notifications: function () {\n    return notifications.find();\n  }\n});\nTemplate.appBody.events({\n  'click .js-menu': function (event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    Session.set(MENU_KEY, !Session.get(MENU_KEY));\n  },\n  'click .js-back': function (event) {\n    nextInitiator = 'back'; // XXX: set the back transition via Location.back() when IR 1.0 hits\n\n    history.back();\n    event.stopImmediatePropagation();\n    event.preventDefault();\n  },\n  'click a.js-open': function (event) {\n    // On Cordova, open links in the system browser rather than In-App\n    if (Meteor.isCordova) {\n      event.preventDefault();\n      window.open(event.target.href, '_system');\n    }\n  },\n  'click .content-overlay': function (event) {\n    Session.set(MENU_KEY, false);\n    event.preventDefault();\n  },\n  'click #menu a': function (event) {\n    nextInitiator = 'menu';\n    Session.set(MENU_KEY, false);\n  },\n  'click .js-notification-action': function () {\n    if (_.isFunction(this.callback)) {\n      this.callback();\n      notifications.remove(this._id);\n    }\n  }\n});","map":{"version":3,"sources":["client/templates/app-body.js"],"names":["ANIMATION_DURATION","NOTIFICATION_TIMEOUT","MENU_KEY","IGNORE_CONNECTION_ISSUE_KEY","CONNECTION_ISSUE_TIMEOUT","Session","setDefault","nextInitiator","initiator","Deps","autorun","Router","current","notifications","Mongo","Collection","Template","appBody","addNotification","notification","id","insert","Meteor","setTimeout","remove","startup","$","document","body","touchwipe","wipeLeft","set","wipeRight","preventDefaultEvents","dataReadyHold","release","onRendered","find","_uihooks","insertElement","node","next","insertBefore","start","Velocity","hook","velocity","translateX","duration","easing","queue","removeElement","end","complete","helpers","menuOpen","get","overlayOpen","Overlay","isOpen","connected","status","events","event","stopImmediatePropagation","preventDefault","history","back","isCordova","window","open","target","href","_","isFunction","callback","_id"],"mappings":"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","sourcesContent":["var ANIMATION_DURATION = 300;\nvar NOTIFICATION_TIMEOUT = 3000;\nvar MENU_KEY = 'menuOpen';\nvar IGNORE_CONNECTION_ISSUE_KEY = 'ignoreConnectionIssue';\nvar CONNECTION_ISSUE_TIMEOUT = 5000;\n\nSession.setDefault(IGNORE_CONNECTION_ISSUE_KEY, true);\nSession.setDefault(MENU_KEY, false);\n\n// XXX: this work around until IR properly supports this\n//   IR refactor will include Location.back, which will ensure that initator is\n//   set \nvar nextInitiator = null, initiator = null;\nDeps.autorun(function() {\n  // add a dep\n  Router.current();\n  \n  initiator = nextInitiator;\n  nextInitiator = null;\n});\n\nvar notifications = new Mongo.Collection(null);\n\nTemplate.appBody.addNotification = function(notification) {\n  var id = notifications.insert(notification);\n\n  Meteor.setTimeout(function() {\n    notifications.remove(id);\n  }, NOTIFICATION_TIMEOUT);\n} \n\nMeteor.startup(function () {\n  // set up a s  left / right handler\n  $(document.body).touchwipe({ \n    wipeLeft: function () {\n      Session.set(MENU_KEY, false);\n    },\n    wipeRight: function () {\n      Session.set(MENU_KEY, true);\n    },\n    preventDefaultEvents: false\n  });\n\n  // Only show the connection error box if it has been 5 seconds since\n  // the app started\n  setTimeout(function () {\n    // Launch screen handle created in lib/router.js\n    dataReadyHold.release();\n\n    // Allow the connection error box to be shown if there is an issue\n    Session.set(IGNORE_CONNECTION_ISSUE_KEY, false);\n  }, CONNECTION_ISSUE_TIMEOUT);\n});\n\nTemplate.appBody.onRendered(function() {\n  this.find(\"#content-container\")._uihooks = {\n    insertElement: function(node, next) {\n      // short-circuit and just do it right away\n      if (initiator === 'menu')\n        return $(node).insertBefore(next);\n\n      var start = (initiator === 'back') ? '-100%' : '100%';\n\n      $.Velocity.hook(node, 'translateX', start);\n      $(node)\n      .insertBefore(next)\n      .velocity({translateX: [0, start]}, {\n        duration: ANIMATION_DURATION,\n        easing: 'ease-in-out',\n        queue: false\n      });\n    },\n    removeElement: function(node) {\n      if (initiator === 'menu')\n        return $(node).remove();\n\n      var end = (initiator === 'back') ? '100%' : '-100%';\n\n      $(node)\n      .velocity({translateX: end}, {\n        duration: ANIMATION_DURATION,\n        easing: 'ease-in-out',\n        queue: false,\n        complete: function() {\n          $(node).remove();\n        }\n      });\n    }\n  };\n\n  this.find(\".notifications\")._uihooks = {\n    insertElement: function(node, next) {\n      $(node)\n      .insertBefore(next)\n      .velocity(\"slideDown\", { \n        duration: ANIMATION_DURATION, \n        easing: [0.175, 0.885, 0.335, 1.05]\n      });\n    },\n    removeElement: function(node) {\n      $(node)\n      .velocity(\"fadeOut\", {\n        duration: ANIMATION_DURATION,\n        complete: function() {\n          $(node).remove();\n        }\n      });\n    }\n  };\n});\n\n\nTemplate.appBody.helpers({\n  menuOpen: function() {\n    return Session.get(MENU_KEY) && 'menu-open';\n  },\n  \n  overlayOpen: function() {\n    return Overlay.isOpen() ? 'overlay-open' : '';\n  },\n  \n  connected: function() {\n    return Session.get(IGNORE_CONNECTION_ISSUE_KEY) ||\n      Meteor.status().connected;\n  },\n  \n  notifications: function() {\n    return notifications.find();\n  }\n});\n\nTemplate.appBody.events({\n  'click .js-menu': function(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    Session.set(MENU_KEY, ! Session.get(MENU_KEY));\n  },\n\n  'click .js-back': function(event) {\n    nextInitiator = 'back';\n    \n    // XXX: set the back transition via Location.back() when IR 1.0 hits\n    history.back();\n    event.stopImmediatePropagation();\n    event.preventDefault();\n  },\n  \n  'click a.js-open': function(event) {\n    // On Cordova, open links in the system browser rather than In-App\n    if (Meteor.isCordova) {\n      event.preventDefault();\n      window.open(event.target.href, '_system');\n    }\n  },\n\n  'click .content-overlay': function(event) {\n    Session.set(MENU_KEY, false);\n    event.preventDefault();\n  },\n\n  'click #menu a': function(event) {\n    nextInitiator = 'menu'\n    Session.set(MENU_KEY, false);\n  },\n  \n  'click .js-notification-action': function() {\n    if (_.isFunction(this.callback)) {\n      this.callback();\n      notifications.remove(this._id);\n    }\n  }\n});\n"]},"sourceType":"script","hash":"4e6738648682aa4dec61aef97fae6efd3609e419"}
