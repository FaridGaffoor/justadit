{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":true}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$4","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$5","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$6","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$7","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$9","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/farid/Documents/Projects/Meteor/justadit/client/templates/product.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"client/templates/product.js","filename":"/Users/farid/Documents/Projects/Meteor/justadit/client/templates/product.js","passPerPreset":false,"envName":"development","cwd":"/Users/farid/Documents/Projects/Meteor/justadit","root":"/Users/farid/Documents/Projects/Meteor/justadit","generatorOpts":{"filename":"/Users/farid/Documents/Projects/Meteor/justadit/client/templates/product.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/templates/product.js"}},"code":"var TAB_KEY = 'productShowTab';\nTemplate.product.helpers({\n  getProduct: function (id) {\n    loading.start();\n    var result = Template.instance.data.Products; //var result = Meteor.apply('getProduct',[id],{wait:true});\n\n    loading.stop();\n    return result;\n  }\n}); // Template.product.helpers({\n//   thisSelectedProduct : function(){\n//     var self = this;\n//     try {\n//         var result;\n//         result = Session.get(\"currentProduct\");//Products.find({_id:Router.current().params._id});\n//         return result;\n//     } catch (error) {\n//     }\n//   }\n// });\n\nTemplate.product.onCreated(function () {\n  // console.log(\"Create Product template\");\n  // console.log(\"parameter Id \" + Router.current().params._id);\n  var self = this;\n  Loading.start();\n  if (Router.current().params._id) Template.product.setTab('feed');else Template.product.setTab('product');\n});\nTemplate.product.onRendered(function () {\n  Loading.stop();\n  this.$('.product').touchwipe({\n    wipeDown: function () {\n      if (Session.equals(TAB_KEY, 'product')) Template.productItem.setTab('show');\n    },\n    preventDefaultEvents: false\n  });\n  this.$('.attribution-product').touchwipe({\n    wipeUp: function () {\n      if (!Session.equals(TAB_KEY, 'product')) Template.productItem.setTab('product');\n    },\n    preventDefaultEvents: false\n  });\n}); // CSS transitions can't tell the difference between e.g. reaching\n//   the \"make\" tab from the expanded state or the \"feed\" tab\n//   so we need to help the transition out by attaching another\n//   class that indicates if the feed tab should slide out of the\n//   way smoothly, right away, or after the transition is over\n\nTemplate.product.setTab = function (tab) {\n  var lastTab = Session.get(TAB_KEY);\n  Session.set(TAB_KEY, tab);\n  var fromProduct = lastTab === 'product' && tab !== 'product';\n  $('.feed-scrollable').toggleClass('instant', fromProduct);\n  var toProduct = lastTab !== 'product' && tab === 'product';\n  $('.feed-scrollable').toggleClass('delayed', toProduct);\n};\n\nTemplate.product.helpers({\n  isActiveTab: function (name) {\n    return Session.equals(TAB_KEY, name);\n  },\n  thisProductImages: function (imageId) {\n    console.log(\"Searching for imageid : \" + imageId + \" -  Image Count : \" + Images.count);\n    Meteor.subscribe('ProductImages', imageId); //Loading.start();\n\n    var ProductImgs = Images.find({}); //Loading.stop();\n\n    return ProductImgs;\n  },\n  activeTabClass: function () {\n    return Session.get(TAB_KEY);\n  },\n  bookmarked: function () {\n    return Meteor.user(); //&& _.include(Meteor.user().bookmarkedRecipeNames, this.name);\n  },\n  activities: function () {\n    return Activities.find({\n      recipeName: this.name\n    }, {\n      sort: {\n        date: -1\n      }\n    });\n  },\n  productData: function () {\n    //console.log(\"Router data \" + Template.instance().data[0]);\n    return Template.instance().data[0];\n  }\n});\nTemplate.product.events({\n  'click .js-add-bookmark': function (event) {\n    event.preventDefault();\n    if (!Meteor.userId()) return Overlay.open('authOverlay');\n    Meteor.call('bookmarkRecipe', this.name);\n  },\n  'click .js-remove-bookmark': function (event) {\n    event.preventDefault();\n    Meteor.call('unbookmarkRecipe', this.name);\n  },\n  'click .js-show-recipe': function (event) {\n    event.stopPropagation();\n    Template.product.setTab('make');\n  },\n  'click .js-show-feed': function (event) {\n    event.stopPropagation();\n    Template.product.setTab('feed');\n  },\n  'click .js-uncollapse': function () {\n    Template.product.setTab('recipe');\n  },\n  'click .js-share': function () {\n    Overlay.open('shareOverlay', this);\n  }\n});","map":{"version":3,"sources":["client/templates/product.js"],"names":["TAB_KEY","Template","product","helpers","getProduct","id","loading","start","result","instance","data","Products","stop","onCreated","self","Loading","Router","current","params","_id","setTab","onRendered","$","touchwipe","wipeDown","Session","equals","productItem","preventDefaultEvents","wipeUp","tab","lastTab","get","set","fromProduct","toggleClass","toProduct","isActiveTab","name","thisProductImages","imageId","console","log","Images","count","Meteor","subscribe","ProductImgs","find","activeTabClass","bookmarked","user","activities","Activities","recipeName","sort","date","productData","events","event","preventDefault","userId","Overlay","open","call","stopPropagation"],"mappings":"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","sourcesContent":["var TAB_KEY = 'productShowTab';\n\nTemplate.product.helpers({ \n  getProduct: function(id) { \n    loading.start();\n    \n    var result = Template.instance.data.Products;\n    //var result = Meteor.apply('getProduct',[id],{wait:true});\n    loading.stop();\n     return result;\n  } \n});\n// Template.product.helpers({\n//   thisSelectedProduct : function(){\n//     var self = this;\n//     try {\n//         var result;\n//         result = Session.get(\"currentProduct\");//Products.find({_id:Router.current().params._id});\n//         return result;\n//     } catch (error) {\n      \n//     }\n    \n    \n//   }\n\n// });\n\nTemplate.product.onCreated(function() {\n    // console.log(\"Create Product template\");\n    // console.log(\"parameter Id \" + Router.current().params._id);\n    var self = this;\n \n    Loading.start();\n    \n  if (Router.current().params._id)\n    Template.product.setTab('feed');\n  else\n    Template.product.setTab('product');\n});\n\nTemplate.product.onRendered(function () {\n   \n  Loading.stop();\n  this.$('.product').touchwipe({\n    wipeDown: function () {\n      if (Session.equals(TAB_KEY, 'product'))\n        Template.productItem.setTab('show')\n    },\n    preventDefaultEvents: false\n  });\n  this.$('.attribution-product').touchwipe({\n    wipeUp: function () {\n      if (! Session.equals(TAB_KEY, 'product'))\n        Template.productItem.setTab('product')\n    },\n    preventDefaultEvents: false\n  });\n});\n\n\n\n// CSS transitions can't tell the difference between e.g. reaching\n//   the \"make\" tab from the expanded state or the \"feed\" tab\n//   so we need to help the transition out by attaching another\n//   class that indicates if the feed tab should slide out of the\n//   way smoothly, right away, or after the transition is over\nTemplate.product.setTab = function(tab) {\n    var lastTab = Session.get(TAB_KEY);\n    Session.set(TAB_KEY, tab);\n    \n    var fromProduct = (lastTab === 'product') && (tab !== 'product');\n    $('.feed-scrollable').toggleClass('instant', fromProduct);\n  \n    var toProduct = (lastTab !== 'product') && (tab === 'product');\n    $('.feed-scrollable').toggleClass('delayed', toProduct);\n  }\n  \n  Template.product.helpers({\n    isActiveTab: function(name) {\n      return Session.equals(TAB_KEY, name);\n    },\n    thisProductImages:function(imageId){\n      console.log(\"Searching for imageid : \" + imageId + \" -  Image Count : \" + Images.count);\n      Meteor.subscribe('ProductImages', imageId)\n      //Loading.start();\n      var ProductImgs = Images.find({});\n      //Loading.stop();\n \n      return ProductImgs;\n    },\n    activeTabClass: function() {\n      return Session.get(TAB_KEY);\n    },\n    bookmarked: function() {\n      return Meteor.user() ;//&& _.include(Meteor.user().bookmarkedRecipeNames, this.name);\n    },\n    activities: function() {\n      return Activities.find({recipeName: this.name}, {sort: {date: -1}});\n    },\n    productData: function() {\n        //console.log(\"Router data \" + Template.instance().data[0]);\n        return Template.instance().data[0];\n    }\n  });\n  \n  Template.product.events({\n    'click .js-add-bookmark': function(event) {\n      event.preventDefault();\n  \n      if (! Meteor.userId())\n        return Overlay.open('authOverlay');\n      \n      Meteor.call('bookmarkRecipe', this.name);\n    },\n  \n    'click .js-remove-bookmark': function(event) {\n      event.preventDefault();\n  \n      Meteor.call('unbookmarkRecipe', this.name);\n    },\n    \n    'click .js-show-recipe': function(event) {\n      event.stopPropagation();\n      Template.product.setTab('make')\n    },\n    \n    'click .js-show-feed': function(event) {\n      event.stopPropagation();\n      Template.product.setTab('feed')\n    },\n    \n    'click .js-uncollapse': function() {\n      Template.product.setTab('recipe')\n    },\n  \n    'click .js-share': function() {\n      Overlay.open('shareOverlay', this);\n    }\n  });\n  "]},"sourceType":"script","hash":"2ac6ac2315c2805ca7de9ae962c8ad75d6992453"}
