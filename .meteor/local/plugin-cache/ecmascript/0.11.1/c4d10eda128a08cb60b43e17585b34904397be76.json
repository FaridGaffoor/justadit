{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"polyfill":false,"useBuiltIns":false}},{"key":"base$0$3","visitor":{"_exploded":{},"_verified":{},"PrivateName":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$4","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$5","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$6","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$1$0","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","throwIfNamespace":true,"useBuiltIns":false}},{"key":"base$0$1$1","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/farid/Documents/Projects/Meteor/justadit/lib/router.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining","pipelineOperator","throwExpressions","dynamicImport","classProperties","classPrivateProperties","jsx",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"lib/router.js","filename":"/Users/farid/Documents/Projects/Meteor/justadit/lib/router.js","passPerPreset":false,"envName":"development","cwd":"/Users/farid/Documents/Projects/Meteor/justadit","root":"/Users/farid/Documents/Projects/Meteor/justadit","generatorOpts":{"filename":"/Users/farid/Documents/Projects/Meteor/justadit/lib/router.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"lib/router.js"}},"code":"var feedSubscription;\nvar thisCurrentProduct; // Handle for launch screen possibly dismissed from app-body.js\n\ndataReadyHold = null; // Global subscriptions\n\nif (Meteor.isClient) {\n  Meteor.subscribe('news');\n  Meteor.subscribe('bookmarkCounts');\n  Meteor.subscribe('images');\n  Meteor.subscribe('getSellers'); // var resultsq = Meteor.subscribe('featuredProducts');\n  // Session.set('featuredProducts',resultsq);\n\n  feedSubscription = Meteor.subscribe('feed');\n}\n\nRouter.configure({\n  layoutTemplate: 'appBody',\n  notFoundTemplate: 'notFound'\n});\n\nif (Meteor.isClient) {\n  // Keep showing the launch screen on mobile devices until we have loaded\n  // the app's data\n  dataReadyHold = LaunchScreen.hold();\n}\n\nProductsController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('latestProducts', function () {\n      dataReadyHold.release();\n    });\n    Meteor.subscribe('getSellerProducts', function () {\n      dataReadyHold.release();\n    });\n  }\n});\nFeedController = RouteController.extend({\n  onBeforeAction: function () {\n    this.feedSubscription = feedSubscription;\n  }\n});\nRecipesController = RouteController.extend({\n  data: function () {\n    return _.values(RecipesData);\n  }\n});\nBookmarksController = RouteController.extend({\n  onBeforeAction: function () {\n    if (Meteor.user()) Meteor.subscribe('bookmarks');else Overlay.open('authOverlay');\n  },\n  data: function () {\n    if (Meteor.user()) return _.values(_.pick(RecipesData, Meteor.user().bookmarkedRecipeNames));\n  }\n});\nRecipeController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('recipe', this.params.name);\n  },\n  data: function () {\n    return RecipesData[this.params.name];\n  }\n}); // addSellerController = RouteController.extend({\n//   onBeforeAction:function()\n//   {\n//     console.log('Seller Controller loaded');\n//     if (Meteor.userId())\n//     {\n//       var currentSeller = Meteor.wrapAsync(getThisSeller(Meteor.userId()));     \n//     }\n//   }\n// });\n// function getThisSeller(id)\n// {\n//   console.log(\"Get Seller  : \" + id);\n//   var retProd = {};\n//   var returnProd=[];\n//   var repro =   Meteor.apply('getProductSeller', [id],{wait: true}, function(err,data){\n//     if (!err)\n//     {\n//       Session.set(\"currentSeller\",data);\n//       console.log(data);\n//     }\n//     else\n//     {\n//       console.log(err);\n//     }\n//   });\n// }\n\nProductController = RouteController.extend({\n  onBeforeAction: function () {\n    if (this.params._id) {\n      console.log(\"Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product', Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id)); //var productImages = Meteor.wrapAsync(getProductImages(currentProduct.prodImg));\n      //currentProduct.prodImg = productImages;\n\n      dataReadyHold.release();\n    }\n  } // ,\n  // data : function()\n  // {\n  //   currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n  // }\n\n});\n\nfunction getThisProdData(id) {\n  console.log(\"Get Single product publish Router Method : \" + id);\n  var retProd = {};\n  var returnProd = [];\n  var repro = Meteor.apply('getProduct', [id], {\n    wait: false\n  }, function (err, data) {\n    if (!err) {\n      sessionStorage.removeItem(\"currentProduct\");\n      Session.set(\"currentProduct\", data);\n    } else {\n      console.log(err);\n      sessionStorage.removeItem(\"currentProduct\");\n    }\n  });\n}\n\nSellerController = RouteController.extend({\n  onBeforeAction: function () {\n    console.log('Seller Controller loaded');\n\n    if (Meteor.userId()) {\n      //loading.start();\n      //Meteor.subscribe('SellerDetailsImages',Meteor.userId());\n      Meteor.subscribe('getSeller', Meteor.userId());\n      Sellers.findOne({\n        userId: Meteor.userId()\n      }); // Meteor.call('getSeller', [Meteor.userId()], function(error, success) { \n      //   if (error) { \n      //     console.log('error getting seller', error); \n      //     sessionStorage.removeItem(\"currentSeller\");\n      //   } \n      //   if (success) { \n      //     console.log(\"Client Router Seller : \" + success);\n      //     sessionStorage.removeItem(\"currentSeller\");\n      //     Session.set(\"currentSeller\",success);\n      //   } \n      // });\n\n      console.log('Seller Controller reference data');\n      Meteor.subscribe('referenceData', function () {\n        console.log(ReferenceData.find({}).count()); //loading.stop();\n\n        dataReadyHold.release();\n      });\n    }\n  }\n});\nEditProductController = RouteController.extend({\n  onBeforeAction: function () {\n    console.log(\"Edit Product\");\n\n    if (this.params._id) {\n      console.log(\"Edit Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product', Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n      dataReadyHold.release();\n    }\n  }\n});\nAdminController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('news');\n  }\n});\nHomeController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('featuredProducts');\n    console.log(\"Home from router products \");\n    dataReadyHold.release();\n  }\n});\nRouter.route('home', {\n  path: '/'\n}); // Router.route('products', {\n//   path : '/products/:_searchTerm',\n//   // name: 'products',\n//   // template: 'products',\n//   });\n\nRouter.route('products');\nRouter.route('seller');\nRouter.route('feed');\nRouter.route('recipes');\nRouter.route('bookmarks');\nRouter.route('about');\nRouter.route('recipe', {\n  path: '/recipes/:name'\n});\nRouter.route('product', {\n  path: '/product/:_id',\n  name: 'productPage',\n  template: 'product'\n});\nRouter.route('editproduct', {\n  path: '/editproduct/:_id',\n  name: 'productEditPage',\n  template: 'tmp_product_maintain',\n  layoutTemplate: null,\n  controller: EditProductController\n});\nRouter.route('login', {\n  path: '/login',\n  template: 'authOverlay',\n  layoutTemplate: 'appBody'\n});\nRouter.route('signup', {\n  path: '/signup',\n  template: 'authOverlaySignup',\n  layoutTemplate: 'appBody'\n});\nRouter.route('admin', {\n  layoutTemplate: null\n});\nRouter.onBeforeAction('dataNotFound', {\n  only: 'recipe'\n});","map":{"version":3,"sources":["lib/router.js"],"names":["feedSubscription","thisCurrentProduct","dataReadyHold","Meteor","isClient","subscribe","Router","configure","layoutTemplate","notFoundTemplate","LaunchScreen","hold","ProductsController","RouteController","extend","onBeforeAction","release","FeedController","RecipesController","data","_","values","RecipesData","BookmarksController","user","Overlay","open","pick","bookmarkedRecipeNames","RecipeController","params","name","ProductController","_id","console","log","sessionStorage","removeItem","current","currentProduct","wrapAsync","getThisProdData","id","retProd","returnProd","repro","apply","wait","err","Session","set","SellerController","userId","Sellers","findOne","ReferenceData","find","count","EditProductController","AdminController","HomeController","route","path","template","controller","only"],"mappings":"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","sourcesContent":["var feedSubscription;\nvar thisCurrentProduct ;\n// Handle for launch screen possibly dismissed from app-body.js\ndataReadyHold = null;\n\n// Global subscriptions\nif (Meteor.isClient) {\n  Meteor.subscribe('news');\n  Meteor.subscribe('bookmarkCounts');\n  Meteor.subscribe('images');\n  Meteor.subscribe('getSellers');\n  \n  // var resultsq = Meteor.subscribe('featuredProducts');\n \n  // Session.set('featuredProducts',resultsq);\n  feedSubscription = Meteor.subscribe('feed');\n}\n\nRouter.configure({\n  layoutTemplate: 'appBody',\n  notFoundTemplate: 'notFound'\n});\n\nif (Meteor.isClient) {\n  // Keep showing the launch screen on mobile devices until we have loaded\n  // the app's data\n  dataReadyHold = LaunchScreen.hold();\n}\n\n\n\nProductsController = RouteController.extend({\n  onBeforeAction: function () {\n \n    Meteor.subscribe('latestProducts', function () {\n      dataReadyHold.release();\n    });\n\n    Meteor.subscribe('getSellerProducts', function () {\n      dataReadyHold.release();\n    });\n  }\n});\n\nFeedController = RouteController.extend({\n  onBeforeAction: function () {\n    this.feedSubscription = feedSubscription;\n  }\n});\n\nRecipesController = RouteController.extend({\n  data: function () {\n    return _.values(RecipesData);\n  }\n});\n\nBookmarksController = RouteController.extend({\n  onBeforeAction: function () {\n    if (Meteor.user())\n      Meteor.subscribe('bookmarks');\n    else\n      Overlay.open('authOverlay');\n  },\n  data: function () {\n    if (Meteor.user())\n      return _.values(_.pick(RecipesData, Meteor.user().bookmarkedRecipeNames));\n  }\n});\n\nRecipeController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('recipe', this.params.name);\n  },\n  data: function () {\n    return RecipesData[this.params.name];\n  }\n});\n\n// addSellerController = RouteController.extend({\n//   onBeforeAction:function()\n//   {\n//     console.log('Seller Controller loaded');\n\n    \n//     if (Meteor.userId())\n//     {\n//       var currentSeller = Meteor.wrapAsync(getThisSeller(Meteor.userId()));     \n//     }\n//   }\n// });\n\n\n\n// function getThisSeller(id)\n// {\n//   console.log(\"Get Seller  : \" + id);\n//   var retProd = {};\n//   var returnProd=[];\n   \n//   var repro =   Meteor.apply('getProductSeller', [id],{wait: true}, function(err,data){\n//     if (!err)\n//     {\n      \n//       Session.set(\"currentSeller\",data);\n//       console.log(data);\n     \n \n//     }\n//     else\n//     {\n//       console.log(err);\n//     }\n    \n//   });\n// }\n \n \nProductController = RouteController.extend({\n  onBeforeAction : function()\n  {\n    if (this.params._id)\n    {\n      console.log(\"Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product',Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n      //var productImages = Meteor.wrapAsync(getProductImages(currentProduct.prodImg));\n      //currentProduct.prodImg = productImages;\n      dataReadyHold.release();\n\n    }\n    \n  }\n  \n  // ,\n  // data : function()\n  // {\n  //   currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n  // }\n  \n   \n});\n\nfunction getThisProdData(id)\n{\n  console.log(\"Get Single product publish Router Method : \" + id);\n  var retProd = {};\n  var returnProd=[];\n  var repro =   Meteor.apply('getProduct', [id],{wait: false}, function(err,data){\n    if (!err)\n    {\n      sessionStorage.removeItem(\"currentProduct\");\n      Session.set(\"currentProduct\",data);  \n    }\n    else\n    {\n      console.log(err);\n      sessionStorage.removeItem(\"currentProduct\");\n    }    \n  });  \n}\n\n\nSellerController = RouteController.extend({\n  onBeforeAction: function()\n  {\n    console.log('Seller Controller loaded');\n    if (Meteor.userId())\n    {\n      //loading.start();\n      //Meteor.subscribe('SellerDetailsImages',Meteor.userId());\n      Meteor.subscribe('getSeller',Meteor.userId());\n      Sellers.findOne({userId:Meteor.userId()});\n     \n      // Meteor.call('getSeller', [Meteor.userId()], function(error, success) { \n      //   if (error) { \n      //     console.log('error getting seller', error); \n      //     sessionStorage.removeItem(\"currentSeller\");\n      //   } \n      //   if (success) { \n      //     console.log(\"Client Router Seller : \" + success);\n      //     sessionStorage.removeItem(\"currentSeller\");\n      //     Session.set(\"currentSeller\",success);\n      //   } \n      // });\n      console.log('Seller Controller reference data');\n      Meteor.subscribe('referenceData', function () {\n        console.log(ReferenceData.find({}).count());\n        //loading.stop();\n        dataReadyHold.release();\n      });\n      \n       \n    }\n  }\n})\n\nEditProductController = RouteController.extend({\n  onBeforeAction:function(){\n    console.log(\"Edit Product\");\n    if (this.params._id)\n    {\n      console.log(\"Edit Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product',Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n      dataReadyHold.release();\n    }\n  }\n});\n\nAdminController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('news');\n  }\n});\n\nHomeController = RouteController.extend({\n  onBeforeAction:function(){\n      Meteor.subscribe('featuredProducts');\n    console.log(\"Home from router products \" );\n    dataReadyHold.release();\n  }\n});\n\nRouter.route('home', {\n  path: '/'\n});\n\n// Router.route('products', {\n//   path : '/products/:_searchTerm',\n//   // name: 'products',\n//   // template: 'products',\n//   });\n \nRouter.route('products');\n\nRouter.route('seller');\n\nRouter.route('feed');\n\n\n\nRouter.route('recipes');\n\nRouter.route('bookmarks');\n\nRouter.route('about');\n\nRouter.route('recipe', {\n  path: '/recipes/:name'\n});\n\nRouter.route('product', {\n  path : '/product/:_id',\n  name: 'productPage',\n  template: 'product',\n  });\n\n  Router.route('editproduct', {\n    path : '/editproduct/:_id',\n    name: 'productEditPage',\n    template: 'tmp_product_maintain',\n    layoutTemplate: null,\n    controller: EditProductController\n    });\n  \n\n  Router.route('login',{\n    path :'/login',\n    template :'authOverlay',\n    layoutTemplate: 'appBody'\n  });\n\n  Router.route('signup',{\n    path :'/signup',\n    template :'authOverlaySignup',\n    layoutTemplate: 'appBody'\n  })\n\n\nRouter.route('admin', {\n  layoutTemplate: null\n});\n\nRouter.onBeforeAction('dataNotFound', {\n  only: 'recipe'\n});\n\n"]},"sourceType":"script","hash":"c4d10eda128a08cb60b43e17585b34904397be76"}
