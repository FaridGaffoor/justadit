{"version":3,"sources":["meteor://ðŸ’»app/lib/startup/apiSetup.js","meteor://ðŸ’»app/lib/startup/fixtures.js","meteor://ðŸ’»app/lib/activities.js","meteor://ðŸ’»app/lib/bookmarks.js","meteor://ðŸ’»app/lib/common.js","meteor://ðŸ’»app/lib/media.js","meteor://ðŸ’»app/lib/news.js","meteor://ðŸ’»app/lib/product.js","meteor://ðŸ’»app/lib/products.js","meteor://ðŸ’»app/lib/recipes-data.js","meteor://ðŸ’»app/lib/router.js","meteor://ðŸ’»app/lib/seller.js","meteor://ðŸ’»app/server/_settings.js","meteor://ðŸ’»app/server/publications.js","meteor://ðŸ’»app/server/users.js"],"names":["console","log","ReferenceData","Mongo","Collection","Sellers","Meteor","startup","isServer","find","count","refDatas","name","id","value","timetoadd","forEach","refData","insert","Products","prodData","sellerId","producttitle","productDescription","price","prdCat","prodImg","createdAt","Date","expireAt","now","prod","_id","busCat","businessname","businessag","add1","add2","add3","add4","office","cell","email","contact1","contact2","url","logoImg","Images","ISODate","Activities","allow","userId","doc","latest","sort","date","limit","methods","createActivity","activity","tweet","loc","check","String","recipeName","text","image","Boolean","Match","OneOf","Object","userAvatar","user","services","twitter","profile_image_url_https","userName","profile","isSimulation","place","getLocationPlace","tweetActivity","twitterOauth","options","config","settings","userConfig","consumer_key","consumerKey","consumer_secret","secret","token","accessToken","token_secret","accessTokenSecret","appendTweet","append","MAX","length","substring","replace","response","HTTP","post","params","media","npmRequestOptions","oauth","statusCode","Error","data","attachment","status","media_ids","media_id_string","coords","accuracy","latitude","longitude","get","_","result","places","place_type","full_name","BookmarkCounts","affected","users","update","bookmarkedRecipeNames","$ne","$addToSet","$inc","$pull","each","RecipesData","recipe","Handlebars","registerHelper","source","obj","newRandomId","prefixStr","rnd","require","jsWriteFile","fbinaryData","filename","fs","Npm","base64Image","split","binaryData","Buffer","toString","pathtoFile","rootPath","strPath","substr","imagePath","products","fileSavePath","writeFileName","exists","writeFile","err","exp","error","saveImageFile","getReferenceData","refName","addTime","imageStore","FS","Store","FileSystem","path","chunkSize","maxTries","stores","remove","download","getProductImages","ImgId","prodImages","ImageId","returnImages","element","push","News","findOne","admin","Product","order","subscribe","results","productObj","newProd","ProdImgs","productResult","upsert","$set","MyProducts","SellerID","more","continuationValue","featuredProductsLimit","prodresult","Results","prodid","sell","apply","returnStubValue","seller","prodImgs","searchItem","searchTerms","prods","$or","$regex","allProducts","getProduct","prodId","bookedMarked","latestProducts","SellerId","skip","createProduct","product","Number","prodCat","createDate","expireDate","ProdInsert","feedSubscription","thisCurrentProduct","dataReadyHold","isClient","Router","configure","layoutTemplate","notFoundTemplate","LaunchScreen","hold","ProductsController","RouteController","extend","onBeforeAction","release","FeedController","RecipesController","values","BookmarksController","Overlay","open","pick","RecipeController","ProductController","sessionStorage","removeItem","current","currentProduct","wrapAsync","getThisProdData","retProd","returnProd","repro","wait","Session","set","SellerController","EditProductController","AdminController","HomeController","route","template","controller","only","SellerResult","busTagLine","busLogo","busAvatar","bustel","buscel","busemail","cont1","cont2","add5","website","sellerObj","sellerResult","allSellers","defaults","imgPath","maxfileUploadSize","maxfileUploadSource","ServiceConfiguration","configurations","service","publish","returnProds","ready","Prods","sellers","ImageCat","returnImage","img","SellerProds","fields","Accounts","onCreateUser","onLogin","onLogout","go"],"mappings":"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ACD,SAAOA,MAAP;AACD;;AAGDnH,OAAOmD,OAAP,CAAe;AACb+G,iBAAe,UAAStB,WAAT,EAAqBC,QAArB,EACf;AACE,QAAI;AACF,aAAOF,YAAYC,WAAZ,EAAwBC,QAAxB,CAAP;AACD,KAFD,CAEE,OAAOoB,KAAP,EAAc;AACd,YAAMA,KAAN;AACD,KALH,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC,GAlDY;AAmDbE,oBAAiB,UAASC,OAAT,EACjB;AAEE,YAAOA,OAAP;AAEI,WAAK,aAAL;AACI,eAAOxK,cAAcO,IAAd,CAAmB;AAACG,gBAAKqB;AAAN,SAAnB,CAAP;AACA;;AACJ,WAAK,YAAL;AACA,eAAO/B,cAAcO,IAAd,CAAmB;AAACG,gBAAKa;AAAN,SAAnB,CAAP;AACI;;AACJ,WAAK,SAAL;AACA,eAAOvB,cAAcO,IAAd,CAAmB;AAACG,gBAAK+J;AAAN,SAAnB,CAAP;AACA;;AACA;AACI,eAAO,EAAP;AAZR;AAgBD;AAtEY,CAAf,E,CAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,I;;;;;;;;;;;ACzNA3K,QAAQC,GAAR,CAAY,mCAAZ,E,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAI2K,aAAa,IAAIC,GAAGC,KAAH,CAASC,UAAb,CAAwB,QAAxB,EAAkC;AAC/CC,QAAM,0BADyC;AACb;AAClC;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACJ;AACAC,aAAW,IAAE,IAAF,GAAO,IAAP,GAAc,IAjBsB;AAiBf;AAChC;AACA;AACA;AACAC,YAAU,CArBqC,CAqBnC;;AArBmC,CAAlC,CAAjB,C,CAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAnI,SAAS,IAAI8H,GAAGzK,UAAP,CAAkB,QAAlB,EAA4B;AACjC+K,UAAQ,CAACP,UAAD;AADyB,CAA5B,CAAT,C,CAKA;AACA;AACA;;AAGA7H,OAAOG,KAAP,CAAa;AACThC,UAAQ,YAAY;AAChB,WAAO,IAAP;AACH,GAHQ;AAIT8G,UAAQ,YAAY;AAChB,WAAO,IAAP;AACH,GANQ;AAOToD,UAAQ,YAAY;AAChB,WAAO,IAAP;AACH,GATQ;AAUTC,YAAU,YAAY;AAClB,WAAO,IAAP;AACH;AAZQ,CAAb,E,CAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA/K,OAAOmD,OAAP,CAAe;AACX6H,oBAAkB,UAAUC,KAAV,EAAiB;AAE/B;AACA,QAAIC,aAAazI,OAAOtC,IAAP,CAAY;AAAEgL,eAASF;AAAX,KAAZ,CAAjB;AACA,QAAIG,eAAe,EAAnB;AACAF,eAAWxK,OAAX,CAAmB2K,WAAW;AAC1BD,mBAAaE,IAAb,CAAkBD,OAAlB;AAEH,KAHD,EAL+B,CAS/B;AACA;;AACA,WAAOD,YAAP,CAX+B,CAa/B;AACH;AAfU,CAAf,E;;;;;;;;;;;AClFAG,OAAO,IAAI1L,MAAMC,UAAV,CAAqB,MAArB,CAAP;AAEAyL,KAAK3I,KAAL,CAAW;AACThC,UAAQ,UAASiC,MAAT,EAAiB;AACvB,QAAIqB,OAAOlE,OAAOyH,KAAP,CAAa+D,OAAb,CAAqB3I,MAArB,CAAX;AACA,WAAOqB,QAAQA,KAAKuH,KAApB;AACD;AAJQ,CAAX;;AAOAF,KAAKxI,MAAL,GAAc,YAAW;AAEvB;AACA,SAAOwI,KAAKC,OAAL,CAAa,EAAb,EAAiB;AAACxI,UAAM;AAACC,YAAM,CAAC;AAAR,KAAP;AAAmBC,WAAO;AAA1B,GAAjB,CAAP;AACD,CAJD;;AAMA,IAAIlD,OAAOE,QAAP,IAAmBqL,KAAKpL,IAAL,GAAYC,KAAZ,OAAwB,CAA/C,EAAkD;AAChDJ,SAAOC,OAAP,CAAe,YAAW;AACxBsL,SAAK3K,MAAL,CAAY;AACV+C,YAAM,yGADI;AAEVV,YAAM,IAAI3B,IAAJ;AAFI,KAAZ;AAID,GALD;AAMD,C;;;;;;;;;;;ACtBDoK,UAAU,IAAI7L,MAAMC,UAAV,CAAqB,SAArB,CAAV;AAEA4L,QAAQ9I,KAAR,CAAc;AACVhC,UAAQ,UAASiC,MAAT,EAAiBC,GAAjB,EAAsB;AAC5B,WAAOA,IAAID,MAAJ,KAAeA,MAAtB;AACD;AAHS,CAAd;AAOE7C,OAAOmD,OAAP,CAAe;AACb,mBAAgB,UAAS5C,EAAT,EAAY;AAE1B,WAAOmL,QAAQvL,IAAR,CAAa,EAAb,EAAgB;AAACwL,aAAM;AAACtK,mBAAU,CAAC;AAAZ;AAAP,KAAhB,CAAP,CAF0B,CAG1B;AACD,GALY;AAMb,oBAAiB,UAASd,EAAT,EAAY;AAC3Bb,YAAQC,GAAR,CAAY,WAAZ;AACAK,WAAO4L,SAAP,CAAiB,SAAjB,EAA4BrL,EAA5B;AACA,QAAIsL,UAAWhL,SAASV,IAAT,CAAc,EAAd,CAAf;AACAT,YAAQC,GAAR,CAAYkM,OAAZ;AACA,WAAOA,OAAP;AAED,GAbY;AAcb,qBAAkB,UAAUC,UAAV,EAClB;AACI;AACA,QAAIC,UAAU,KAAd;;AACA,QAAID,WAAWpK,GAAX,IAAkB,EAAtB,EACA;AACIqK,gBAAU,IAAV;AACH;;AACD,QAAIC,WAAW,EAAf;;AACF,QACA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACE,UAAIC,gBACJpL,SAASqL,MAAT,CAAgB;AAChB;AACAxK,aAAKoK,WAAWpK;AAFA,OAAhB,EAGG;AACH;AACAyK,cAAM;AACJpL,oBAAW+K,WAAW/K,QADlB;AAEJC,wBAAe8K,WAAW9K,YAFtB;AAGJC,8BAAqB6K,WAAW7K,kBAH5B;AAIJC,iBAAQ4K,WAAW5K,KAJf;AAKJC,kBAAS2K,WAAW3K,MALhB;AAMJC,mBAAU0K,WAAW1K,OANjB;AAOJC,qBAAYyK,WAAWzK,SAPnB;AAQJE,oBAAWuK,WAAWvK;AARlB;AAFH,OAHH,CADA;AAqBH,KA9CD,CA+CA,OAAOyI,GAAP,EACA;AACE,YAAMA,GAAN;AACD;AACF;AA1EY,CAAf;AA6EF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DE0B,QAAQU,UAAR,GAAoB,UAASrL,QAAT,EAAkB;AAClC,SAAO2K,QAAQvL,IAAR,CAAa;AAACkM,cAAStL;AAAV,GAAb,CAAP;AACH,CAFD;;AAIA2K,QAAQY,IAAR,GAAe,UAASC,iBAAT,EAA2B;AACtC;AACA;AACA,SAAOb,QAAQvL,IAAR,CAAa,EAAb,EAAiB;AAACwL,WAAO;AAACtK,iBAAW,CAAC;AAAb;AAAR,GAAjB,CAAP;AAEH,CALD;AAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5JFR,WAAW,IAAIhB,MAAMC,UAAV,CAAqB,UAArB,CAAX;AAIAe,SAAS+B,KAAT,CAAe;AACbhC,UAAQ,UAAUiC,MAAV,EAAkBC,GAAlB,EAAuB;AAC7B,WAAOA,IAAID,MAAJ,KAAeA,MAAtB;AACD,GAHY;AAIb6E,UAAO,UAAS7E,MAAT,EAAgBC,GAAhB,EACP;AACE,WAAO,KAAP;AACD;AAPY,CAAf;AAWA9C,OAAOmD,OAAP,CAAe;AACb,sBAAoB,YAAY;AAE9BzD,YAAQC,GAAR,CAAY,2CAA2CK,OAAO+E,QAAP,CAAgByH,qBAAvE;AAGA,QAAIC,aAAa,EAAjB;;AACA,QACA;AAEA,UAAIhL,OAAOZ,SAASV,IAAT,CAAc,EAAd,EAAiB;AAACwL,eAAM;AAACtK,qBAAW,CAAC;AAAb;AAAP,OAAjB,EAAyC;AAAC6B,eAAOlD,OAAO+E,QAAP,CAAgByH;AAAxB,OAAzC,CAAX;AAEA/K,WAAKf,OAAL,CAAa2K,WAAW;AAEtBoB,mBAAWnB,IAAX,CAAgBD,OAAhB;AACD,OAHD;AAID,KATC,CAUF,OAAMrB,GAAN,EACA;AACEtK,cAAQC,GAAR,CAAY,uCAAuCqK,GAAnD;AACA,YAAMA,GAAN;AACD;;AAGC,WAAO;AAAC0C,eAAQD;AAAT,KAAP;AACD,GAzBY;AA0Bb,gBAAc,UAAUE,MAAV,EAAkB;AAC9B;AACA,QACA;AAEE;AACA;AAEF,UAAIlL,OAAOZ,SAAS2K,OAAT,CAAiB;AAAE9J,aAAKiL;AAAP,OAAjB,CAAX;;AACA,UAAIlL,IAAJ,EACA;AACE,YAAImL,OAAO7M,QAAQyL,OAAR,CAAgB;AAAC3I,kBAAOpB,KAAKV;AAAb,SAAhB,CAAX;AACA,YAAImK,aAAalL,OAAO6M,KAAP,CAAa,kBAAb,EAAiC,CAACpL,KAAKL,OAAN,CAAjC,EAAiD;AAAE0L,2BAAiB;AAAnB,SAAjD,CAAjB;AACArL,aAAKsL,MAAL,GAAcH,IAAd;AACAnL,aAAKuL,QAAL,GAAgB9B,UAAhB;AACD,OAZD,CAaA;;;AACA,aAAOzJ,IAAP;AACC,KAhBD,CAiBA,OAAOuI,GAAP,EACA;AACE;AACAtK,cAAQC,GAAR,CAAYqK,GAAZ;AACD,KAvB6B,CAyB9B;;AACD,GApDY;AAsDb,sBAAoB,UAAUjJ,QAAV,EAAoB;AACtCf,WAAO4L,SAAP,CAAiB,WAAjB,EAA6B7K,QAA7B;AACA,WAAOhB,QAAQyL,OAAR,CAAgB;AAAE3I,cAAQ7C,OAAO6C,MAAP;AAAV,KAAhB,CAAP;AACD,GAzDY;AA0Db,qBAAoB,UAAUoK,UAAV,EACpB;AACE;AACA,QAAIC,cAAc,UAAUD,WAAW,CAAX,CAAV,GAA0B,QAA5C;AACAvN,YAAQC,GAAR,CAAYuN,WAAZ,EAHF,CAIE;;AACA,QAAIC,QAAQtM,SAASV,IAAT,CAAc;AAACiN,WAAI,CAAC;AAAC,wBAAe;AAACC,kBAAOH;AAAR;AAAhB,OAAD,EAAyC;AAAC,6BAAoB;AAACG,kBAAOH;AAAR;AAArB,OAAzC;AAAL,KAAd,CAAZ;AACA,QAAI/F,SAAS,EAAb;AACAgG,UAAMzM,OAAN,CAAc2K,WAAW;AACvBlE,aAAOmE,IAAP,CAAYD,OAAZ;AACD,KAFD,EAPF,CAUE;AACA;;AAEA3L,YAAQC,GAAR,CAAYwH,MAAZ;AACA,WAAOA,MAAP;AACD,GA1EY;AA2Eb,uBAAqB,YAAY;AAC/BzH,YAAQC,GAAR,CAAY,qCAAZ;AAEA,QAAI8M,aAAa,EAAjB,CAH+B,CAK/B;;AACA,QAAIhL,OAAOZ,SAASV,IAAT,CAAc;AAACY,gBAASf,OAAO6C,MAAP;AAAV,KAAd,EAAyC;AAAC8I,aAAM;AAACtK,mBAAW,CAAC;AAAb;AAAP,KAAzC,CAAX;AACAI,SAAKf,OAAL,CAAa2K,WAAW;AACtB;AACAoB,iBAAWnB,IAAX,CAAgBD,OAAhB;AACD,KAHD;AAKA,WAAOoB,UAAP;AACD;AAxFY,CAAf;;AA4FA5L,SAASyM,WAAT,GAAuB,YAAY;AACjC5N,UAAQC,GAAR,CAAY,4BAA4BkB,SAAST,KAAT,EAAxC;AACAJ,SAAO4L,SAAP,CAAiB,aAAjB;AACA,SAAO/K,SAASV,IAAT,CAAc,EAAd,EAAiB;AAACwL,WAAM;AAACtK,iBAAW,CAAC;AAAb;AAAP,GAAjB,CAAP,CAHiC,CAIjC;AACD,CALD;;AAMAR,SAAS0M,UAAT,GAAsB,UAAUC,MAAV,EAAkB;AACtC,MAAIrG,MAAJ;AACAzH,UAAQC,GAAR,CAAY,2BAAZ;;AACA,MAAI;AACFwH,aAAStG,SAAS2K,OAAT,CAAiB;AAAE9J,WAAK8L;AAAP,KAAjB,EAAkC;AAAEtK,aAAO;AAAT,KAAlC,CAAT,CADE,CAEF;AACD,GAHD,CAIA,OAAO8G,GAAP,EAAY;AACV,UAAMA,GAAN;AACD;;AACD,SAAO7C,MAAP;AACD,CAXD;;AAaAtG,SAAS4M,YAAT,GAAwB,YAAY,CAClC;AACD,CAFD;;AAIA5M,SAAS6M,cAAT,GAA0B,YAAY;AACpC,MAAIvG,MAAJ;AACAzH,UAAQC,GAAR,CAAY,YAAZ;;AACA,MAAI;AACF;AACAwH,aAAStG,SAASV,IAAT,CAAc,EAAd,EAAiB;AAACwL,aAAM;AAACtK,mBAAW,CAAC;AAAb;AAAP,KAAjB,CAAT;AAED,GAJD,CAKA,OAAO2I,GAAP,EAAY;AACV,UAAMA,GAAN;AACD;;AAGD,SAAO7C,MAAP,CAboC,CAatB;AAGf,CAhBD;;AAkBAtG,SAASuL,UAAT,GAAsB,UAAUuB,QAAV,EAAoB;AACxC;AACA,SAAO9M,SAASV,IAAT,CAAc;AAAEY,cAAU4M;AAAZ,GAAd,EAAqC;AAAChC,WAAM;AAACtK,iBAAW,CAAC;AAAb;AAAP,GAArC,CAAP;AAAqE;AACtE,CAHD,C,CAKA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AAGA;AACA;AACA;AACA;AACA;;;AAEAR,SAASyL,IAAT,GAAgB,UAAUC,iBAAV,EAA6B;AAC3C;AACA,SAAO1L,SAASV,IAAT,GAAgB6C,IAAhB,CAAqB;AAAC3B,eAAU,CAAC;AAAZ,GAArB,EAAqC6B,KAArC,CAA2C,EAA3C,EAA+C0K,IAA/C,CAAoDrB,iBAApD,CAAP;AAED,CAJD;;AAMAvM,OAAOmD,OAAP,CAAe;AACb0K,iBAAe,UAAUC,OAAV,EAAmBvK,GAAnB,EAAwB;AACrCC,UAAMsK,OAAN,EAAe;AACb/M,gBAAU0C,MADG;AAEbzC,oBAAcyC,MAFD;AAGbxC,0BAAoBwC,MAHP;AAIbvC,aAAO6M,MAJM;AAKbC,eAASvK,MALI;AAMblB,WAAKkB;AANQ,KAAf,EAQEF,GARF,EAQOO,MAAMC,KAAN,CAAYC,MAAZ,EAAoB,IAApB,CARP;AAUA8J,YAAQ/M,QAAR,GAAmBf,OAAO6C,MAA1B;AACAiL,YAAQG,UAAR,GAAqB,IAAI3M,IAAJ,EAArB;AACAwM,YAAQI,UAAR,GAAqBxF,QAAQ,QAAR,CAArB;AACA,QAAIyF,aAAatN,SAASD,MAAT,CAAgB;AAC/BG,cAD+B;AAE/BC,kBAF+B;AAG/BC,wBAH+B;AAI/BC,WAJ+B;AAK/B8M,aAL+B;AAM/B3M,eAN+B;AAO/BE,cAP+B;AAQ/BgB,SAR+B;AAS/BnB;AAT+B,KAAhB,CAAjB;AAYA,WAAO+M,UAAP;AAED;AA7BY,CAAf;AAgCE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxNFlG,cAAc;AACd,yBAAuB;AACrB,aAAS,cADY;AAErB,mBAAe,IAFM;AAGrB,eAAW,iFAHU;AAIrB,cAAU;AACR,cAAQ,gBADA;AAER,aAAO;AAFC,KAJW;AAQrB,gBAAY,QARS;AASrB,mBAAe,CACb,mDADa,EAEb,wCAFa,EAGb,+BAHa,EAIb,mCAJa,EAKb,4CALa,EAMb,uCANa,EAOb,iDAPa,EAQb,gCARa,CATM;AAmBrB,kBAAc,CACZ,wKADY,EAEZ,oNAFY,CAnBO;AAuBrB,YAAQ;AAvBa,GADT;AA0Bd,2BAAyB;AACvB,aAAS,wBADc;AAEvB,eAAW,iHAFY;AAGvB,cAAU;AACR,cAAQ,aADA;AAER,aAAO;AAFC,KAHa;AAOvB,gBAAY,aAPW;AAQvB,mBAAe,CACb,gCADa,EAEb,oDAFa,EAGb,+CAHa,EAIb,mDAJa,EAKb,8BALa,EAMb,mBANa,EAOb,8CAPa,EAQb,sBARa,EASb,qDATa,EAUb,sBAVa,EAWb,6CAXa,EAYb,kBAZa,EAab,wDAba,EAcb,sCAda,CARQ;AAwBvB,kBAAc,CACZ,sDADY,EAEZ,kCAFY,CAxBS;AA4BvB,YAAQ;AA5Be,GA1BX;AAwDd,mCAAiC;AAC/B,aAAS,wBADsB;AAE/B,eAAW,kFAFoB;AAG/B,cAAU;AACR,cAAQ,iBADA;AAER,aAAO;AAFC,KAHqB;AAO/B,gBAAY,MAPmB;AAQ/B,mBAAe,CACb,8BADa,EAEb,sBAFa,EAGb,eAHa,EAIb,gCAJa,EAKb,eALa,EAMb,6DANa,EAOb,aAPa,EAQb,OARa,EASb,wBATa,CARgB;AAmB/B,kBAAc,CACZ,8FADY,EAEZ,wWAFY,CAnBiB;AAuB/B,YAAQ;AAvBuB,GAxDnB;AAiFd,4BAA0B;AACxB,aAAS,iBADe;AAExB,eAAW,qGAFa;AAGxB,cAAU;AACR,cAAQ,YADA;AAER,aAAO;AAFC,KAHc;AAOxB,gBAAY,MAPY;AAQxB,mBAAe,CACb,kCADa,EAEb,2CAFa,EAGb,kDAHa,EAIb,YAJa,EAKb,iBALa,EAMb,kBANa,EAOb,gBAPa,EAQb,0EARa,EASb,iDATa,EAUb,gBAVa,EAWb,4BAXa,EAYb,0CAZa,EAab,6CAba,EAcb,mCAda,EAeb,uCAfa,EAgBb,qCAhBa,EAiBb,0BAjBa,EAkBb,uBAlBa,EAmBb,4BAnBa,EAoBb,uBApBa,EAqBb,oCArBa,EAsBb,8CAtBa,EAuBb,8CAvBa,EAwBb,yCAxBa,CARS;AAkCxB,kBAAc,CACZ,8KADY,EAEZ,oHAFY,CAlCU;AAsCxB,YAAQ;AAtCgB,GAjFZ;AAyHd,uCAAqC;AACnC,aAAS,4BAD0B;AAEnC,eAAW,0EAFwB;AAGnC,cAAU;AACR,cAAQ,UADA;AAER,aAAO;AAFC,KAHyB;AAOnC,gBAAY,QAPuB;AAQnC,mBAAe,CACb,WADa,EAEb,yDAFa,EAGb,oEAHa,EAIb,iBAJa,EAKb,gCALa,EAMb,yEANa,EAOb,+BAPa,EAQb,sBARa,EASb,uBATa,EAUb,+CAVa,CARoB;AAoBnC,kBAAc,CACZ,4JADY,EAEZ,yKAFY,CApBqB;AAwBnC,YAAQ;AAxB2B,GAzHvB;AAmJd,qBAAmB;AACjB,aAAS,wBADQ;AAEjB,mBAAe,IAFE;AAGjB,eAAW,6FAHM;AAIjB,cAAU;AACR,cAAQ,QADA;AAER,aAAO;AAFC,KAJO;AAQjB,gBAAY,aARK;AASjB,mBAAe,CACb,iCADa,EAEb,oBAFa,EAGb,yBAHa,EAIb,yBAJa,EAKb,eALa,EAMb,oFANa,EAOb,qDAPa,EAQb,+CARa,EASb,UATa,EAUb,4BAVa,EAWb,wBAXa,EAYb,2BAZa,EAab,+BAba,EAcb,iCAda,EAeb,sBAfa,EAgBb,iBAhBa,EAiBb,8BAjBa,EAkBb,qCAlBa,EAmBb,qCAnBa,EAoBb,yBApBa,EAqBb,+BArBa,EAsBb,4BAtBa,EAuBb,2BAvBa,EAwBb,iBAxBa,EAyBb,uBAzBa,EA0Bb,0CA1Ba,EA2Bb,yCA3Ba,EA4Bb,mCA5Ba,EA6Bb,4BA7Ba,CATE;AAwCjB,kBAAc,CACZ,sLADY,EAEZ,gEAFY,CAxCG;AA4CjB,YAAQ;AA5CS,GAnJL;AAiMd,mCAAiC;AAC/B,aAAS,0BADsB;AAE/B,eAAW,EAFoB;AAG/B,cAAU;AACR,cAAQ,YADA;AAER,aAAO;AAFC,KAHqB;AAO/B,gBAAY,QAPmB;AAQ/B,mBAAe,CACb,kBADa,EAEb,2CAFa,EAGb,gBAHa,EAIb,2BAJa,EAKb,2BALa,EAMb,2BANa,EAOb,gCAPa,EAQb,6BARa,EASb,kBATa,EAUb,eAVa,EAWb,eAXa,EAYb,oBAZa,EAab,sCAba,EAcb,wBAda,EAeb,eAfa,EAgBb,+BAhBa,EAiBb,uBAjBa,EAkBb,oBAlBa,EAmBb,cAnBa,EAoBb,sBApBa,EAqBb,wBArBa,CARgB;AA+B/B,kBAAc,CACZ,0HADY,EAEZ,yFAFY,CA/BiB;AAmC/B,YAAQ;AAnCuB,GAjMnB;AAsOd,4CAA0C;AACxC,aAAS,+BAD+B;AAExC,eAAW,qDAF6B;AAGxC,cAAU;AACR,cAAQ,gBADA;AAER,aAAO;AAFC,KAH8B;AAOxC,gBAAY,QAP4B;AAQxC,mBAAe,CACb,+BADa,EAEb,uDAFa,EAGb,+BAHa,EAIb,yBAJa,EAKb,aALa,EAMb,2BANa,EAOb,iCAPa,EAQb,wBARa,EASb,6CATa,EAUb,qBAVa,CARyB;AAoBxC,kBAAc,CACZ,+LADY,EAEZ,4IAFY,CApB0B;AAwBxC,YAAQ;AAxBgC,GAtO5B;AAgQd,yBAAuB;AACrB,aAAS,6BADY;AAErB,eAAW,4EAFU;AAGrB,cAAU;AACR,cAAQ,cADA;AAER,aAAO;AAFC,KAHW;AAOrB,gBAAY,QAPS;AAQrB,mBAAe,CACb,0EADa,EAEb,iCAFa,EAGb,sCAHa,EAIb,yDAJa,EAKb,yDALa,EAMb,6BANa,EAOb,+BAPa,EAQb,6BARa,EASb,gCATa,EAUb,yBAVa,EAWb,oBAXa,EAYb,8BAZa,CARM;AAsBrB,kBAAc,CACZ,iFADY,EAEZ,oJAFY,CAtBO;AA0BrB,YAAQ;AA1Ba,GAhQT;AA4Rd,6BAA2B;AACzB,aAAS,6BADgB;AAEzB,eAAW,EAFc;AAGzB,cAAU;AACR,cAAQ,UADA;AAER,aAAO;AAFC,KAHe;AAOzB,gBAAY,aAPa;AAQzB,mBAAe,CACb,oDADa,EAEb,gDAFa,EAGb,6BAHa,EAIb,sCAJa,EAKb,4CALa,EAMb,6BANa,EAOb,iFAPa,CARU;AAiBzB,kBAAc,CACZ,2NADY,EAEZ,0JAFY,CAjBW;AAqBzB,YAAQ;AArBiB,GA5Rb;AAmTd,uCAAqC;AACnC,aAAS,4BAD0B;AAEnC,mBAAe,IAFoB;AAGnC,eAAW,8DAHwB;AAInC,cAAU;AACR,cAAQ,YADA;AAER,aAAO;AAFC,KAJyB;AAQnC,gBAAY,QARuB;AASnC,mBAAe,CACb,YADa,EAEb,WAFa,EAGb,eAHa,EAIb,kDAJa,EAKb,oBALa,EAMb,eANa,EAOb,2BAPa,CAToB;AAkBnC,kBAAc,CACZ,mJADY,EAEZ,4FAFY,CAlBqB;AAsBnC,YAAQ;AAtB2B,GAnTvB;AA2Ud,6BAA2B;AACzB,aAAS,kBADgB;AAEzB,eAAW,oGAFc;AAGzB,cAAU;AACR,cAAQ,gBADA;AAER,aAAO;AAFC,KAHe;AAOzB,gBAAY,QAPa;AAQzB,mBAAe,CACb,uDADa,EAEb,mBAFa,EAGb,yBAHa,EAIb,wCAJa,CARU;AAczB,kBAAc,CACZ,sKADY,EAEZ,mDAFY,CAdW;AAkBzB,YAAQ;AAlBiB,GA3Ub;AA+Vd,kCAAgC;AAC9B,aAAS,kCADqB;AAE9B,eAAW,qEAFmB;AAG9B,cAAU;AACR,cAAQ,iBADA;AAER,aAAO;AAFC,KAHoB;AAO9B,gBAAY,QAPkB;AAQ9B,mBAAe,CACb,+BADa,EAEb,MAFa,EAGb,UAHa,EAIb,8DAJa,EAKb,qBALa,EAMb,oFANa,EAOb,qBAPa,EAQb,uDARa,CARe;AAkB9B,kBAAc,CACZ,wGADY,EAEZ,+JAFY,CAlBgB;AAsB9B,YAAQ;AAtBsB,GA/VlB;AAuXd,iCAA+B;AAC7B,aAAS,sBADoB;AAE7B,eAAW,EAFkB;AAG7B,cAAU;AACR,cAAQ,cADA;AAER,aAAO;AAFC,KAHmB;AAO7B,gBAAY,QAPiB;AAQ7B,mBAAe,CACb,0BADa,EAEb,6CAFa,EAGb,cAHa,CARc;AAa7B,kBAAc,CACZ,qVADY,EAEZ,6PAFY,CAbe;AAiB7B,YAAQ;AAjBqB,GAvXjB;AA0Yd,sBAAoB;AAClB,aAAS,wBADS;AAElB,eAAW,sHAFO;AAGlB,cAAU;AACR,cAAQ,UADA;AAER,aAAO;AAFC,KAHQ;AAOlB,gBAAY,QAPM;AAQlB,mBAAe,CACb,oEADa,EAEb,gDAFa,EAGb,uCAHa,EAIb,4BAJa,EAKb,wCALa,EAMb,gDANa,CARG;AAgBlB,kBAAc,CACZ,iRADY,EAEZ,mRAFY,CAhBI;AAoBlB,YAAQ;AApBU,GA1YN;AAgad,2CAAyC;AACvC,aAAS,kCAD8B;AAEvC,mBAAe,IAFwB;AAGvC,eAAW,+EAH4B;AAIvC,cAAU;AACR,cAAQ,gBADA;AAER,aAAO;AAFC,KAJ6B;AAQvC,gBAAY,aAR2B;AASvC,mBAAe,CACb,gFADa,EAEb,sCAFa,EAGb,uCAHa,EAIb,0CAJa,EAKb,2DALa,EAMb,yCANa,EAOb,mCAPa,EAQb,oCARa,EASb,gDATa,EAUb,8CAVa,EAWb,mBAXa,EAYb,aAZa,EAab,oCAba,EAcb,gBAda,CATwB;AAyBvC,kBAAc,CACZ,gSADY,EAEZ,qIAFY,CAzByB;AA6BvC,YAAQ;AA7B+B,GAha3B;AA+bd,2BAAyB;AACvB,aAAS,wCADc;AAEvB,eAAW,mDAFY;AAGvB,cAAU;AACR,cAAQ,aADA;AAER,aAAO;AAFC,KAHa;AAOvB,gBAAY,aAPW;AAQvB,mBAAe,CACb,yDADa,EAEb,mBAFa,EAGb,kBAHa,EAIb,mBAJa,EAKb,eALa,EAMb,iCANa,EAOb,4BAPa,EAQb,sFARa,EASb,qCATa,EAUb,0BAVa,EAWb,kBAXa,CARQ;AAqBvB,kBAAc,CACZ,kdADY,EAEZ,qPAFY,CArBS;AAyBvB,YAAQ;AAzBe,GA/bX;AA0dd,+BAA6B;AAC3B,aAAS,iDADkB;AAE3B,eAAW,2DAFgB;AAG3B,cAAU;AACR,cAAQ,gBADA;AAER,aAAO;AAFC,KAHiB;AAO3B,gBAAY,QAPe;AAQ3B,mBAAe,CACb,2DADa,EAEb,yCAFa,EAGb,iCAHa,EAIb,kCAJa,EAKb,4BALa,EAMb,4CANa,EAOb,yBAPa,EAQb,0BARa,EASb,mBATa,EAUb,2BAVa,EAWb,uBAXa,EAYb,+BAZa,EAab,0CAba,EAcb,0BAda,EAeb,sDAfa,CARY;AAyB3B,kBAAc,CACZ,mGADY,EAEZ,0OAFY,CAzBa;AA6B3B,YAAQ;AA7BmB,GA1df;AAyfd,sBAAoB;AAClB,aAAS,2BADS;AAElB,eAAW,+HAFO;AAGlB,cAAU;AACR,cAAQ,cADA;AAER,aAAO;AAFC,KAHQ;AAOlB,gBAAY,QAPM;AAQlB,mBAAe,CACb,gCADa,EAEb,2DAFa,EAGb,6EAHa,EAIb,yBAJa,EAKb,uCALa,EAMb,2BANa,EAOb,kBAPa,EAQb,gCARa,CARG;AAkBlB,kBAAc,CACZ,+EADY,EAEZ,0OAFY,CAlBI;AAsBlB,YAAQ;AAtBU,GAzfN;AAihBd,mCAAiC;AAC/B,aAAS,6CADsB;AAE/B,eAAW,sHAFoB;AAG/B,cAAU;AACR,cAAQ,cADA;AAER,aAAO;AAFC,KAHqB;AAO/B,gBAAY,QAPmB;AAQ/B,mBAAe,CACb,qBADa,EAEb,sBAFa,EAGb,uBAHa,EAIb,2BAJa,EAKb,0BALa,EAMb,wCANa,EAOb,wCAPa,EAQb,6BARa,EASb,2BATa,EAUb,qBAVa,EAWb,sBAXa,EAYb,wBAZa,EAab,kBAba,EAcb,uBAda,EAeb,2BAfa,EAgBb,uBAhBa,EAiBb,kCAjBa,EAkBb,2BAlBa,EAmBb,yBAnBa,EAoBb,wBApBa,EAqBb,0BArBa,CARgB;AA+B/B,kBAAc,CACZ,kJADY,EAEZ,wQAFY,CA/BiB;AAmC/B,YAAQ;AAnCuB,GAjhBnB;AAsjBd,yBAAuB;AACrB,aAAS,kDADY;AAErB,mBAAe,IAFM;AAGrB,eAAW,mGAHU;AAIrB,cAAU;AACR,cAAQ,UADA;AAER,aAAO;AAFC,KAJW;AAQrB,gBAAY,aARS;AASrB,mBAAe,CACb,iDADa,EAEb,iBAFa,EAGb,0DAHa,EAIb,uDAJa,EAKb,yBALa,EAMb,2BANa,EAOb,6BAPa,EAQb,6BARa,EASb,qBATa,EAUb,YAVa,EAWb,6CAXa,EAYb,yBAZa,EAab,4BAba,EAcb,wCAda,EAeb,oBAfa,EAgBb,sBAhBa,EAiBb,uCAjBa,EAkBb,6BAlBa,CATM;AA6BrB,kBAAc,CACZ,2LADY,EAEZ,+MAFY,CA7BO;AAiCrB,YAAQ;AAjCa,GAtjBT;AAylBd,iCAA+B;AAC7B,aAAS,8BADoB;AAE7B,eAAW,+DAFkB;AAG7B,cAAU;AACR,cAAQ,kBADA;AAER,aAAO;AAFC,KAHmB;AAO7B,gBAAY,QAPiB;AAQ7B,mBAAe,CACb,oCADa,EAEb,iBAFa,EAGb,kBAHa,EAIb,QAJa,EAKb,iBALa,EAMb,mCANa,EAOb,+BAPa,EAQb,4BARa,EASb,eATa,EAUb,yBAVa,EAWb,iCAXa,EAYb,cAZa,EAab,4BAba,EAcb,iCAda,CARc;AAwB7B,kBAAc,CACZ,oEADY,EAEZ,oEAFY,CAxBe;AA4B7B,YAAQ;AA5BqB,GAzlBjB;AAunBd,uBAAqB;AACnB,aAAS,cADU;AAEnB,eAAW,EAFQ;AAGnB,cAAU;AACR,cAAQ,UADA;AAER,aAAO;AAFC,KAHS;AAOnB,gBAAY,QAPO;AAQnB,mBAAe,CACb,uCADa,EAEb,qDAFa,EAGb,4CAHa,EAIb,iCAJa,EAKb,8CALa,EAMb,iBANa,EAOb,gCAPa,EAQb,6BARa,EASb,6CATa,CARI;AAmBnB,kBAAc,CACZ,kIADY,EAEZ,sIAFY,CAnBK;AAuBnB,YAAQ;AAvBW,GAvnBP;AAgpBd,wCAAsC;AACpC,aAAS,+BAD2B;AAEpC,eAAW,EAFyB;AAGpC,cAAU;AACR,cAAQ,iBADA;AAER,aAAO;AAFC,KAH0B;AAOpC,gBAAY,YAPwB;AAQpC,mBAAe,CACb,qDADa,EAEb,6CAFa,EAGb,sDAHa,EAIb,sDAJa,EAKb,2BALa,EAMb,gCANa,CARqB;AAgBpC,kBAAc,CACZ,0IADY,EAEZ,8MAFY,CAhBsB;AAoBpC,YAAQ;AApB4B,GAhpBxB;AAsqBd,+BAA6B;AAC3B,aAAS,6CADkB;AAE3B,eAAW,mFAFgB;AAG3B,cAAU;AACR,cAAQ,QADA;AAER,aAAO;AAFC,KAHiB;AAO3B,gBAAY,QAPe;AAQ3B,mBAAe,CACb,8BADa,EAEb,kCAFa,EAGb,0BAHa,EAIb,+EAJa,EAKb,qCALa,EAMb,0BANa,EAOb,0DAPa,EAQb,iCARa,EASb,6GATa,CARY;AAmB3B,kBAAc,CACZ,iDADY,EAEZ,iPAFY,CAnBa;AAuB3B,YAAQ;AAvBmB,GAtqBf;AA+rBd,2BAAyB;AACvB,aAAS,gBADc;AAEvB,mBAAe,IAFQ;AAGvB,eAAW,4GAHY;AAIvB,cAAU;AACR,cAAQ,gBADA;AAER,aAAO;AAFC,KAJa;AAQvB,gBAAY,MARW;AASvB,mBAAe,CACb,yBADa,EAEb,mCAFa,EAGb,2DAHa,EAIb,mBAJa,EAKb,8DALa,EAMb,gDANa,EAOb,cAPa,EAQb,sBARa,EASb,qDATa,EAUb,mCAVa,CATQ;AAqBvB,kBAAc,CACZ,gCADY,EAEZ,kTAFY,CArBS;AAyBvB,YAAQ;AAzBe,GA/rBX;AA0tBd,mCAAiC;AAC/B,aAAS,iDADsB;AAE/B,eAAW,EAFoB;AAG/B,cAAU;AACR,cAAQ,YADA;AAER,aAAO;AAFC,KAHqB;AAO/B,gBAAY,YAPmB;AAQ/B,mBAAe,CACb,4BADa,EAEb,4CAFa,EAGb,0CAHa,EAIb,4CAJa,EAKb,uBALa,EAMb,yBANa,EAOb,sBAPa,EAQb,oBARa,EASb,kBATa,EAUb,uCAVa,EAWb,4CAXa,EAYb,QAZa,EAab,eAba,EAcb,wBAda,EAeb,uBAfa,EAgBb,YAhBa,EAiBb,oBAjBa,EAkBb,yBAlBa,CARgB;AA4B/B,kBAAc,CACZ,mcADY,EAEZ,kOAFY,CA5BiB;AAgC/B,YAAQ;AAhCuB,GA1tBnB;AA4vBd,0BAAwB;AACtB,aAAS,2CADa;AAEtB,eAAW,mFAFW;AAGtB,cAAU;AACR,cAAQ,YADA;AAER,aAAO;AAFC,KAHY;AAOtB,gBAAY,aAPU;AAQtB,mBAAe,CACb,kCADa,EAEb,8BAFa,EAGb,oBAHa,EAIb,mBAJa,EAKb,qCALa,EAMb,0BANa,EAOb,4BAPa,EAQb,kBARa,EASb,4BATa,EAUb,8BAVa,EAWb,mCAXa,EAYb,eAZa,EAab,wEAba,EAcb,yBAda,EAeb,qBAfa,EAgBb,qEAhBa,CARO;AA0BtB,kBAAc,CACZ,wEADY,EAEZ,uDAFY,CA1BQ;AA8BtB,YAAQ;AA9Bc;AA5vBV,CAAd,C;;;;;;;;;;;ACAA,IAAImG,gBAAJ;AACA,IAAIC,kBAAJ,C,CACA;;AACAC,gBAAgB,IAAhB,C,CAEA;;AACA,IAAItO,OAAOuO,QAAX,EAAqB;AACnBvO,SAAO4L,SAAP,CAAiB,MAAjB;AACA5L,SAAO4L,SAAP,CAAiB,gBAAjB;AACA5L,SAAO4L,SAAP,CAAiB,QAAjB;AACA5L,SAAO4L,SAAP,CAAiB,YAAjB,EAJmB,CAMnB;AAEA;;AACAwC,qBAAmBpO,OAAO4L,SAAP,CAAiB,MAAjB,CAAnB;AACD;;AAED4C,OAAOC,SAAP,CAAiB;AACfC,kBAAgB,SADD;AAEfC,oBAAkB;AAFH,CAAjB;;AAKA,IAAI3O,OAAOuO,QAAX,EAAqB;AACnB;AACA;AACAD,kBAAgBM,aAAaC,IAAb,EAAhB;AACD;;AAIDC,qBAAqBC,gBAAgBC,MAAhB,CAAuB;AAC1CC,kBAAgB,YAAY;AAE1BjP,WAAO4L,SAAP,CAAiB,gBAAjB,EAAmC,YAAY;AAC7C0C,oBAAcY,OAAd;AACD,KAFD;AAIAlP,WAAO4L,SAAP,CAAiB,mBAAjB,EAAsC,YAAY;AAChD0C,oBAAcY,OAAd;AACD,KAFD;AAGD;AAVyC,CAAvB,CAArB;AAaAC,iBAAiBJ,gBAAgBC,MAAhB,CAAuB;AACtCC,kBAAgB,YAAY;AAC1B,SAAKb,gBAAL,GAAwBA,gBAAxB;AACD;AAHqC,CAAvB,CAAjB;AAMAgB,oBAAoBL,gBAAgBC,MAAhB,CAAuB;AACzCxI,QAAM,YAAY;AAChB,WAAOU,EAAEmI,MAAF,CAASpH,WAAT,CAAP;AACD;AAHwC,CAAvB,CAApB;AAMAqH,sBAAsBP,gBAAgBC,MAAhB,CAAuB;AAC3CC,kBAAgB,YAAY;AAC1B,QAAIjP,OAAOkE,IAAP,EAAJ,EACElE,OAAO4L,SAAP,CAAiB,WAAjB,EADF,KAGE2D,QAAQC,IAAR,CAAa,aAAb;AACH,GAN0C;AAO3ChJ,QAAM,YAAY;AAChB,QAAIxG,OAAOkE,IAAP,EAAJ,EACE,OAAOgD,EAAEmI,MAAF,CAASnI,EAAEuI,IAAF,CAAOxH,WAAP,EAAoBjI,OAAOkE,IAAP,GAAcyD,qBAAlC,CAAT,CAAP;AACH;AAV0C,CAAvB,CAAtB;AAaA+H,mBAAmBX,gBAAgBC,MAAhB,CAAuB;AACxCC,kBAAgB,YAAY;AAC1BjP,WAAO4L,SAAP,CAAiB,QAAjB,EAA2B,KAAK1F,MAAL,CAAY5F,IAAvC;AACD,GAHuC;AAIxCkG,QAAM,YAAY;AAChB,WAAOyB,YAAY,KAAK/B,MAAL,CAAY5F,IAAxB,CAAP;AACD;AANuC,CAAvB,CAAnB,C,CASA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAGAqP,oBAAoBZ,gBAAgBC,MAAhB,CAAuB;AACzCC,kBAAiB,YACjB;AACE,QAAI,KAAK/I,MAAL,CAAYxE,GAAhB,EACA;AACEhC,cAAQC,GAAR,CAAY,qBAAqB,KAAKuG,MAAL,CAAYxE,GAA7C;AACAkO,qBAAeC,UAAf,CAA0B,gBAA1B;AACA7P,aAAO4L,SAAP,CAAiB,SAAjB,EAA2B4C,OAAOsB,OAAP,GAAiB5J,MAAjB,CAAwBxE,GAAnD;AACA,UAAIqO,iBAAiB/P,OAAOgQ,SAAP,CAAiBC,gBAAgB,KAAK/J,MAAL,CAAYxE,GAA5B,CAAjB,CAArB,CAJF,CAKE;AACA;;AACA4M,oBAAcY,OAAd;AAED;AAEF,GAfwC,CAiBzC;AACA;AACA;AACA;AACA;;AArByC,CAAvB,CAApB;;AA0BA,SAASe,eAAT,CAAyB1P,EAAzB,EACA;AACEb,UAAQC,GAAR,CAAY,gDAAgDY,EAA5D;AACA,MAAI2P,UAAU,EAAd;AACA,MAAIC,aAAW,EAAf;AACA,MAAIC,QAAUpQ,OAAO6M,KAAP,CAAa,YAAb,EAA2B,CAACtM,EAAD,CAA3B,EAAgC;AAAC8P,UAAM;AAAP,GAAhC,EAA+C,UAAStG,GAAT,EAAavD,IAAb,EAAkB;AAC7E,QAAI,CAACuD,GAAL,EACA;AACE6F,qBAAeC,UAAf,CAA0B,gBAA1B;AACAS,cAAQC,GAAR,CAAY,gBAAZ,EAA6B/J,IAA7B;AACD,KAJD,MAMA;AACE9G,cAAQC,GAAR,CAAYoK,GAAZ;AACA6F,qBAAeC,UAAf,CAA0B,gBAA1B;AACD;AACF,GAXa,CAAd;AAYD;;AAGDW,mBAAmBzB,gBAAgBC,MAAhB,CAAuB;AACxCC,kBAAgB,YAChB;AACEvP,YAAQC,GAAR,CAAY,0BAAZ;;AACA,QAAIK,OAAO6C,MAAP,EAAJ,EACA;AACE;AACA;AACA7C,aAAO4L,SAAP,CAAiB,WAAjB,EAA6B5L,OAAO6C,MAAP,EAA7B;AACA9C,cAAQyL,OAAR,CAAgB;AAAC3I,gBAAO7C,OAAO6C,MAAP;AAAR,OAAhB,EAJF,CAME;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAnD,cAAQC,GAAR,CAAY,kCAAZ;AACAK,aAAO4L,SAAP,CAAiB,eAAjB,EAAkC,YAAY;AAC5ClM,gBAAQC,GAAR,CAAYC,cAAcO,IAAd,CAAmB,EAAnB,EAAuBC,KAAvB,EAAZ,EAD4C,CAE5C;;AACAkO,sBAAcY,OAAd;AACD,OAJD;AAOD;AACF;AA/BuC,CAAvB,CAAnB;AAkCAuB,wBAAwB1B,gBAAgBC,MAAhB,CAAuB;AAC7CC,kBAAe,YAAU;AACvBvP,YAAQC,GAAR,CAAY,cAAZ;;AACA,QAAI,KAAKuG,MAAL,CAAYxE,GAAhB,EACA;AACEhC,cAAQC,GAAR,CAAY,0BAA0B,KAAKuG,MAAL,CAAYxE,GAAlD;AACAkO,qBAAeC,UAAf,CAA0B,gBAA1B;AACA7P,aAAO4L,SAAP,CAAiB,SAAjB,EAA2B4C,OAAOsB,OAAP,GAAiB5J,MAAjB,CAAwBxE,GAAnD;AACA,UAAIqO,iBAAiB/P,OAAOgQ,SAAP,CAAiBC,gBAAgB,KAAK/J,MAAL,CAAYxE,GAA5B,CAAjB,CAArB;AACA4M,oBAAcY,OAAd;AACD;AACF;AAX4C,CAAvB,CAAxB;AAcAwB,kBAAkB3B,gBAAgBC,MAAhB,CAAuB;AACvCC,kBAAgB,YAAY;AAC1BjP,WAAO4L,SAAP,CAAiB,MAAjB;AACD;AAHsC,CAAvB,CAAlB;AAMA+E,iBAAiB5B,gBAAgBC,MAAhB,CAAuB;AACtCC,kBAAe,YAAU;AACrBjP,WAAO4L,SAAP,CAAiB,kBAAjB;AACFlM,YAAQC,GAAR,CAAY,4BAAZ;AACA2O,kBAAcY,OAAd;AACD;AALqC,CAAvB,CAAjB;AAQAV,OAAOoC,KAAP,CAAa,MAAb,EAAqB;AACnBlG,QAAM;AADa,CAArB,E,CAIA;AACA;AACA;AACA;AACA;;AAEA8D,OAAOoC,KAAP,CAAa,UAAb;AAEApC,OAAOoC,KAAP,CAAa,QAAb;AAEApC,OAAOoC,KAAP,CAAa,MAAb;AAIApC,OAAOoC,KAAP,CAAa,SAAb;AAEApC,OAAOoC,KAAP,CAAa,WAAb;AAEApC,OAAOoC,KAAP,CAAa,OAAb;AAEApC,OAAOoC,KAAP,CAAa,QAAb,EAAuB;AACrBlG,QAAM;AADe,CAAvB;AAIA8D,OAAOoC,KAAP,CAAa,SAAb,EAAwB;AACtBlG,QAAO,eADe;AAEtBpK,QAAM,aAFgB;AAGtBuQ,YAAU;AAHY,CAAxB;AAMErC,OAAOoC,KAAP,CAAa,aAAb,EAA4B;AAC1BlG,QAAO,mBADmB;AAE1BpK,QAAM,iBAFoB;AAG1BuQ,YAAU,sBAHgB;AAI1BnC,kBAAgB,IAJU;AAK1BoC,cAAYL;AALc,CAA5B;AASAjC,OAAOoC,KAAP,CAAa,OAAb,EAAqB;AACnBlG,QAAM,QADa;AAEnBmG,YAAU,aAFS;AAGnBnC,kBAAgB;AAHG,CAArB;AAMAF,OAAOoC,KAAP,CAAa,QAAb,EAAsB;AACpBlG,QAAM,SADc;AAEpBmG,YAAU,mBAFU;AAGpBnC,kBAAgB;AAHI,CAAtB;AAOFF,OAAOoC,KAAP,CAAa,OAAb,EAAsB;AACpBlC,kBAAgB;AADI,CAAtB;AAIAF,OAAOS,cAAP,CAAsB,cAAtB,EAAsC;AACpC8B,QAAM;AAD8B,CAAtC,E;;;;;;;;;;;AC3RAhR,QAAQ6C,KAAR,CAAc;AACVhC,UAAQ,UAASiC,MAAT,EAAiBC,GAAjB,EAAsB;AAC5B,WAAOA,IAAID,MAAJ,KAAeA,MAAtB;AACD,GAHS;AAIV6E,UAAQ,UAAS7E,MAAT,EAAgBC,GAAhB,EAAoB;AAC1B,WAAOA,IAAID,MAAJ,KAAeA,MAAtB;AACD,GANS;AAOViI,UAAQ,UAASjI,MAAT,EAAiBC,GAAjB,EAAsB;AAC1B,WAAOA,IAAID,MAAJ,KAAeA,MAAtB;AACD;AATO,CAAd;AAaE7C,OAAOmD,OAAP,CAAe;AACb,eAAY,UAAS5C,EAAT,EAAY;AACtB,QAAI4G,SAAO,EAAX;;AACA,QACA;AACE;AACA;AACA,UAAI6J,eAAehR,OAAO6M,KAAP,CAAa,kBAAb,EAAgC,CAACtM,EAAD,CAAhC,EAAqC;AAACuM,yBAAiB;AAAlB,OAArC,CAAnB,CAHF,CAKG;;AAED,UAAIkE,YAAJ,EACA;AACE;AACA7J,iBAAO6J,YAAP;AAED,OALD,MAQA;AACC;AACC7J,iBAAU;AACRzF,eAAI,EADI;AAEPmB,kBAAO7C,OAAO6C,MAAP,EAFA;AAGPjB,wBAAe,EAHR;AAIPqP,sBAAY,EAJL;AAKPC,mBAAS,EALF;AAMPC,qBAAW,EANJ;AAOPC,kBAAQ,EAPD;AAQPC,kBAAQ,EARD;AASPC,oBAAU,EATH;AAUPC,iBAAQ,EAVD;AAWPC,iBAAQ,EAXD;AAYP1P,gBAAM,EAZC;AAaPC,gBAAM,EAbC;AAcPC,gBAAM,EAdC;AAePC,gBAAM,EAfC;AAgBPwP,gBAAM,EAhBC;AAiBPC,mBAAS;AAjBF,SAAV;AAqBD,OAtCH,CAuCE;;AACD,KAzCD,CA0CA,OAAO1H,GAAP,EACA;AACE;AACE,YAAMA,GAAN;AACH,KAhDqB,CAiDtB;;;AACA,WAAO7C,MAAP;AAED,GArDY;AAuDb,eAAY,UAASwK,SAAT,EAAmB;AAC9B;AAEA,QAAI;AAKJ,UAAIC,eACJ7R,QAAQmM,MAAR,CAAe;AACd;AACArJ,gBAAQ8O,UAAU9O;AAFJ,OAAf,EAGM;AACL;AACAsJ,cAAM;AACJvK,wBAAe+P,UAAU/P,YADrB;AAEJqP,sBAAYU,UAAUV,UAFlB;AAGJC,mBAAUS,UAAUT,OAHhB;AAIJC,qBAAYQ,UAAUR,SAJlB;AAKJC,kBAASO,UAAUP,MALf;AAMJC,kBAASM,UAAUN,MANf;AAOJC,oBAAWK,UAAUL,QAPjB;AAQJC,iBAAQI,UAAUJ,KARd;AASJC,iBAAQG,UAAUH,KATd;AAUJ1P,gBAAO6P,UAAU7P,IAVb;AAWJC,gBAAO4P,UAAU5P,IAXb;AAYJC,gBAAO2P,UAAU3P,IAZb;AAaJC,gBAAO0P,UAAU1P,IAbb;AAcJwP,gBAAOE,UAAUF,IAdb;AAeJC,mBAAUC,UAAUD;AAfhB;AAFD,OAHN,CADA,CALI,CA8BL;AAEE;AAEA,KAlCD,CAkCE,OAAOzH,KAAP,EAAc;AAEdvK,cAAQC,GAAR,CAAY,uBAAuBsK,KAAnC;AACA,YAAMA,KAAN;AACD;AAGD,GAnGY;AAqGb,kBAAe,UAAS0H,SAAT,EAAmB;AAC9B;AACC,WAAO5R,QAAQyL,OAAR,CAAgB;AAAC3I,cAAO8J;AAAR,KAAhB,CAAP;AACJ,GAxGY;AAyGb,kBAAe,UAASpM,EAAT,EAAY;AACvB;AACC,WAAOR,QAAQ+K,MAAR,CAAe;AAACjI,cAAOtC;AAAR,KAAf,CAAP;AACJ;AA5GY,CAAf;;AAkHAR,QAAQ8R,UAAR,GAAoB,YAAU;AAC1B,SAAO9R,QAAQI,IAAR,CAAa,EAAb,CAAP;AACH,CAFD;;AAIAJ,QAAQuM,IAAR,GAAe,UAASC,iBAAT,EAA2B;AACtC;AACA,SAAOxM,QAAQI,IAAR,CAAa,EAAb,EAAiB;AAAC6C,UAAM;AAACC,YAAM,CAAC;AAAR;AAAP,GAAjB,CAAP;AAEH,CAJD;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5IF;AACA;AACA;AACA;AACA,IAAI,OAAOjD,OAAO+E,QAAd,KAA2B,WAA/B,EACE/E,OAAO+E,QAAP,GAAkB,EAAlB;;AAGFmC,EAAE4K,QAAF,CAAW9R,OAAO+E,QAAlB,EAA4B;AAC1BX,WAAS;AACPc,iBAAa,2BADN;AAEPE,YAAQ;AAFD,GADiB;AAK1B;AACAsE,YAAS;AACPC,kBAAa,mEADN;AAEPoI,aAAQ,aAFD;AAGPC,uBAAkB,OAHX;AAIPC,yBAAoB;AAJb,GANiB;AAY1BzF,yBAAwB;AAZE,CAA5B;;AAeA0F,qBAAqBC,cAArB,CAAoCjG,MAApC,CACE;AAAEkG,WAAS;AAAX,CADF,EAEE;AACEjG,QAAM;AACJjH,iBAAalF,OAAO+E,QAAP,CAAgBX,OAAhB,CAAwBc,WADjC;AAEJE,YAAQpF,OAAO+E,QAAP,CAAgBX,OAAhB,CAAwBgB;AAF5B;AADR,CAFF,E;;;;;;;;;;;ACvBApF,OAAOqS,OAAP,CAAe,gBAAf,EAAiC,YAAW;AAC1C,SAAO9K,eAAepH,IAAf,EAAP;AACD,CAFD;AAIAH,OAAOqS,OAAP,CAAe,MAAf,EAAuB,YAAW;AAChC,SAAO9G,KAAKpL,IAAL,CAAU,EAAV,EAAc;AAAC6C,UAAM;AAACC,YAAM,CAAC;AAAR,KAAP;AAAmBC,WAAO;AAA1B,GAAd,CAAP;AACD,CAFD;AAKAlD,OAAOqS,OAAP,CAAe,QAAf,EAAwB,YAAU;AAChC,SAAO5P,OAAOtC,IAAP,CAAY,EAAZ,CAAP;AACD,CAFD;AAOAH,OAAOqS,OAAP,CAAe,gBAAf,EAAiC,YAAY;AAE3C3S,UAAQC,GAAR,CAAY,oCAAoCK,OAAO+E,QAAP,CAAgByH,qBAAhE;AACA,MAAI8F,WAAJ;;AACA,MACA;AAEEA,kBAAczR,SAASV,IAAT,CAAc,EAAd,EAAiB;AAAC6C,YAAK;AAAC3B,mBAAU,CAAC;AAAZ;AAAN,KAAjB,CAAd;AAED,GALD,CAMA,OAAO2I,GAAP,EACA;AACEtK,YAAQC,GAAR,CAAY,gCAAgCqK,GAA5C;AACD;;AACDtK,UAAQC,GAAR,CAAY,8BAAZ;AACA,SAAO2S,WAAP;AAKD,CApBD;AAsBAtS,OAAOqS,OAAP,CAAe,gBAAf,EAAiC,YAAY;AAC3C3S,UAAQC,GAAR,CAAY,6BAA6BgD,WAAWvC,KAApD;AACA,SAAOuC,WAAWI,MAAX,EAAP;AACD,CAHD;AAKA/C,OAAOqS,OAAP,CAAe,MAAf,EAAuB,YAAW;AAChC,SAAO1P,WAAWxC,IAAX,CAAgB,EAAhB,EAAoB;AAAC6C,UAAM;AAACC,YAAM,CAAC;AAAR,KAAP;AAAmBC,WAAO;AAA1B,GAApB,CAAP;AACD,CAFD;AAIAlD,OAAOqS,OAAP,CAAe,QAAf,EAAyB,UAAS/R,IAAT,EAAe;AACtCkD,QAAMlD,IAAN,EAAYmD,MAAZ;AACA,SAAO,CACL8D,eAAepH,IAAf,CAAoB;AAACuD,gBAAYpD;AAAb,GAApB,CADK,EAELqC,WAAWxC,IAAX,CAAgB;AAACuD,gBAAYpD;AAAb,GAAhB,CAFK,CAAP;AAID,CAND;AAQAN,OAAOqS,OAAP,CAAe,eAAf,EAAgC,YAAW;AACzC3S,UAAQC,GAAR,CAAY,6BAA6BC,cAAcQ,KAAvD;AACA,SAAOR,cAAcO,IAAd,CAAmB,EAAnB,CAAP;AACD,CAHD;AAKAH,OAAOqS,OAAP,CAAe,aAAf,EAA8B,YAAU,CACrC;AAEF,CAHD;AAKArS,OAAOqS,OAAP,CAAe,kBAAf,EAAkC,YAAU;AAC1C3S,UAAQC,GAAR,CAAY,oCAAoCK,OAAO+E,QAAP,CAAgByH,qBAAhE;AAEF,MAAI8F,WAAJ;;AACA,MACA;AAEEA,kBAAczR,SAASV,IAAT,CAAc,EAAd,EAAiB;AAAC6C,YAAK;AAAC3B,mBAAU,CAAC;AAAZ;AAAN,KAAjB,EAAuC;AAAC6B,aAAOlD,OAAO+E,QAAP,CAAgByH;AAAxB,KAAvC,CAAd;AAED,GALD,CAMA,OAAOxC,GAAP,EACA;AACEtK,YAAQC,GAAR,CAAY,gCAAgCqK,GAA5C;AACD;;AACD,SAAOsI,WAAP;AAGC,CAjBD;AAoBAtS,OAAOqS,OAAP,CAAe,SAAf,EAA0B,UAAS9R,EAAT,EAAa;AACrCiD,QAAMjD,EAAN,EAAUkD,MAAV;AACA/D,UAAQC,GAAR,CAAY,kCAAkCY,EAA9C;AACA,MAAI4P,aAAW,EAAf;;AACA,MACA;AAEE,SAAKoC,KAAL;AACA,QAAIC,QAAQ3R,SAAS2K,OAAT,CAAiB;AAAC9J,WAAInB;AAAL,KAAjB,CAAZ,CAHF,CAIE;;AACA,WAAOM,SAASV,IAAT,CAAc;AAACuB,WAAInB;AAAL,KAAd,CAAP;AAGD,GATD,CAUA,OAAOyJ,GAAP,EACA;AACE,SAAKuI,KAAL;AACA7S,YAAQC,GAAR,CAAY,wBAAwBqK,GAApC;AACD;AAKF,CAvBD;AAyBAhK,OAAOqS,OAAP,CAAe,WAAf,EAA2B,UAAS9R,EAAT,EAAY;AACrCiD,QAAMjD,EAAN,EAASkD,MAAT;AACA/D,UAAQC,GAAR,CAAY,sBAAsBY,EAAlC;AACA,MAAI4G,SAAS,EAAb;;AACA,MACA;AACE,QAAIsL,UAAU1S,QAAQI,IAAR,CAAa;AAAC0C,cAAOtC;AAAR,KAAb,CAAd;AAEA,WAAOkS,OAAP;AACD,GALD,CAMA,OAAMzI,GAAN,EACA;AACEtK,YAAQC,GAAR,CAAY,2CAA2CqK,GAAvD;AACD;;AACD,SAAO7C,MAAP;AAED,CAhBD;AAkBAnH,OAAOqS,OAAP,CAAe,YAAf,EAA4B,YAAU;AAEpC3S,UAAQC,GAAR,CAAY,wBAAZ;AACA,SAAOI,QAAQI,IAAR,CAAa,EAAb,CAAP;AAED,CALD;AAOEH,OAAOqS,OAAP,CAAe,qBAAf,EAAqC,UAAS9R,EAAT,EAAY;AAC/CiD,QAAMjD,EAAN,EAASkD,MAAT;AACA/D,UAAQC,GAAR,CAAY,+BAAZ;AACA,SAAO8C,OAAOtC,IAAP,CAAY;AAACuS,cAAS,eAAV;AAA0B/E,cAASpN;AAAnC,GAAZ,CAAP;AAED,CALD;AAMAP,OAAOqS,OAAP,CAAe,qBAAf,EAAqC,UAAS9R,EAAT,EAAY;AAC/C;AACAb,UAAQC,GAAR,CAAY,+BAAZ;AACA,SAAO8C,OAAOtC,IAAP,CAAY;AAACuS,cAAS,gBAAV;AAA2BvH,aAAQ5K;AAAnC,GAAZ,CAAP;AAED,CALD;AAOAP,OAAOqS,OAAP,CAAe,oBAAf,EAAqC,UAAS9R,EAAT,EAAa;AAChD;AACA;AACA,MAAIoS,cAAc,EAAlB;;AACA,MACA;AACA,QAAIC,MAAMnQ,OAAO+I,OAAP,CAAe;AAACL,eAAQ5K;AAAT,KAAf,CAAV;AACAoS,gBAAYrH,IAAZ,CAAiBsH,GAAjB;AACC,GAJD,CAKA,OAAO5I,GAAP,EACA;AACEtK,YAAQC,GAAR,CAAY,8BAA8BqK,GAA1C;AACD;;AACD,SAAOvH,OAAOtC,IAAP,CAAY;AAACgL,aAAQ5K;AAAT,GAAZ,EAAyB;AAAC2C,WAAM;AAAP,GAAzB,CAAP;AAEH,CAfC;AAkBAlD,OAAOqS,OAAP,CAAe,eAAf,EAAgC,UAAS9R,EAAT,EAAa;AAC3C;AACAb,UAAQC,GAAR,CAAY,0CAA0CY,EAAtD;AACC,MAAI6K,eAAe3I,OAAOtC,IAAP,CAAY;AAACgL,aAAQ5K;AAAT,GAAZ,CAAnB;AACAb,UAAQC,GAAR,CAAYyL,aAAahL,KAAb,EAAZ;;AACD,MACA;AACEqC,WAAOtC,IAAP,CAAY;AAACgL,eAAQ5K;AAAT,KAAZ,EAA0BG,OAA1B,CAAkC2K,WAAW,CAC3C;AACD,KAFD;AAID,GAND,CAOA,OAAOrB,GAAP,EACA;AACEtK,YAAQC,GAAR,CAAY,+BAA+BqK,GAA3C;AACD;;AAED,SAAOoB,YAAP;AAEH,CAnBC;AAqBApL,OAAOqS,OAAP,CAAe,gBAAf,EAAiC,UAAS9R,EAAT,EAAa;AAC5CiD,QAAMjD,EAAN,EAAUkD,MAAV;AACA/D,UAAQC,GAAR,CAAY,mCAAmCY,EAA/C;;AACA,MAAI;AACF,QAAIsS,cAAchS,SAASV,IAAT,CAAc;AAACY,gBAASR;AAAV,KAAd,CAAlB;AACF,WAAOsS,WAAP;AACC,GAHD,CAGE,OAAO5I,KAAP,EAAc;AACd,UAAMA,KAAN;AACD;AAGJ,CAXC;AAaFjK,OAAOqS,OAAP,CAAe,SAAf,EAAyB,UAAUxN,OAAV,EAAkB;AAC1CnF,UAAQC,GAAR,CAAY,cAAZ;AACA,MAAIuN,cAAc,UAAUrI,OAAV,GAAoB,QAAtC;AACGnF,UAAQC,GAAR,CAAYuN,WAAZ,EAHuC,CAIvC;;AACA,MAAIC,QAAQtM,SAASV,IAAT,CAAc;AAAC,oBAAe;AAACkN,cAAOH;AAAR;AAAhB,GAAd,CAAZ;AACAxN,UAAQC,GAAR,CAAYwN,MAAM/M,KAAN,EAAZ;AACA,MAAI+G,SAAS,EAAb;AACAgG,QAAMzM,OAAN,CAAc2K,WAAW;AACvBlE,WAAOmE,IAAP,CAAYD,OAAZ;AACD,GAFD,EARuC,CAWvC;AACA;;AAEA3L,UAAQC,GAAR,CAAYwH,MAAZ;AACA,SAAOA,MAAP;AAEH,CAjBD,E,CAkBA;;AACAnH,OAAOqS,OAAP,CAAe,IAAf,EAAqB,YAAW;AAC9B,SAAOrS,OAAOyH,KAAP,CAAatH,IAAb,CAAkB,KAAK0C,MAAvB,EAA+B;AACpCiQ,YAAQ;AACNrH,aAAO,CADD;AAEN9D,6BAAuB,CAFjB;AAGN,kDAA4C;AAHtC;AAD4B,GAA/B,CAAP;AAOD,CARD,E;;;;;;;;;;;AC3NAoL,SAASC,YAAT,CAAsB,UAASnO,OAAT,EAAkBX,IAAlB,EAAwB;AAC5C,MAAIW,QAAQN,OAAZ,EACEL,KAAKK,OAAL,GAAeM,QAAQN,OAAvB,CAF0C,CAI5C;;AACA,MAAIvE,OAAOyH,KAAP,CAAatH,IAAb,GAAoBC,KAApB,OAAgC,CAApC,EACE8D,KAAKuH,KAAL,GAAa,IAAb;AAEF,SAAOvH,IAAP;AACD,CATD;AAWA6O,SAASE,OAAT,CAAiB,YAAW;AAC1BvT,UAAQC,GAAR,CAAY,UAAZ;;AACA,MAAIK,OAAO6C,MAAX,EACA;AACE,WAAO,IAAP;AAED;AAEF,CARD;AAWAkQ,SAASG,QAAT,CAAkB,YAAU;AAC1B,MAAI,CAAClT,OAAO6C,MAAZ,EACA;AACE,SAAK2L,MAAL,CAAY2E,EAAZ,CAAe,GAAf;AACD;AAEF,CAND,E","file":"/app.js","sourcesContent":[" \nconsole.log(\"Creating Db Collections\");\nReferenceData = new Mongo.Collection('ReferenceData');\n//Products = new Mongo.Collection('Products');\nSellers = new Mongo.Collection('Sellers');\n //const featuredProducts = new Mongo.Collection('featuredProducts');\n \n\n// this.autorun(function() {\n     \n//       meteor.subscribe('featuerd')\n     \n//   });","Meteor.startup(() => { \n    if (Meteor.isServer) {\n\n     \n        \n\n    console.log(\"Server Fixture Startup\");  \n      // if the Links collection is empty\n      /*\n      console.log(Links.find().count());\n      if (Links.find().count() === 0) {\n        const data = [\n          {\n            title: 'Do the Tutorial',\n            url: 'https://www.meteor.com/try',\n            createdAt: new Date(),\n          },\n          {\n            title: 'Follow the Guide',\n            url: 'http://guide.meteor.com',\n            createdAt: new Date(),\n          },\n          {\n            title: 'Read the Docs',\n            url: 'https://docs.meteor.com',\n            createdAt: new Date(),\n          },\n          {\n            title: 'Discussions',\n            url: 'https://forums.meteor.com',\n            createdAt: new Date(),\n          },\n        ];\n    \n        data.forEach(link => Links.insert(link));\n      }*/\n    \n      console.log(\"Reference Data Check : \" + ReferenceData.find().count() ) ;\n      \n      if (ReferenceData.find().count() === 0 )\n        {\n          console.log(\"Adding Reference Data\");\n          const refDatas = [\n\n          \n            {name:\"busCat\",id:\"0\",value:\"Electronic\"},\n            {name:\"busCat\",id:\"1\",value:\"Fashion\"},\n            {name:\"busCat\",id:\"2\",value:\"Convience\"},\n            {name:\"busCat\",id:\"3\",value:\"Food\"},     \n            {name:\"busCat\",id:\"4\",value:\"Once Off\"},\n            {name:\"addTime\",id:\"1\",value:\"Free\",timetoadd:1},\n            {name:\"addTime\",id:\"2\",value:\"3 Days\",timetoadd:3},\n            {name:\"addTime\",id:\"3\",value:\"1 Week\",timetoadd:7},\n            {name:\"addTime\",id:\"4\",value:\"2 Weeks\",timetoadd:14},\n            {name:\"addTime\",id:\"5\",value:\"1 Month\",timetoadd:30},\n            {name:\"prdCat\",id:\"0\",value:\"Deals\"},\n            {name:\"prdCat\",id:\"1\",value:\"Home\"},\n            {name:\"prdCat\",id:\"2\",value:\"Food\"},\n            {name:\"prdCat\",id:\"3\",value:\"Security\"},\n            {name:\"prdCat\",id:\"4\",value:\"Education\"},\n            {name:\"prdCat\",id:\"5\",value:\"Cosmetic\"},\n            {name:\"prdCat\",id:\"6\",value:\"Kitchen\"},\n            {name:\"prdCat\",id:\"7\",value:\"Services\"},\n            {name:\"prdCat\",id:\"8\",value:\"Tools\"},\n            {name:\"prdCat\",id:\"9\",value:\"Fashion\"},\n            {name:\"prdCat\",id:\"10\",value:\"Motor Sales\"},\n            {name:\"prdCat\",id:\"11\",value:\"Computer\"},\n            {name:\"prdCat\",id:\"12\",value:\"Health\"},\n            {name:\"prdCat\",id:\"13\",value:\"Pop Ups\"},\n            {name:\"prdCat\",id:\"13\",value:\"Community Events\"},\n            {name:\"prdCat\",id:\"14\",value:\"Other\"}\n                ];\n      \n                refDatas.forEach(refData => ReferenceData.insert(refData));\n                console.log(\"Reference Data Post Insert Check : \" + ReferenceData.find().count() ) ;\n          }\n    \n        console.log(\"Product Data Check : \" + Products.find().count() ) ;\n      \n        \n          \n           \n           \n        if (Products.find().count() === 0)\n        { \n            prodData = [         \n            {\n            sellerId:\"1\",\n            producttitle:\"some item\",\n            productDescription:\"Some Product description\",\n            price:\"100.00\",\n            prdCat:0,    \n            prodImg : [\"1\"],\n            createdAt:new Date(),\n            expireAt : Date.now() + (150000 * 60) \n            },\n        \n            {\n            sellerId:\"1\",\n            producttitle:\"some item\",    \n            productDescription:\"Some Other description\",\n            price:\"100.00\",\n            prdCat:0,\n            prodImg : [\"2\"],\n            createdAt:new Date(),\n            expireAt : Date.now() + (150000 * 60) \n            },\n        \n            {\n            sellerId:\"1\",\n            producttitle:\"some item\",\n            productDescription:\"Some New description\",\n            price:\"100.00\",\n            prdCat:0,\n            prodImg : [ \"3\"],\n            createdAt:new Date(),\n            expireAt : Date.now() + (150000 * 60) \n            }];\n            prodData.forEach(prod => Products.insert(prod));\n            console.log(\"Products Data Post Insert Check : \" + Products.find().count() ) ;\n\n        }\n       \n        console.log(\"Selleres Data Check : \" + Sellers.find().count() ) ;   \n    \n        if (Sellers.find().count() === 0)\n        {\n            Sellers.insert({_id:\"1\",\n              busCat:\"Electronic\",\n            businessname:\"Test Business\",         \n            businessag:\"tag line\",\n            add1:\"Address 1\",\n            add2:\"Address 2\",\n            add3:\"Address 3\",\n            add4:\"Address 4\",\n            office:\"0118574563\",\n            cell:\"0118574563\",\n            email:\"0118574563\",\n            contact1:\"bob\",\n            contact2:\"rick\", \n            url:\"www.somesite.com\",\n            logoImg:\"http://cooldigital.photography/wp-content/uploads/2014/02/Details-of-a-Marigold-Blossom-620x404.jpg\",\n            createdAt: new Date()\n        });\n        console.log(\"Sellers Data Post Insert Check : \" + Sellers.find().count() ) ;\n        }\n\n\n        if (Images.find().count === 0)\n        {\n          Images.insert({\n            \n            \"original\" : {\n                \"name\" : \"249442-3600x2395.jpg\",\n                \"updatedAt\" : ISODate(\"2014-07-18T11:51:58.000Z\"),\n                \"size\" : 1874582,\n                \"type\" : \"image/jpeg\"\n            },\n            \"sellerId\" : \"1\",\n            \"ImageCat\" : \"ProductImage\",\n            \"ImageType\" : \"ProductDisplay\",\n            \"ImageId\" : \"1\",\n            \"uploadedAt\" : ISODate(\"2017-12-25T15:17:25.937Z\"),\n            \"copies\" : {\n                \"images\" : {\n                    \"name\" : \"249442-3600x2395.jpg\",\n                    \"type\" : \"image/jpeg\",\n                    \"size\" : 1874582,\n                    \"key\" : \"images-aaEvqjn48EqWDTu5c-249442-3600x2395.jpg\",\n                    \"updatedAt\" : ISODate(\"2017-12-25T15:17:25.968Z\"),\n                    \"createdAt\" : ISODate(\"2017-12-25T15:17:25.968Z\")\n                }\n            }\n        });\n        Images.insert({\n          \n          \"original\" : {\n              \"name\" : \"249442-3600x2395.jpg\",\n              \"updatedAt\" : ISODate(\"2014-07-18T11:51:58.000Z\"),\n              \"size\" : 1874582,\n              \"type\" : \"image/jpeg\"\n          },\n          \"sellerId\" : \"1\",\n          \"ImageCat\" : \"ProductImage\",\n          \"ImageType\" : \"ProductDisplay\",\n          \"ImageId\" : \"2\",\n          \"uploadedAt\" : ISODate(\"2017-12-25T15:17:25.937Z\"),\n          \"copies\" : {\n              \"images\" : {\n                  \"name\" : \"249442-3600x2395.jpg\",\n                  \"type\" : \"image/jpeg\",\n                  \"size\" : 1874582,\n                  \"key\" : \"images-aaEvqjn48EqWDTu5c-249442-3600x2395.jpg\",\n                  \"updatedAt\" : ISODate(\"2017-12-25T15:17:25.968Z\"),\n                  \"createdAt\" : ISODate(\"2017-12-25T15:17:25.968Z\")\n              }\n          }\n      });\n      Images.insert({\n       \n        \"original\" : {\n            \"name\" : \"249442-3600x2395.jpg\",\n            \"updatedAt\" : ISODate(\"2014-07-18T11:51:58.000Z\"),\n            \"size\" : 1874582,\n            \"type\" : \"image/jpeg\"\n        },\n        \"sellerId\" : \"1\",\n        \"ImageCat\" : \"ProductImage\",\n        \"ImageType\" : \"ProductDisplay\",\n        \"ImageId\" : \"3\",\n        \"uploadedAt\" : ISODate(\"2017-12-25T15:17:25.937Z\"),\n        \"copies\" : {\n            \"images\" : {\n                \"name\" : \"249442-3600x2395.jpg\",\n                \"type\" : \"image/jpeg\",\n                \"size\" : 1874582,\n                \"key\" : \"images-aaEvqjn48EqWDTu5c-249442-3600x2395.jpg\",\n                \"updatedAt\" : ISODate(\"2017-12-25T15:17:25.968Z\"),\n                \"createdAt\" : ISODate(\"2017-12-25T15:17:25.968Z\")\n            }\n        }\n    });\n        }\n      console.log(\"Fixtures Done\");\n     \n      \n    }\n})","Activities = new Mongo.Collection('activities');\n\nActivities.allow({\n  insert: function(userId, doc) {\n    return doc.userId === userId;\n  }\n});\n\nActivities.latest = function() {\n  return Activities.find({}, {sort: {date: -1}, limit: 1});\n}\n\nMeteor.methods({\n  createActivity: function(activity, tweet, loc) {\n    check(Meteor.userId(), String);\n    check(activity, {\n      recipeName: String,\n      text: String,\n      image: String\n    });\n    check(tweet, Boolean);\n    check(loc, Match.OneOf(Object, null));\n    \n    activity.userId = Meteor.userId();\n    activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n    activity.userName = Meteor.user().profile.name;\n    activity.date = new Date;\n    \n    if (! this.isSimulation && loc)\n      activity.place = getLocationPlace(loc);\n    \n    var id = Activities.insert(activity);\n    \n    if (! this.isSimulation && tweet)\n      tweetActivity(activity);\n    \n    return id;\n  }\n});\n\nif (Meteor.isServer) {\n  var twitterOauth = function(options) {\n    var config = Meteor.settings.twitter\n    var userConfig = Meteor.user().services.twitter;\n\n    return {\n      consumer_key: config.consumerKey,\n      consumer_secret: config.secret,\n      token: userConfig.accessToken,\n      token_secret: userConfig.accessTokenSecret\n    };\n  }\n  \n  var tweetActivity = function(activity) {\n    // creates the tweet text, optionally truncating to fit the appended text\n    function appendTweet(text, append) {\n      var MAX = 117; // Max size of tweet with image attached\n      \n      if ((text + append).length > MAX)\n        return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n      else\n        return text + append;\n    }\n    \n    // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n    var image = activity.image.replace(/^data.*base64,/, '');\n\n    var response = HTTP.post(\n      'https://upload.twitter.com/1.1/media/upload.json', {\n        params: { media: image },\n        npmRequestOptions: { oauth: twitterOauth() }\n      }\n    );\n    \n    if (response.statusCode !== 200)\n      throw new Meteor.Error(500, 'Unable to post image to twitter');\n\n    if (! response.data)\n      throw new Meteor.Error(500, 'Did not receive attachment from twitter');\n\n    var attachment = response.data;\n\n    response = HTTP.post(\n      'https://api.twitter.com/1.1/statuses/update.json', {\n        params: {\n          status: appendTweet(activity.text, ' #localmarket'),\n          media_ids: attachment.media_id_string\n        },\n        npmRequestOptions: { oauth: twitterOauth() }\n      }\n    );\n\n    if (response.statusCode !== 200)\n      throw new Meteor.Error(500, 'Unable to create tweet');\n  }\n  \n  var getLocationPlace = function(loc) {\n    var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n      + '?granularity=neighborhood'\n      + '&max_results=1'\n      + '&accuracy=' + loc.coords.accuracy\n      + '&lat=' + loc.coords.latitude\n      + '&long=' + loc.coords.longitude;\n    \n    var response = HTTP.get(url,\n                            {npmRequestOptions: { oauth: twitterOauth() } });\n\n    if (response.statusCode === 200 && response.data) {\n      var place = _.find(response.data.result.places, function(place) {\n        return place.place_type === 'neighborhood';\n      });\n      \n      return place && place.full_name;\n    }\n  }\n}\n\n// Initialize a seed activity\nMeteor.startup(function() {\n  if (Meteor.isServer && Activities.find().count() === 0) {\n    Activities.insert({\n      recipeName: 'summer-apricots-honey-panna-cotta',\n      text: 'I substituted strawberries for apricots - incredible!',\n      image: '/img/activity/activity-placeholder-strawberry-640x640.jpg',\n      userAvatar: 'https://avatars3.githubusercontent.com/u/204768?v=2&s=400',\n      userName: 'Matt Debergalis',\n      place: 'SoMA, San Francisco',\n      date: new Date\n    });\n  }\n});\n\n","BookmarkCounts = new Mongo.Collection('bookmarkCounts');\n\nMeteor.methods({\n  'bookmarkRecipe': function(recipeName) {\n    check(this.userId, String);\n    check(recipeName, String);\n\n    var affected = Meteor.users.update({\n      _id: this.userId,\n      bookmarkedRecipeNames: {$ne: recipeName}\n    }, {\n      $addToSet: {bookmarkedRecipeNames: recipeName}\n    });\n\n    if (affected)\n      BookmarkCounts.update({recipeName: recipeName}, {$inc: {count: 1}});\n  },\n\n  'unbookmarkRecipe': function(recipeName) {\n    check(this.userId, String);\n    check(recipeName, String);\n\n    var affected = Meteor.users.update({\n      _id: this.userId,\n      bookmarkedRecipeNames: recipeName\n    }, {\n      $pull: {bookmarkedRecipeNames: recipeName}\n    });\n\n    if (affected)\n      BookmarkCounts.update({recipeName: recipeName}, {$inc: {count: -1}});\n  }\n});\n\n// Initialize bookmark counts. We could use upsert instead.\nif (Meteor.isServer && BookmarkCounts.find().count() === 0) {\n  Meteor.startup(function() {\n    _.each(RecipesData, function(recipe, recipeName) {\n      BookmarkCounts.insert({recipeName: recipeName, count: 0});\n    });\n  });\n}","//import { Buffer } from \"buffer\";\n\n\n \n\n\n// Handlebars.registerHelper('saveImageFile',function(fbinaryData,filename)\n// {\n//   //import {FilesCollection} from 'meteor/ostrio:files';\n//   //var fs = require('meteor/ostrio:files');\n//   var result = false;\n//   var  base64Image = fbinaryData.split(\",\")[1];\n//   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n//   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n//   //productImage = filename;\n//   var  imagePath = Meteor.settings.products.imgPath;\n//   console.log(imagePath);\n//   try\n//   {\n//   require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n//         if (err)\n//         {\n//             console.log(err); // writes out file without error, but it's not a valid image\n//         }\n//         else\n//         {\n//           result = true;\n//         }\n//       });\n//     }\n//     catch(exp)\n//     {\n//       console.log(\"Client side File Save to server...\" + imagePath + filename);\n//       result = false;\n//     }\n//     return result;\n  \n// });\n\nHandlebars.registerHelper('UILogger',function(source,obj)\n{\n  console.log(\"UI Logger : \" + source);\n  console.log(\"Object : \"+ obj);\n});\n\nfunction newRandomId(prefixStr)\n{\n  var rnd = prefixStr + \"_\" + require(\"meteor/random\").id();\n  return rnd;\n}\n\n// Handlebars.registerHelper(\"getReferenceData\",function(refname){\n//   console.log(\"reference data load to cache\");\n//   var result = Meteor.apply('getReferenceData',[refname],{ wait:true,returnStubValue: false });\n// });\n\nfunction jsWriteFile(fbinaryData,filename)\n{\n  var  result = false;\n  try \n  {\n    //import {FilesCollection} from 'meteor/ostrio:files';\n   //var fs = require('meteor/ostrio:files');\n   // global.Buffer = global.Buffer || Npm.require(\"buffer\").Buffer;\n   var result = true;\n   var fs = Npm.require('fs');\n   var  base64Image = fbinaryData.split(\",\")[1];\n   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n   //productImage = filename;\n  console.log(\"Writing file\");\n     var pathtoFile =  Meteor.rootPath;\n    var strPath = pathtoFile.substr(0,pathtoFile.length - 7);\n\n    \n     \n\n    \n   var  imagePath = strPath + Meteor.settings.products.fileSavePath;\n   imagePath = Meteor.settings.products.fileSavePath;\n   var writeFileName = imagePath + filename;\n  \n   console.log(writeFileName);\n   try\n   {\n   // var fileWriter = new writeFile()\n   //require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n         if (!fs.exists(writeFileName))\n         {   \n         fs.writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n\n             if (err)\n             {\n                 console.log(err); // writes out file without error, but it's not a valid image\n                 result = false;\n             }\n             else\n             {\n               result = true;\n             }\n           });\n         }\n     }\n     catch(exp)\n     {\n       console.log(\"Server side File Save to server...\" + imagePath + filename);\n       console.log(exp);\n       result = false;\n     }\n  } \n  catch (error) \n  {\n    result = false;\n  }\n  return result;\n}\n\n\nMeteor.methods({ \n  saveImageFile: function(fbinaryData,filename)\n  {\n    try {\n      return jsWriteFile(fbinaryData,filename);\n    } catch (error) {\n      throw error;\n    }\n\n  //  //import {FilesCollection} from 'meteor/ostrio:files';\n  //  //var fs = require('meteor/ostrio:files');\n  //  // global.Buffer = global.Buffer || Npm.require(\"buffer\").Buffer;\n  //   var result = true;\n  //   var fs = Npm.require('fs');\n  //   var  base64Image = fbinaryData.split(\",\")[1];\n  //   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n  //   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n  //   //productImage = filename;\n  //   var  imagePath = Meteor.settings.products.fileSavePath;\n  //   var writeFileName = imagePath + filename;\n   \n  //   console.log(writeFileName);\n  //   try\n  //   {\n  //   // var fileWriter = new writeFile()\n  //   //require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n  //         if (!fs.exists(writeFileName))\n  //         {   \n  //         fs.writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n\n  //             if (err)\n  //             {\n  //                 console.log(err); // writes out file without error, but it's not a valid image\n  //                 result = false;\n  //             }\n  //             else\n  //             {\n  //               result = true;\n  //             }\n  //           });\n  //         }\n  //     }\n  //     catch(exp)\n  //     {\n  //       console.log(\"Server side File Save to server...\" + imagePath + filename);\n  //       console.log(exp);\n  //       result = false;\n  //     }\n  //     return result;\n    \n  },\n  getReferenceData:function(refName)\n  {\n\n    switch(refName) \n      {\n        case \"businessCat\":\n            return ReferenceData.find({name:busCat});\n            break;\n        case \"productCat\":\n        return ReferenceData.find({name:prdCat});\n            break;\n        case \"timeCat\":\n        return ReferenceData.find({name:addTime});\n        break;\n        default:\n            return {};\n      }\n   \n    \n  }\n});\n// function _saveImageFile()\n// {\n//   var result = false;\n//   var  base64Image = fbinaryData.split(\",\")[1];\n//   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n//   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n//   //productImage = filename;\n//   var  imagePath = Meteor.settings.product.filePath;\n//   try\n//   {\n//   require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n//         if (err)\n//         {\n//             console.log(err); // writes out file without error, but it's not a valid image\n//         }\n//         else\n//         {\n//           result = true;\n//         }\n//       });\n//     }\n//     catch(exp)\n//     {\n//       console.log(\"Client side File Save to server...\" + filename);\n//       result = false;\n//     }\n//     return result;\n// }","console.log(\"Server create FS Media Collection\");\n\n//var imageStore = new FS.Store.GridFS(\"images\", {\n//mongoUrl: 'mongodb://127.0.0.1:3001/justadit/', // optional, defaults to Meteor's local MongoDB\n//mongoOptions: {...},  // optional, see note below\n//transformWrite: myTransformWriteFunction, //optional\n//transformRead: myTransformReadFunction, //optional\n//maxTries: 1, // optional, default 5\n//chunkSize: 1024*1024  // optional, default GridFS chunk size in bytes (can be overridden per file).\n// Default: 2MB. Reasonable range: 512KB - 4MB\n//  });\nvar imageStore = new FS.Store.FileSystem(\"images\", {\n    path: \"/var/www/justaditimages/\", //optional, default is \"/cfs/files\" path within app container\n    //transformWrite: function(fileObj, readStream, writeStream) {\n        //console.log(\"Resize Image\");\n        //console.log(fileObj.name() + \" : \"  + fileObj.size());\n        // if (fileObj.size() > 500)\n        // {\n        //     if (gm.isAvailable)\n        //     {\n        //         gm(readStream, fileObj.name()).resize('500').stream().pipe(writeStream);\n        //     }\n        //     else\n        //     {\n        //         console.log(\"No GraphicsMagick Installed.\")\n        //     }\n        // }\n    //},\n    chunkSize: 2*1024*1024 - 1024,  // optional, default GridFS chunk size in bytes (can be overridden per file).\n    //Default: 2MB,//. Reasonable range: 512KB - 4MB\n    //transformWrite: myTransformWriteFunction, //optional\n    //transformRead: myTransformReadFunction, //optional\n    maxTries: 2 //optional, default 5\n});\n//   var videoStore = new FS.Store.GridFS(\"videos\", {\n//     //mongoUrl: 'mongodb://127.0.0.1:3001/justaditmedia/', // optional, defaults to Meteor's local MongoDB\n//     //mongoOptions: {...},  // optional, see note below\n//     //transformWrite: myTransformWriteFunction, //optional\n//     //transformRead: myTransformReadFunction, //optional\n//     //maxTries: 1, // optional, default 5\n//     //chunkSize: 1024*1024  // optional, default GridFS chunk size in bytes (can be overridden per file).\n//                           // Default: 2MB. Reasonable range: 512KB - 4MB\n//   });\n\nImages = new FS.Collection(\"images\", {\n    stores: [imageStore]\n});\n\n\n// Videos = new FS.Collection(\"videos\", {\n//   stores: [videoStore]\n// // });\n\n\nImages.allow({\n    insert: function () {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    },\n    download: function () {\n        return true;\n    }\n});\n\n// Videos.allow({ \n//     insert: function() { \n//         return true; \n//     }, \n//     update: function() { \n//         return true; \n//     }, \n//     remove: function() { \n//         return true; \n//     } \n// });\n\n\nMeteor.methods({\n    getProductImages: function (ImgId) {\n \n        // var result = Products.find({_id:prodid});\n        var prodImages = Images.find({ ImageId: ImgId });\n        var returnImages = [];\n        prodImages.forEach(element => {\n            returnImages.push(element);\n\n        });\n        //var sell = Meteor.apply('getProductSeller', [prod.sellerId], { returnStubValue: true });\n        //prod.seller = sell;\n        return returnImages;\n\n        //return Meteor.Mongo.Products.findOne({_id:prodid});\n    },\n});","News = new Mongo.Collection('news');\n\nNews.allow({\n  insert: function(userId) {\n    var user = Meteor.users.findOne(userId);\n    return user && user.admin;\n  }\n});\n\nNews.latest = function() {\n\n  //http://feeds.news24.com/articles/news24/SouthAfrica/rss\n  return News.findOne({}, {sort: {date: -1}, limit: 1});\n}\n\nif (Meteor.isServer && News.find().count() === 0) {\n  Meteor.startup(function() {\n    News.insert({\n      text: 'First of the season citrus has just arrived. Get succulent oranges and tangerines in our produce aisle!',\n      date: new Date\n    });\n  });\n}","Product = new Mongo.Collection('Product');\n\nProduct.allow({\n    insert: function(userId, doc) {\n      return doc.userId === userId;\n    }\n  });\n  \n \n  Meteor.methods({\n    'latestProduct':function(id){\n     \n      return Product.find({},{order:{createdAt:-1}});\n      //return result[0];\n    },\n    'QSearchProduct':function(id){\n      console.log(\"Searching\");\n      Meteor.subscribe('QSearch', id);\n      var results =  Products.find({});\n      console.log(results); \n      return results;\n      \n    },\n    'products.insert':function (productObj)\n    {\n        //var fs = Npm.require('fs');\n        var newProd = false;\n        if (productObj._id == \"\")\n        {\n            newProd = true;\n        }\n        var ProdImgs = [];\n      try \n      {\n        // console.log(productObj.prodImg);\n        // for (pImg in productObj.prodImg)\n        // {\n        //   if (newProd)\n        //   {\n        //     var randId = Random.id();// require('random');     \n        //     var FileName = productObj.userId + \"_\" + randId  + \".jpg\";            \n        //     ProdImgs.push(FileName);                \n        //     var busLogCall = Meteor.apply('saveImageFile',[pImg,FileName],{wait:true});                   \n        //   }\n        //   else\n        //   {\n        //     if (!fs.exists(pImg))\n        //     {\n        //       var randId = Random.id();// require('random');     \n        //       var FileName = productObj.userId + \"_\" + randId  + \".jpg\";            \n        //       ProdImgs.push(FileName);                \n        //       var busLogCall = Meteor.apply('saveImageFile',[pImg,FileName],{wait:true}); \n        //     }\n\n        //   }\n        // }\n        //   productObj.prodImg = ProdImgs;\n          var productResult = \n          Products.upsert({\n          // Selector\n          _id: productObj._id \n          }, {\n          // Modifier\n          $set: {\n            sellerId : productObj.sellerId,\n            producttitle : productObj.producttitle,\n            productDescription : productObj.productDescription,\n            price : productObj.price,\n            prdCat : productObj.prdCat,\n            prodImg : productObj.prodImg,\n            createdAt : productObj.createdAt,\n            expireAt : productObj.expireAt\n            \n           \n          \n          }\n          });\n\n      }\n      catch (exp)\n      {\n        throw exp;\n      }\n    }\n  });\n\n/*\n\n\nMeteor.methods(\n    \n    {\n  'products.insert'(sellerId,producttitle, productDescription , price,prodCat,createdAt,expireAt, url,prodImg) {\n\n    var ProdInsert = Products.insert({\n      sellerId, \n      producttitle,\n      productDescription , \n      price,\n      prodCat,\n      createdAt,\n      expireAt,\n      url,\n      prodImg\n      \n  });\n  return ProdInsert;\n\n  \n}\n\n\n\n\n  Product.getProduct = function(prodId)\n  {\n    var returnProduct ;\n    console.log(\"Single product Meteor Call method\");\n    try\n    {\n        Meteor.call('getProduct',[ prodId],(error,result)=>{\n            if (error)\n            {\n                console.log(error);\n            }\n            else\n            {\n                console.log(\"Meteor Call to get product : \" + result);\n          \n                returnProduct = result;\n            }\n        });\n      \n      console.log(\"Post Meteor Call after assign \" + returnProduct);\n    }\n    catch(exp)\n    {\n      throw exp;\n    }\n    return returnProduct;\n  }\n\n   */\n\n  Product.MyProducts= function(sellerId){\n      return Product.find({SellerID:sellerId});\n  }\n\n  Product.more = function(continuationValue){\n      //https://www.npmjs.com/package/mongo-cursor-pagination\n      //Product.find({},{order:{createdAt:-1}});\n      return Product.find({}, {order: {createdAt: -1}});\n    \n  } \n\n   \n  /*\n  Meteor.methods({\n    createActivity: function(activity, tweet, loc) {\n      Meteor.userId(), String,\n      activity, {\n        recipeName: String,\n        text: String,\n        image: String\n      },\n      tweet, Boolean,\n      loc, Match.OneOf(Object, null),\n      \n      activity.userId = Meteor.userId(,\n      activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n      activity.userName = Meteor.user().profile.name;\n      activity.date = new Date;\n      \n      if (! this.isSimulation && loc)\n        activity.place = getLocationPlace(loc,\n      \n      var id = Activities.insert(activity,\n      \n      if (! this.isSimulation && tweet)\n        tweetActivity(activity,\n      \n      return id;\n    }\n  },\n  \n  if (Meteor.isServer) {\n    var twitterOauth = function(options) {\n      var config = Meteor.settings.twitter\n      var userConfig = Meteor.user().services.twitter;\n  \n      return {\n        consumer_key: config.consumerKey,\n        consumer_secret: config.secret,\n        token: userConfig.accessToken,\n        token_secret: userConfig.accessTokenSecret\n      };\n    }\n    \n    var tweetActivity = function(activity) {\n      // creates the tweet text, optionally truncating to fit the appended text\n      function appendTweet(text, append) {\n        var MAX = 117; // Max size of tweet with image attached\n        \n        if ((text + append).length > MAX)\n          return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n        else\n          return text + append;\n      }\n      \n      // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n      var image = activity.image.replace(/^data.*base64,/, '',\n  \n      var response = HTTP.post(\n        'https://upload.twitter.com/1.1/media/upload.json', {\n          params: { media: image },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n      \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to post image to twitter',\n  \n      if (! response.data)\n        throw new Meteor.Error(500, 'Did not receive attachment from twitter',\n  \n      var attachment = response.data;\n  \n      response = HTTP.post(\n        'https://api.twitter.com/1.1/statuses/update.json', {\n          params: {\n            status: appendTweet(activity.text, ' #localmarket'),\n            media_ids: attachment.media_id_string\n          },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n  \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to create tweet',\n    }\n    \n    var getLocationPlace = function(loc) {\n      var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n        + '?granularity=neighborhood'\n        + '&max_results=1'\n        + '&accuracy=' + loc.coords.accuracy\n        + '&lat=' + loc.coords.latitude\n        + '&long=' + loc.coords.longitude;\n      \n      var response = HTTP.get(url,\n                              {npmRequestOptions: { oauth: twitterOauth() } },\n  \n      if (response.statusCode === 200 && response.data) {\n        var place = _.find(response.data.result.places, function(place) {\n          return place.place_type === 'neighborhood';\n        },\n        \n        return place && place.full_name;\n      }\n    }\n  }\n   \n  */","Products = new Mongo.Collection('Products');\n\n\n\nProducts.allow({\n  insert: function (userId, doc) {\n    return doc.userId === userId;\n  },\n  update:function(userId,doc)\n  {\n    return false;\n  }\n});\n\n\nMeteor.methods({\n  'featuredProducts': function () {\n    \n    console.log(\"Getting Latest featured products data \" + Meteor.settings.featuredProductsLimit);\n \n \n    var prodresult = [];\n    try\n    {\n    \n    var prod = Products.find({},{order:{createdAt: -1}},{limit: Meteor.settings.featuredProductsLimit});\n   \n    prod.forEach(element => {\n \n      prodresult.push(element);\n    });\n  }\n  catch(exp)\n  {\n    console.log(\"Error getting featured Products : \" + exp);\n    throw exp;\n  }\n      \n \n    return {Results:prodresult};\n  },\n  'getProduct': function (prodid) {\n    // var result = Products.find({_id:prodid});\n    try\n    {\n     \n      //Meteor.subscribe('product',prodid);\n      //Meteor.subscribe('getSellers');\n     \n    var prod = Products.findOne({ _id: prodid });\n    if (prod)\n    {\n      var sell = Sellers.findOne({userId:prod.sellerId});\n      var prodImages = Meteor.apply('getProductImages', [prod.prodImg], { returnStubValue: true });\n      prod.seller = sell;\n      prod.prodImgs = prodImages;\n    }\n    //loading.stop();\n    return prod;\n    }\n    catch (exp)\n    {\n      //loading.halt();\n      console.log(exp);\n    }\n\n    //return Meteor.Mongo.Products.findOne({_id:prodid});\n  },\n  \n  'getProductSeller': function (sellerId) {\n    Meteor.subscribe('getSeller',sellerId);\n    return Sellers.findOne({ userId: Meteor.userId() });\n  },\n  'QSearchProducts' : function (searchItem)\n  {\n    //debugger;\n    var searchTerms = \"'/^.*\" + searchItem[0] + \".*$/i'\";\n    console.log(searchTerms);\n    //$text: {$search: searchValue} },\n    var prods = Products.find({$or:[{\"producttitle\":{$regex:searchTerms}} , {\"productDescrption\":{$regex:searchTerms}}]});\n    var result = [];\n    prods.forEach(element => {\n      result.push(element);\n    });\n    //var result = Products.find({$text: {$search: searchTerms}}).fetch();\n    //({$text:{$search:\"tutorialspoint\"}})\n    \n    console.log(result);\n    return result;\n  },\n  'getSellerProducts': function () {\n    console.log(\"Getting Seller Server Side Products\");\n\n    var prodresult = [];\n\n    //Product.find({},{order:{createdAt:-1}});\n    var prod = Products.find({sellerId:Meteor.userId()},{order:{createdAt: -1}});\n    prod.forEach(element => {\n      //console.log(element);\n      prodresult.push(element);\n    });\n\n    return prodresult;\n  }\n\n});\n\nProducts.allProducts = function () {\n  console.log(\"Getting latest products\" + Products.count());\n  Meteor.subscribe('allProducts');\n  return Products.find({},{order:{createdAt: -1}});\n  // return Products.find({});\n}\nProducts.getProduct = function (prodId) {\n  var result;\n  console.log(\"Single product api method\");\n  try {\n    result = Products.findOne({ _id: prodId }, { limit: 1 });\n    //console.log(result.producttitle);\n  }\n  catch (exp) {\n    throw exp;\n  }\n  return result;\n}\n\nProducts.bookedMarked = function () {\n  // here get all my userid Booked marked products and then get each prod and push to array and return the array.\n}\n\nProducts.latestProducts = function () {\n  var result;\n  console.log(\"Api method\");\n  try {\n    //Product.find({},{order:{createdAt:-1}});\n    result = Products.find({},{order:{createdAt: -1}});\n\n  }\n  catch (exp) {\n    throw exp;\n  }\n\n\n  return result;//Products.find({}, {sort: {createdAt: -1}, limit: 1});\n\n\n}\n\nProducts.MyProducts = function (SellerId) {\n  //Product.find({},{order:{createdAt:-1}});\n  return Products.find({ sellerId: SellerId },{order:{createdAt: -1}});;\n}\n\n// Products.featuredProducts = function () {\n\n \n//   var result = [];\n//   console.log(\"Api method featuredProducts \");\n//   //Meteor.settings.featuredProductsLimit \n//   try {\n//     //result = Products.find({},{sort: {createdAt:1}, limit: 4});\n//     //console.log(result);\n\n//   }\n//   catch (exp) {\n//     throw exp;\n//   }\n\n\n//   return result;//Products.find({}, {sort: {createdAt: -1}, limit: 1});\n\n\n//   // var ctr = Meteor.settings.featuredProductsLimit;\n//   // console.log(\"Api Method featured : \" +  ctr);\n//   // var result = Products.find({},{sort:{createdAt:1},limit: 2});//Meteor.settings.featuredProductsLimit}); \n//   // return result;// Products.find({},{sort:{createdAt:1},limit: 2});//Meteor.settings.featuredProductsLimit});\n// }\n\nProducts.more = function (continuationValue) {\n  //https://www.npmjs.com/package/mongo-cursor-pagination\n  return Products.find().sort({createdAt:-1}).limit(12).skip(continuationValue);\n\n}\n\nMeteor.methods({\n  createProduct: function (product, loc) {\n    check(product, {\n      sellerId: String,\n      producttitle: String,\n      productDescription: String,\n      price: Number,\n      prodCat: String,\n      url: String\n    },\n      loc, Match.OneOf(Object, null));\n\n    product.sellerId = Meteor.userId;\n    product.createDate = new Date;\n    product.expireDate = require(\"moment\");\n    var ProdInsert = Products.insert({\n      sellerId,\n      producttitle,\n      productDescription,\n      price,\n      prodCat,\n      createdAt,\n      expireAt,\n      url,\n      prodImg\n\n    });\n    return ProdInsert;\n\n  },\n\n});\n  /*\n  Meteor.methods({\n    createActivity: function(activity, tweet, loc) {\n      Meteor.userId(), String,\n      activity, {\n        recipeName: String,\n        text: String,\n        image: String\n      },\n      tweet, Boolean,\n      loc, Match.OneOf(Object, null),\n      \n      activity.userId = Meteor.userId(,\n      activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n      activity.userName = Meteor.user().profile.name;\n      activity.date = new Date;\n      \n      if (! this.isSimulation && loc)\n        activity.place = getLocationPlace(loc,\n      \n      var id = Activities.insert(activity,\n      \n      if (! this.isSimulation && tweet)\n        tweetActivity(activity,\n      \n      return id;\n    }\n  },\n  \n  if (Meteor.isServer) {\n    var twitterOauth = function(options) {\n      var config = Meteor.settings.twitter\n      var userConfig = Meteor.user().services.twitter;\n  \n      return {\n        consumer_key: config.consumerKey,\n        consumer_secret: config.secret,\n        token: userConfig.accessToken,\n        token_secret: userConfig.accessTokenSecret\n      };\n    }\n    \n    var tweetActivity = function(activity) {\n      // creates the tweet text, optionally truncating to fit the appended text\n      function appendTweet(text, append) {\n        var MAX = 117; // Max size of tweet with image attached\n        \n        if ((text + append).length > MAX)\n          return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n        else\n          return text + append;\n      }\n      \n      // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n      var image = activity.image.replace(/^data.*base64,/, '',\n  \n      var response = HTTP.post(\n        'https://upload.twitter.com/1.1/media/upload.json', {\n          params: { media: image },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n      \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to post image to twitter',\n  \n      if (! response.data)\n        throw new Meteor.Error(500, 'Did not receive attachment from twitter',\n  \n      var attachment = response.data;\n  \n      response = HTTP.post(\n        'https://api.twitter.com/1.1/statuses/update.json', {\n          params: {\n            status: appendTweet(activity.text, ' #localmarket'),\n            media_ids: attachment.media_id_string\n          },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n  \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to create tweet',\n    }\n    \n    var getLocationPlace = function(loc) {\n      var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n        + '?granularity=neighborhood'\n        + '&max_results=1'\n        + '&accuracy=' + loc.coords.accuracy\n        + '&lat=' + loc.coords.latitude\n        + '&long=' + loc.coords.longitude;\n      \n      var response = HTTP.get(url,\n                              {npmRequestOptions: { oauth: twitterOauth() } },\n  \n      if (response.statusCode === 200 && response.data) {\n        var place = _.find(response.data.result.places, function(place) {\n          return place.place_type === 'neighborhood';\n        },\n        \n        return place && place.full_name;\n      }\n    }\n  }\n   \n  */","RecipesData = {\n\"spring-fromage-fort\": {\n  \"title\": \"Fromage Fort\",\n  \"highlighted\": true,\n  \"excerpt\": \"When Iâ€™ve got too many cheese bits on hand, it's now fromage fort to the rescue\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2014/04/fromage-forte-cheese-dip-spread-recipe/\"\n  },\n  \"cookTime\": \"15 min\",\n  \"ingredients\": [\n    \"8 ounces (225g) cheese pieces, hard rinds removed\",\n    \"1 to 2 ounces (30 to 60g) cream cheese\",\n    \"1/4 cup (60ml) dry white wine\",\n    \"1 garlic clove, peeled and minced\",\n    \"a few turns of freshly ground black pepper\",\n    \"pinch of cayenne or red pepper powder\",\n    \"1 tablespoon minced chives or flat-leaf parsley\",\n    \"chives or parsley, for garnish\"\n  ],\n  \"directions\": [\n    \"Cut the cheese into bite-sized cubes and put them in the bowl of a food processor with 1 ounce (30g) of the cream cheese, wine, garlic, and the black and red peppers.\",\n    \"Process the mixture until completely smooth. If it is not completely smooth (which may happen if you are starting with an assortment of harder cheeses), add the additional cream cheese, and continue to process.\"\n  ],\n  \"name\": \"spring-fromage-fort\"\n},\n\"spring-ragu-bolognese\": {\n  \"title\": \"Classic Ragu Bolognese\",\n  \"excerpt\": \"A certain magic happens as the beef and aromatic vegetables slowly cook down with wine, tomato paste, and broth\",\n  \"source\": {\n    \"name\": \"Bon AppÃ©tit\",\n    \"url\": \"http://www.bonappetit.com/recipe/classic-rag-bolognese\"\n  },\n  \"cookTime\": \"1 hr 10 min\",\n  \"ingredients\": [\n    \"2 Tbsp. extra-virgin olive oil\",\n    \"2 medium onions, finely chopped (about 1 1/2 cups)\",\n    \"2 celery stalks, finely chopped (about 1 cup)\",\n    \"2 carrots, peeled, finely chopped (about 3/4 cup)\",\n    \"6 oz. ground beef (85% lean)\",\n    \"6 oz. ground veal\",\n    \"3 oz. thinly sliced pancetta, finely chopped\",\n    \"1/2 cup dry red wine\",\n    \"3 cups (about) beef stock or chicken stock, divided\",\n    \"3 Tbsp. tomato paste\",\n    \"Kosher salt and freshly ground black pepper\",\n    \"1 cup whole milk\",\n    \"1 lb. tagliatelle or fettuccine (preferably fresh egg)\",\n    \"Finely grated Parmesan (for serving)\"\n  ],\n  \"directions\": [\n    \"Heat oil in a large heavy pot over medium-high heat.\",\n    \"Add onions, celery, and carrots.\"\n  ],\n  \"name\": \"spring-ragu-bolognese\"\n},\n\"spring-animal-cracker-cookies\": {\n  \"title\": \"Animal-Cracker Cookies\",\n  \"excerpt\": \"Create and decorate magical cookies that are as much fun as a day at the circus!\",\n  \"source\": {\n    \"name\": \"Williams-Sonoma\",\n    \"url\": \"http://www.williams-sonoma.com/recipe/animal-cracker-cookies.html\"\n  },\n  \"cookTime\": \"1 hr\",\n  \"ingredients\": [\n    \"2 1/2 cups all-purpose flour\",\n    \"1 tsp. baking powder\",\n    \"1/2 tsp. salt\",\n    \"1/8 tsp. freshly grated nutmeg\",\n    \"1/8 tsp. mace\",\n    \"12 Tbs. (1 1/2 sticks) unsalted butter, at room temperature\",\n    \"1 cup sugar\",\n    \"1 egg\",\n    \"1 tsp. vanilla extract\"\n  ],\n  \"directions\": [\n    \"Over a small bowl, sift together the flour, baking powder, salt, nutmeg and mace. Set aside.\",\n    \"In the bowl of an electric mixer fitted with the flat beater, beat the butter on high speed for 2 minutes. Reduce the speed to medium, slowly add the sugar and beat for 2 minutes, stopping the mixer occasionally to scrape down the sides of the bowl. Add the egg and vanilla and beat for 1 minute, stopping the mixer once to scrape down the sides of the bowl.\"\n  ],\n  \"name\": \"spring-animal-cracker-cookies\"\n},\n\"spring-chicken-in-mole\": {\n  \"title\": \"Chicken in MolÃ©\",\n  \"excerpt\": \"If there is one dish that could be considered Mexican haute cuisine, then Mole Poblano is surely it\",\n  \"source\": {\n    \"name\": \"Epicurious\",\n    \"url\": \"http://www.epicurious.com/recipes/food/views/Chicken-in-Mole-Puebla-Style-238185\"\n  },\n  \"cookTime\": \"2 hr\",\n  \"ingredients\": [\n    \"4 pounds chicken pieces, skin on\",\n    \"Sea salt and ground black pepper to taste\",\n    \"2 tablespoons sesame seeds, toasted, for garnish\",\n    \"white rice\",\n    \"9 mulato chiles\",\n    \"7 pasilla chiles\",\n    \"6 ancho chiles\",\n    \"1 cup plus 9 tablespoons vegetable oil or lard plus additional as needed\",\n    \"4 or 5 tomatillos, husked and cooked until soft\",\n    \"5 whole cloves\",\n    \"20 whole black peppercorns\",\n    \"1-inch piece of a Mexican cinnamon stick\",\n    \"1 tablespoon seeds from the chiles, toasted\",\n    \"1/2 teaspoon anise seeds, toasted\",\n    \"1/4 teaspoon coriander seeds, toasted\",\n    \"8 tablespoons sesame seeds, toasted\",\n    \"4 garlic cloves, roasted\",\n    \"3 tablespoons raisins\",\n    \"20 whole almonds, blanched\",\n    \"1/4 cup pumpkin seeds\",\n    \"2 corn tortillas, torn into pieces\",\n    \"3 stale French rolls, cut into 1-inch slices\",\n    \"6 to 7 cups reserved chicken broth as needed\",\n    \"1 1/2 ounces Mexican chocolate, chopped\"\n  ],\n  \"directions\": [\n    \"In a large stock pot, parboil the chicken in water seasoned with salt and pepper to taste. Drain, reserving cooking broth, and refrigerate until ready to assemble the dish.\",\n    \"Prepare the Mole Poblano. Clean the chiles by removing stems, veins, and seeds; reserve 1 tablespoon of the seeds.\"\n  ],\n  \"name\": \"spring-chicken-in-mole\"\n},\n\"spring-spanish-asparagus-revuelto\": {\n  \"title\": \"Spanish Asparagus Revuelto\",\n  \"excerpt\": \"In Spain, wild asparagus is very popular, and itâ€™s a sure sign of spring\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1016240/spanish-asparagus-revuelto.html\"\n  },\n  \"cookTime\": \"30 min\",\n  \"ingredients\": [\n    \"Olive oil\",\n    \"2 peeled garlic cloves, plus 1/2 teaspoon minced garlic\",\n    \"2 cups bread cubes, made with day-old bread, cut in 1/2-inch cubes\",\n    \"Salt and pepper\",\n    \"2 ounces diced Spanish chorizo\",\n    \"1 bunch thin asparagus, about 1 1/2 pounds, cut in 1- to 2-inch lengths\",\n    \"1 bunch green onions, chopped\",\n    \"8 large eggs, beaten\",\n    \"1/2 teaspoon pimentÃ³n\",\n    \"2 tablespoons roughly chopped Italian parsley\"\n  ],\n  \"directions\": [\n    \"Put 3 tablespoons olive oil in a cast-iron skillet over medium-high heat. Add peeled garlic cloves and let them sizzle until lightly browned, then remove.\",\n    \"Add bread cubes, season with salt and pepper, lower heat to medium and gently fry until lightly browned and crisp, about 2 minutes. Remove bread and set aside to cool.\"\n  ],\n  \"name\": \"spring-spanish-asparagus-revuelto\"\n},\n\"spring-meatloaf\": {\n  \"title\": \"Fatted Calf's Meatloaf\",\n  \"highlighted\": true,\n  \"excerpt\": \"It is a thing of beauty, shaped into a large oval loaf and glazed with tangy cocktail sauce\",\n  \"source\": {\n    \"name\": \"Food52\",\n    \"url\": \"http://food52.com/recipes/24302-fatted-calf-s-meatloaf\"\n  },\n  \"cookTime\": \"1 hr 30 min\",\n  \"ingredients\": [\n    \"3/4 teaspoons black peppercorns\",\n    \"2 allspice berries\",\n    \"2 teaspoons fennel seed\",\n    \"1 teaspoon chile flakes\",\n    \"1 whole clove\",\n    \"1 1/4 pound boneless lean beef from eye of round or sirloin, cut into 1-inch cubes\",\n    \"1 pound boneless pork picnic, cut into 1-inch cubes\",\n    \"4 ounces pork back fat, cut into 1-inch cubes\",\n    \"Sea salt\",\n    \"2 teaspoons chopped garlic\",\n    \"4 ounces chopped bacon\",\n    \"2 cups diced yellow onion\",\n    \"2 tablespoons unsalted butter\",\n    \"6 tablespoons fresh breadcrumbs\",\n    \"1 egg lightly beaten\",\n    \"1/2 cup ketchup\",\n    \"1 1/2 teaspoon Tabasco sauce\",\n    \"1 1/4 teaspoon Worcestershire sauce\",\n    \"1 teaspoon grated fresh horseradish\",\n    \"1/4 cup chopped parsley\",\n    \"2 tablespoons chopped oregano\",\n    \"1 tablespoon chopped thyme\",\n    \"1 tablespoon chopped sage\",\n    \"1/4 cup ketchup\",\n    \"1/4 teaspoon sea salt\",\n    \"1/4 teaspoon freshly ground black pepper\",\n    \"1 1/2 teaspoon grated fresh horseradish\",\n    \"1/2 teaspoon Worcestershire sauce\",\n    \"1/2 teaspoon Tabasco sauce\"\n  ],\n  \"directions\": [\n    \"Preheat the oven to 325Â° F (165Â° C). To make the forcemeat, spread the peppercorns and allspice on a baking sheet and toast for 3 to 5 minutes, until fragrant. Let cool completely.\",\n    \"Toast the fennel seeds the same way, then let cool completely.\"\n  ],\n  \"name\": \"spring-meatloaf\"\n},\n\"spring-lahmacun-turkish-pizza\": {\n  \"title\": \"Lahmacun - Turkish Pizza\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Ottolenghi\",\n    \"url\": \"http://www.ottolenghi.co.uk/lahmacun-turkish-pizza-with-spicy-minced-beef-and-salad-topping-shop\"\n  },\n  \"cookTime\": \"40 min\",\n  \"ingredients\": [\n    \"250g minced beef\",\n    \"1 medium onion, finely chopped (180g net)\",\n    \"3 3/4 tsp salt\",\n    \"1 1/2 tsp ground cinnamon\",\n    \"1 1/2 tsp ground allspice\",\n    \"1/2 tsp red chilli flakes\",\n    \"25g flat-leaf parsley, chopped\",\n    \"2 tbsp pomegranate molasses\",\n    \"1 1/2 tbsp sumac\",\n    \"3 tbsp tahini\",\n    \"25g pine nuts\",\n    \"2 tbsp lemon juice\",\n    \"250g white flour, plus extra to dust\",\n    \"1 1/2 tbsp milk powder\",\n    \"1/2 tbsp salt\",\n    \"2 tsp fast-action dried yeast\",\n    \"1/2 tbsp caster sugar\",\n    \"60ml sunflower oil\",\n    \"1 medium egg\",\n    \"100ml lukewarm water\",\n    \"Olive oil for brushing\"\n  ],\n  \"directions\": [\n    \"Start with the dough. Put the flour, milk powder, salt, yeast and sugar in a large mixing bowl and stir well to combine.\",\n    \"Make a well in the centre. Add the sunflower oil and egg and stir as you add the water.\"\n  ],\n  \"name\": \"spring-lahmacun-turkish-pizza\"\n},\n\"spring-easiest-spaghetti-and-meatballs\": {\n  \"title\": \"Easiest Spaghetti & Meatballs\",\n  \"excerpt\": \"No pasta's more iconic than spaghetti and meatballs\",\n  \"source\": {\n    \"name\": \"Martha Stewart\",\n    \"url\": \"http://www.marthastewart.com/336523/easiest-spaghetti-and-meatballs?czone=food%2Fdinner-tonight-center%2Fdinner-tonight-main-courses&gallery=274538&slide=336523&center=276948\"\n  },\n  \"cookTime\": \"30 min\",\n  \"ingredients\": [\n    \"Coarse salt and ground pepper\",\n    \"1/4 cup finely grated Parmesan, plus more for serving\",\n    \"1/4 cup chopped fresh parsley\",\n    \"2 garlic cloves, minced\",\n    \"1 large egg\",\n    \"1 pound ground beef chuck\",\n    \"1/4 cup plain dried breadcrumbs\",\n    \"1 tablespoon olive oil\",\n    \"1 can (28 ounces) crushed tomatoes in puree\",\n    \"3/4 pound spaghetti\"\n  ],\n  \"directions\": [\n    \"Set a large pot of salted water to boil. In a bowl, combine Parmesan, parsley, garlic, egg, 1 teaspoon salt, and 1 teaspoon pepper. Add beef and breadcrumbs; mix gently. Form into 16 balls.\",\n    \"In a 5-quart Dutch oven or heavy pot, heat oil over medium. Add meatballs, and cook, turning occasionally, until browned, 8 to 10 minutes.\"\n  ],\n  \"name\": \"spring-easiest-spaghetti-and-meatballs\"\n},\n\"summer-shaking-beef\": {\n  \"title\": \"Slanted Door's Shaking Beef\",\n  \"excerpt\": \"Cubes of tender filet mignon are sautÃ©ed with red onions and a vinaigrette\",\n  \"source\": {\n    \"name\": \"7x7 magazine\",\n    \"url\": \"http://www.7x7.com/recipes/secret-recipe-slanted-doors-shaking-beef\"\n  },\n  \"cookTime\": \"25 min\",\n  \"ingredients\": [\n    \"1 1/2 - 2 pounds filet mignon, fat trimmed and cut into 1 1/4-inch cubes\",\n    \"1 teaspoons ground black pepper\",\n    \"1/2 cup plus 1 tablespoon canola oil\",\n    \"1 cup thinly sliced red onion, preferably spring onions\",\n    \"3 stalks green onion, trimmed and cut to 1-inch lengths\",\n    \"1 tablespoon chopped garlic\",\n    \"2 tablespoons unsalted butter\",\n    \"2 tablespoons white vinegar\",\n    \"1/4 cup white granulated sugar\",\n    \"1/4 cup light soy sauce\",\n    \"1/4 cup fish sauce\",\n    \"1 teaspoon cooking rice wine\"\n  ],\n  \"directions\": [\n    \"Marinate meat 1/2 teaspoon black pepper and 1 tablespoon oil for about 2 hours.\",\n    \"Meanwhile, make the stir-fry sauce by combining the white vinegar, sugar, soy, fish sauce, and rice wine. Mix until sugar is dissolved. Set aside.\"\n  ],\n  \"name\": \"summer-shaking-beef\"\n},\n\"summer-bavarian-pretzel\": {\n  \"title\": \"Bavarian-style Soft Pretzel\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/2010/05/26/dining/26pretzelrex1.html\"\n  },\n  \"cookTime\": \"1 hr 30 min\",\n  \"ingredients\": [\n    \"1 tablespoon barley malt syrup or dark brown sugar\",\n    \"2 tablespoons lard or softened unsalted butter\",\n    \"2 tablespoons instant yeast\",\n    \"6 cups (about 30 ounces) bread flour\",\n    \"1 tablespoon plus 1/2 teaspoon kosher salt\",\n    \"Food-grade lye, for dipping\",\n    \"Coarse sea salt or pretzel salt, for sprinkling (do not substitute kosher salt)\"\n  ],\n  \"directions\": [\n    \"In a mixing bowl (or bowl of a mixer), stir together syrup, lard or butter, yeast, 2 cups warm water and half the flour. Add kosher salt and remaining flour and stir just until mixture comes together in a shaggy mass.\",\n    \"Turn out onto counter (or attach dough hook to mixer) and knead for 8 to 10 minutes, until smooth and supple. Cut into 12 pieces and let rest 5 minutes.\"\n  ],\n  \"name\": \"summer-bavarian-pretzel\"\n},\n\"summer-apricots-honey-panna-cotta\": {\n  \"title\": \"Apricots Honey Panna Cotta\",\n  \"highlighted\": true,\n  \"excerpt\": \"Juicy, fragrant, perfectly textured for a little fire action\",\n  \"source\": {\n    \"name\": \"Tartelette\",\n    \"url\": \"http://www.tarteletteblog.com/2011/07/recipe-gluten-free-apricots-honey-panna.html\"\n  },\n  \"cookTime\": \"35 min\",\n  \"ingredients\": [\n    \"6 apricots\",\n    \"olive oil\",\n    \"1/4 cup water\",\n    \"1 tablespoon powdered gelatin (2 sheets gelatin)\",\n    \"2 cups heavy cream\",\n    \"1/4 cup honey\",\n    \"1 cup full fat buttermilk\"\n  ],\n  \"directions\": [\n    \"Cut the apricots in half and remove the pit. Brush lightly with olive oil and grill over hot coals until tender (about 3-4 minutes on each side).\",\n    \"Let cool and puree until smooth in a food processor. Divide the mixture between 6 glasses.\"\n  ],\n  \"name\": \"summer-apricots-honey-panna-cotta\"\n},\n\"summer-elderberry-syrup\": {\n  \"title\": \"Elderberry Syrup\",\n  \"excerpt\": \"The gorgeous syrup is great in a glass of sparkling water over ice, dripped some over plain yogurt\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2007/08/respect-your-el/\"\n  },\n  \"cookTime\": \"35 min\",\n  \"ingredients\": [\n    \"2 pounds (1kg) elderberries, stems removed and rinsed\",\n    \"4 cups (1l) water\",\n    \"2 1/2 (500g) cups sugar\",\n    \"squirt of freshly-squeezed lemon juice\"\n  ],\n  \"directions\": [\n    \"Put the elderberries in a large, non-reactive pot with the water. Bring to a boil, then reduce heat to a low boil and cook for 15-20 minutes, until tender and soft.\",\n    \"Pass through a food mill, then discard the skins.\"\n  ],\n  \"name\": \"summer-elderberry-syrup\"\n},\n\"summer-spaghetti-lemon-olive\": {\n  \"title\": \"Spaghetti with Lemon & Olive Oil\",\n  \"excerpt\": \"This is one of those recipes that are almost better off without one\",\n  \"source\": {\n    \"name\": \"Smitten Kitchen\",\n    \"url\": \"http://smittenkitchen.com/blog/2011/02/spaghetti-with-lemon-and-olive-oil-al-limone/\"\n  },\n  \"cookTime\": \"20 min\",\n  \"ingredients\": [\n    \"1 pound spaghetti or linguine\",\n    \"Salt\",\n    \"3 lemons\",\n    \"1/4 cup extra virgin olive oil , plus additional for serving\",\n    \"1/4 cup heavy cream\",\n    \"1 ounce finely grated Parmesan cheese (about 1/2 cup), plus additional for serving\",\n    \"Ground black pepper\",\n    \"Small handful fresh basil or arugula leaves, shredded\"\n  ],\n  \"directions\": [\n    \"Cook linguine or spaghetti in well-salted water to your al dente tastes in a large, wide-bottomed pot.\",\n    \"While pasta is cooking, zest lemons until you have a little shy of a tablespoon of zest. Juice lemons â€” youâ€™ll have anywhere from 1/3 to 1/2 cup lemon juice.\"\n  ],\n  \"name\": \"summer-spaghetti-lemon-olive\"\n},\n\"summer-homemade-pasta-dough\": {\n  \"title\": \"Homemade Pasta Dough\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Mario Batali\",\n    \"url\": \"http://www.mariobatali.com/recipes/basic-pasta-dough/\"\n  },\n  \"cookTime\": \"25 min\",\n  \"ingredients\": [\n    \"2 Cups All-Purpose Flour\",\n    \"2 Cups 00 Flour or 4 cups All-Purpose Flour\",\n    \"4 large Eggs\"\n  ],\n  \"directions\": [\n    \"Mound the flour in the center of a large wooden board. Make a well in the center of the flour and add the eggs. Using a fork, beat the eggs together and then begin to incorporate the flour; starting with the inner rim of the well. As you expand the well, keep pushing the flour up to retain the well shape (do not worry if it looks messy).\",\n    \"When half of the flour is incorporated, the dough will begin to come together. Start kneading the dough, using primarily the palms of your hands. Once the dough is a cohesive mass, set the dough aside and scrape up and discard any dried bits of dough.\"\n  ],\n  \"name\": \"summer-homemade-pasta-dough\"\n},\n\"summer-hamburger\": {\n  \"title\": \"Diner Style Hamburgers\",\n  \"excerpt\": \"This is the traditional, griddled hamburger of diners and takeaway spots, smashed thin and cooked crisp on its edges\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1016595/hamburgers-diner-style.html\"\n  },\n  \"cookTime\": \"20 min\",\n  \"ingredients\": [\n    \"1/2 teaspoon neutral oil, like canola, or a pat of unsalted butter\",\n    \"2 pounds ground chuck, at least 20 percent fat\",\n    \"Kosher salt and black pepper to taste\",\n    \"8 slices cheese (optional)\",\n    \"8 soft hamburger buns, lightly toasted\",\n    \"Lettuce leaves, sliced tomatoes and condiments\"\n  ],\n  \"directions\": [\n    \"Add oil or butter to a large cast-iron or stainless-steel skillet and place over medium heat. Gently divide ground beef into 8 small piles of around 4 ounces each, and even more gently gather them together into orbs that are about 2 inches in height. Do not form patties.\",\n    \"Increase heat under skillet to high. Put half the orbs into the skillet with plenty of distance between them and, using a stiff metal spatula, press down on each one to form a burger that is around 4 inches in diameter and about 1/2 inch thick. Season with salt and pepper.\"\n  ],\n  \"name\": \"summer-hamburger\"\n},\n\"fall-roasted-butternut-squash-lasagna\": {\n  \"title\": \"Roasted Butternut Squash Lasagna\",\n  \"highlighted\": true,\n  \"excerpt\": \"Making homemade pasta may seem arduous, but this dish is worth the extra work\",\n  \"source\": {\n    \"name\": \"Martha Stewart\",\n    \"url\": \"http://www.marthastewart.com/857657/roasted-butternut-squash-lasagna\"\n  },\n  \"cookTime\": \"1 hr 35 min\",\n  \"ingredients\": [\n    \"2 large butternut squashes (about 2 pounds each), halved lengthwise and seeded\",\n    \"3 tablespoons extra-virgin olive oil\",\n    \"Coarse salt and freshly ground pepper\",\n    \"1 stick unsalted butter, cut into pieces\",\n    \"2 1/4 cups finely grated Parmesan cheese (about 8 ounces)\",\n    \"1/2 cup finely crushed amaretti cookies\",\n    \"1/4 cup finely chopped fresh sage\",\n    \"1/4 teaspoon freshly grated nutmeg\",\n    \"6 tablespoons unsalted butter, cut into pieces\",\n    \"1/4 cup plus 2 tablespoons all-purpose flour\",\n    \"6 cups whole milk\",\n    \"Coarse salt\",\n    \"1/4 teaspoon freshly grated nutmeg\",\n    \"Homemade Pasta\"\n  ],\n  \"directions\": [\n    \"Make the filling: Preheat oven to 400 degrees. Drizzle squash halves with oil, and season with salt and pepper. Roast squashes, cut sides down, on a rimmed baking sheet until tender and browned, about 1 hour. Let cool. Scoop flesh from skins, and puree in a food processor until smooth.\",\n    \"Melt butter in a small saucepan over medium heat. Continue to cook until browned and fragrant, about 3 minutes. Transfer to a bowl.\"\n  ],\n  \"name\": \"fall-roasted-butternut-squash-lasagna\"\n},\n\"summer-grits-icecream\": {\n  \"title\": \"Grits Praline & Brown Butter Ice Cream\",\n  \"excerpt\": \"\\\"Decadent\\\" isnâ€™t a word we throw around lightly\",\n  \"source\": {\n    \"name\": \"Anson Mills\",\n    \"url\": \"http://www.ansonmills.com/recipes/480?recipes_by=grain\"\n  },\n  \"cookTime\": \"2 hr 20 min\",\n  \"ingredients\": [\n    \"2 ounces (4 tablespoons) European-style unsalted butter\",\n    \"1 cup heavy cream\",\n    \"1 cup whole milk\",\n    \"6 large egg yolks\",\n    \"1/3 cup sugar\",\n    \"1 1/2 teaspoons vanilla extract\",\n    \"1/8 teaspoon fine sea salt\",\n    \"2 ounces Anson Mills Antebellum Coarse Yellow Grits or Antebellum Coarse White Grits\",\n    \"2 1/2 cups spring or filtered water\",\n    \"1 teaspoon fine sea salt\",\n    \"3.5 ounces sugar\"\n  ],\n  \"directions\": [\n    \"Make the ice cream base: Set a large bowl in a sink or basin filled with lots (at least 3 quarts) of ice cubes and cold water. Have a fine-mesh strainer nearby. Melt the butter in a small heavy-bottomed saucepan over low heat, stirring with a wooden spoon to scrape the browning milk solids back into the butter, until the butter is the color of a hazelnut in the shell and the kitchen smells miraculous, 3 to 5 minutes. Pull the pan off the heat and set it aside.\",\n    \"Pour the cream and milk into a medium heavy-bottomed saucepan set over medium-high heat. Whisk the egg yolks and sugar in a medium bowl. Drizzle the hot butter cautiously into the yolk-sugar mixture a little at a time, whisking well as you do.\"\n  ],\n  \"name\": \"summer-grits-icecream\"\n},\n\"fall-peanut-butter-cookie\": {\n  \"title\": \"Peanut Butter Cookie with Salted Peanut Caramel\",\n  \"excerpt\": \"This recipe takes Peanut Butter Cookies to the next level\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2008/12/peanut-butter-cookies-with-salte-1/\"\n  },\n  \"cookTime\": \"45 min\",\n  \"ingredients\": [\n    \"8 tablespoons (115g) unsalted butter, at room temperature\",\n    \"1/2 cup (120g) packed light brown sugar\",\n    \"1/2 cup (100g) granulated sugar\",\n    \"1 large egg, at room temperature\",\n    \"1 teaspoon vanilla extract\",\n    \"3/4 cup (200g) creamy salted peanut butter\",\n    \"1 3/4 cups (250g) flour\",\n    \"1/2 teaspoon baking soda\",\n    \"1/4 teaspoon salt\",\n    \"1 cup (250ml) heavy cream\",\n    \"1/2 cup (125ml) water\",\n    \"1 cup (200g) granulated sugar\",\n    \"1 tablespoon light corn syrup or glucose\",\n    \"1/8 teaspoon coarse salt\",\n    \"3/4 cup (100g) finely chopped roasted salted peanuts\"\n  ],\n  \"directions\": [\n    \"Preheat the oven to 350F and line two baking sheets with parchment paper or silicone baking mats.\",\n    \"With an electric mixer, or by hand, make the cookie dough by beating the butter, brown and granulated sugar until smooth. Beat in the egg and vanilla until well blended. If using an electric mixer, scrape down the sides of the bowl.\"\n  ],\n  \"name\": \"fall-peanut-butter-cookie\"\n},\n\"fall-amatriciana\": {\n  \"title\": \"Bucatini all' Amatriciana\",\n  \"excerpt\": \"This dish is named for the town of Amatrice...considered by many Italians to be birthplace of the best cooks on the peninsula\",\n  \"source\": {\n    \"name\": \"Mario Batali\",\n    \"url\": \"http://www.mariobatali.com/recipes/bucatini-allamatriciana/\"\n  },\n  \"cookTime\": \"30 min\",\n  \"ingredients\": [\n    \"1/4 cup extra-virgin olive oil\",\n    \"12 ounces thinly sliced guanciale pancetta, or good bacon\",\n    \"1 red onion, cut lengthwise in half and then into 1/4-inch-thick half-moons\",\n    \"3 cloves garlic, sliced\",\n    \"1 1/2 teaspoons hot red pepper flakes\",\n    \"2 cups Basic Tomato Sauce\",\n    \"1 pound Bucatini\",\n    \"Freshly grated Pecorino Romano\"\n  ],\n  \"directions\": [\n    \"Bring 6 quarts of water to a boil in a large pot, and add 2 tablespoons salt.\",\n    \"Meanwhile, in a 10- to 12-inch saute pan, combine the olive oil, ganciale, onion, garlic, and re pepper flakes; set over low heat and cook until the onion is softened and the guanciale has rendered much of its fat, about 12 minutes.\"\n  ],\n  \"name\": \"fall-amatriciana\"\n},\n\"fall-orecchiette-sausage-ragu\": {\n  \"title\": \"Orecchiette with red lamb sausage & carrots\",\n  \"excerpt\": \"Chef di Cucina Matt Abdoo expounded on the virtues of the fundamental building block of Italian cooking: fresh pasta\",\n  \"source\": {\n    \"name\": \"Mario Batali\",\n    \"url\": \"http://www.mariobatali.com/recipes/orecchiette-with-red-lamb-sausage-carrots/\"\n  },\n  \"cookTime\": \"45 min\",\n  \"ingredients\": [\n    \"1 pound ground lamb\",\n    \"1 1/2 teaspoons salt\",\n    \"1 tablespoon red wine\",\n    \"1 teaspoon cayenne pepper\",\n    \"2 teaspoons garlic purÃ©e\",\n    \"2 tablespoons roasted red pepper purÃ©e\",\n    \"1 teaspoon freshly ground black pepper\",\n    \"2 tablespoons sweet paprika\",\n    \"1 teaspoon smoked paprika\",\n    \"1 pint carrot juice\",\n    \"2 cups diced carrots\",\n    \"2 cups chopped carrots\",\n    \"1 teaspoon sugar\",\n    \"Orange zest, to taste\",\n    \"Salt and pepper, to taste\",\n    \"1/4 cup chicken stock\",\n    \"2 tablespoons of unsalted butter\",\n    \"1 pound orecchiette pasta\",\n    \"1/4 cup pecorino cheese\",\n    \"Extra virgin olive oil\",\n    \"Breadcrumbs, for garnish\"\n  ],\n  \"directions\": [\n    \"To make the spice mixture for the sausage: In a bowl, combine spices, lamb, salt, and water. Incorporate thoroughly using your hands. Set aside.\",\n    \"To make the carrot puree: Cook carrots in carrot juice until tender. Strain, and reserve the diced carrots. Puree the remaining chopped carrots. Season with orange zest, salt and pepper to taste.  Fold the diced carrots into the seasoned carrot puree. Set aside.\"\n  ],\n  \"name\": \"fall-orecchiette-sausage-ragu\"\n},\n\"winter-braised-duck\": {\n  \"title\": \"Italian Red-Wine Braised Duck w/ Olive Gremolata\",\n  \"highlighted\": true,\n  \"excerpt\": \"A good braise always trumps a steak or a roast, both in terms of complex flavors and satisfaction\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1014424/italian-red-wine-braised-duck-with-olive-gremolata.html\"\n  },\n  \"cookTime\": \"2 hr 30 min\",\n  \"ingredients\": [\n    \"4 Muscovy duck legs (about 4 pounds), untrimmed\",\n    \"Salt and pepper\",\n    \"1/2 teaspoon coriander seed, toasted and coarsely ground\",\n    \"1/2 teaspoon fennel seed, toasted and coarsely ground\",\n    \"2 tablespoons olive oil\",\n    \"2 cups finely diced onion\",\n    \"3/4 cup finely diced carrot\",\n    \"3/4 cup finely diced celery\",\n    \"1 large thyme sprig\",\n    \"1 bay leaf\",\n    \"1 4-inch strip of orange peel, pith removed\",\n    \"4 garlic cloves, minced\",\n    \"2 tablespoons tomato paste\",\n    \"1 cup chopped canned or fresh tomatoes\",\n    \"1 cup dry red wine\",\n    \"3 cups chicken broth\",\n    \"Pinch cayenne or red pepper, optional\",\n    \"Olive gremolata for garnish\"\n  ],\n  \"directions\": [\n    \"Trim duck legs of extraneous fat with a sharp knife, leaving a thin layer on top. (It is best to do this straight from the fridge, while fat is still firm.) Save duck fat for rendering.\",\n    \"Season each leg generously with salt and pepper, then sprinkle with ground coriander and fennel. Massage seasoning into meat and leave at room temperature for 30 minutes, or wrap and refrigerate overnight.\"\n  ],\n  \"name\": \"winter-braised-duck\"\n},\n\"fall-chocolate-chai-cupcake\": {\n  \"title\": \"Chocolate Chai Spice Cupcake\",\n  \"excerpt\": \"The moist chocolatey goodness of the cake can live on its own\",\n  \"source\": {\n    \"name\": \"Cupcake Bakeshop\",\n    \"url\": \"http://cupcakeblog.com/?p=50\"\n  },\n  \"cookTime\": \"55 min\",\n  \"ingredients\": [\n    \"200 gram bar of Valrhona 61% cacao\",\n    \"3 sticks butter\",\n    \"2-1/4 cups sugar\",\n    \"8 eggs\",\n    \"1-1/4 cup flour\",\n    \"1/4 cup cocoa powder, unsweetened\",\n    \"1-1/2 teaspoons baking powder\",\n    \"3 teaspoons chai spice mix\",\n    \"pinch of salt\",\n    \"1 cup (2 sticks) butter\",\n    \"4-5 cups powdered sugar, sifted\",\n    \"1/4 cup milk\",\n    \"2 teaspoons chai spice mix\",\n    \"2 teaspoons minced fresh ginger\"\n  ],\n  \"directions\": [\n    \"With a small food processor, grind up the whole fennel and cloves.\",\n    \"Transfer to a small bowl and add remaining spices. Mix to combine.\"\n  ],\n  \"name\": \"fall-chocolate-chai-cupcake\"\n},\n\"fall-mexican-rice\": {\n  \"title\": \"Mexican Rice\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1016674/mexican-rice.html\"\n  },\n  \"cookTime\": \"40 min\",\n  \"ingredients\": [\n    \"1 large clove garlic, roughly chopped\",\n    \"2 cups canned tomatoes (fresh tomatoes can be used)\",\n    \"1/2 cup green bell pepper, roughly chopped\",\n    \"1 medium onion, roughly chopped\",\n    \"1/2 medium jalapeÃ±o, seeds and veins removed\",\n    \"1 teaspoon salt\",\n    \"1/2 cup chicken stock or water\",\n    \"2 tablespoons vegetable oil\",\n    \"1 heaping cup long-grain white rice, rinsed\"\n  ],\n  \"directions\": [\n    \"Blend vegetables, salt and stock or water together into a mostly smooth purÃ©e (a few small pieces of onion and pepper are fine).\",\n    \"In a large skillet with a tightfitting lid, heat oil. Add rice and toast until it absorbs most of the oil and begins to smell nutty.\"\n  ],\n  \"name\": \"fall-mexican-rice\"\n},\n\"fall-whole-wheat-goldfish-crackers\": {\n  \"title\": \"Whole Wheat Goldfish Crackers\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Smitten Kitchen\",\n    \"url\": \"http://smittenkitchen.com/blog/2011/03/whole-wheat-goldfish-crackers/\"\n  },\n  \"cookTime\": \"1 hr 5 min\",\n  \"ingredients\": [\n    \"6 ounces (1 1/2 cups coarsely grated) sharp cheddar\",\n    \"4 tablespoons (2 ounces or 57 grams) butter\",\n    \"1/2 cup (2 1/2 ounces or 62 grams) whole wheat flour\",\n    \"1/4 cup (1 1/8 ounces or 31 grams) all-purpose flour\",\n    \"1/8 teaspoon onion powder\",\n    \"1/8 to 1/4 teaspoon table salt\"\n  ],\n  \"directions\": [\n    \"Preheat oven to 350Â°F. Combine all ingredients in a food processor, running the machine until the dough forms a ball, about two minutes.\",\n    \"If the dough feels warm or worrisome-ly soft, wrap it in waxed paper or plastic wrap and chill it in the fridge for 30 to 45 minutes. This also makes it easier to transfer shapes once they are rolled out.\"\n  ],\n  \"name\": \"fall-whole-wheat-goldfish-crackers\"\n},\n\"winter-world-peace-cookie\": {\n  \"title\": \"P.HermÃ© & D.Greenspan's World Peace Cookies\",\n  \"excerpt\": \"Shortbread cookie meets salted chocolate chip, and world peace feels within reach\",\n  \"source\": {\n    \"name\": \"Food52\",\n    \"url\": \"http://food52.com/recipes/25372-pierre-herme-dorie-greenspan-s-world-peace-cookies\"\n  },\n  \"cookTime\": \"35 min\",\n  \"ingredients\": [\n    \"1 1/4 cups all-purpose flour\",\n    \"1/3 cup unsweetened cocoa powder\",\n    \"1/2 teaspoon baking soda\",\n    \"1 stick plus 3 tablespoons (11 tablespoons) unsalted butter, room temperature\",\n    \"2/3 cups (packed) light brown sugar\",\n    \"1/4 cup granulated sugar\",\n    \"1/2 teaspoon fleur del sel or 1/4 teaspoon fine sea salt\",\n    \"1 teaspoon pure vanilla extract\",\n    \"5 ounces bittersweet chocolate, chopped into chips, or a generous 3/4 cup store-bought mini chocolate chips\"\n  ],\n  \"directions\": [\n    \"Sift the flour, cocoa and baking soda together.\",\n    \"Working with a stand mixer, preferably fitted with a paddle attachment, or with a hand mixer in a large bowl, beat the butter on medium speed until soft and creamy. Add both sugars, the salt and vanilla extract and beat for 2 minutes more.\"\n  ],\n  \"name\": \"winter-world-peace-cookie\"\n},\n\"winter-chocolate-tart\": {\n  \"title\": \"Chocolate Tart\",\n  \"highlighted\": true,\n  \"excerpt\": \"A good chocolate tart doesnâ€™t need to be fancy, but it needs to be deep, dark, and yes, somewhat decadent.\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2011/10/chocolate-tart-recipe/\"\n  },\n  \"cookTime\": \"1 hr\",\n  \"ingredients\": [\n    \"1 1/4 cup (250 g) sugar\",\n    \"6 tablespoons (90 ml) warm coffee\",\n    \"4 ounces (115 g) unsalted butter, cubed, room temperature\",\n    \"pinch of sea salt\",\n    \"4 ounces (115 g) bittersweet or semisweet chocolate, chopped\",\n    \"2 ounces (55 g) unsweetened chocolate, chopped\",\n    \"2 large eggs\",\n    \"1/4 cup (35 g) flour\",\n    \"1 tablespoon dark rum or 1 teaspoon vanilla extract\",\n    \"One 9â€“10 inch prebaked tart shell\"\n  ],\n  \"directions\": [\n    \"Preheat oven to 350ÂºF (180ÂºC.)\",\n    \"Spread the sugar in an even layer in the bottom of a large, heavy-duty saucepan or Dutch oven. Cook the sugar over moderate heat until the edges liquefy and being to caramelize. Use a heatproof utensil to gently drag the liquefied sugar toward the center of the pan, encouraging the sugar to melt evenly.\"\n  ],\n  \"name\": \"winter-chocolate-tart\"\n},\n\"winter-braised-eggs-with-beef\": {\n  \"title\": \"Braised eggs w/ beef, smoked aubergine & tomato\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Ottolenghi\",\n    \"url\": \"http://www.ottolenghi.co.uk/recipes/meat/braised-eggs-with-beef-smoked-aubergine-and-tomato-shop\"\n  },\n  \"cookTime\": \"1 hr 5 min\",\n  \"ingredients\": [\n    \"4 aubergines (1.1kg gross)\",\n    \"1 tbsp olive oil, plus extra for drizzling\",\n    \"1 large onion, finely chopped (200g net)\",\n    \"6 garlic cloves, roughly chopped (20g net)\",\n    \"1/2 tsp chilli flakes\",\n    \"1/2 tsp ground cinnamon\",\n    \"1/2 tsp ground cumin\",\n    \"2 tsp tomato paste\",\n    \"300g minced beef\",\n    \"2 medium tomatoes, chopped (100g net)\",\n    \"2 tsp finely chopped preserved lemon (15g)\",\n    \"4 eggs\",\n    \"3/4 tsp sumac\",\n    \"1 tbsp chopped parsley\",\n    \"Salt and black pepper\",\n    \"40g tahini\",\n    \"2 tbsp lemon juice\",\n    \"1 garlic clove, crushed\"\n  ],\n  \"directions\": [\n    \"Pierce the aubergines with a sharp knife in a few places and place each directly over a naked flame on your stovetop. Cook on medium heat for 20 minutes, turning occasionally with metal tongs until the outside is totally burnt and the aubergine starts to collapse on itself. Alternatively, place the pierced aubergines on a tin foil lined tray under a hot grill in the oven for an hour, turning every 20 minutes. Remove from and place in a colander.\",\n    \"Cut a single slit in each aubergine, from top to bottom and allow the juices to strain. Once cool enough to handle, scoop out all the flesh, avoiding all black skin, and set aside. You should have about 370g aubergine flesh.\"\n  ],\n  \"name\": \"winter-braised-eggs-with-beef\"\n},\n\"winter-cashew-gateau\": {\n  \"title\": \"Cashew Gateau with Coffee Cardamom Mousse\",\n  \"excerpt\": \"The inspiration for the caramel stained \\\"glass\\\" panel comes from my grandmother\",\n  \"source\": {\n    \"name\": \"Tartelette\",\n    \"url\": \"http://www.tarteletteblog.com/2008/08/cashew-gateau-with-coffee-cardamom.html\"\n  },\n  \"cookTime\": \"1 hr 30 min\",\n  \"ingredients\": [\n    \"3/4 cups cashew, toasted/skinned\",\n    \"1/3 cup cake flour, unsifted\",\n    \"1 Tbsp. cornstarch\",\n    \"3 large egg yolks\",\n    \"1/2 cup sugar, divided (2Tb & 6 Tb)\",\n    \"1/2 tsp. vanilla extract\",\n    \"1/2 tsp. grated lemon rind\",\n    \"2 lg. egg whites\",\n    \"2 Tb melted butter, cooled\",\n    \"1/2 teaspoon ground cardamom\",\n    \"1/2 cup espresso or strong coffee\",\n    \"1/4 cup sugar\",\n    \"1 tsp powdered unflavored gelatin, softened in 1 tablespoon cold water\",\n    \"1 cup heavy cream, cold\",\n    \"1/2 cup heavy cream\",\n    \"3/4 cup chopped chocolate or chocolate chips (about 6 oz or 180 gr)\"\n  ],\n  \"directions\": [\n    \"Position rack in the lower 3rd of the oven and preheat to 350 degrees.\",\n    \"Grease and flour a 8â€ X 4â€ inch round springform pan.\"\n  ],\n  \"name\": \"winter-cashew-gateau\"\n}\n};","var feedSubscription;\nvar thisCurrentProduct ;\n// Handle for launch screen possibly dismissed from app-body.js\ndataReadyHold = null;\n\n// Global subscriptions\nif (Meteor.isClient) {\n  Meteor.subscribe('news');\n  Meteor.subscribe('bookmarkCounts');\n  Meteor.subscribe('images');\n  Meteor.subscribe('getSellers');\n  \n  // var resultsq = Meteor.subscribe('featuredProducts');\n \n  // Session.set('featuredProducts',resultsq);\n  feedSubscription = Meteor.subscribe('feed');\n}\n\nRouter.configure({\n  layoutTemplate: 'appBody',\n  notFoundTemplate: 'notFound'\n});\n\nif (Meteor.isClient) {\n  // Keep showing the launch screen on mobile devices until we have loaded\n  // the app's data\n  dataReadyHold = LaunchScreen.hold();\n}\n\n\n\nProductsController = RouteController.extend({\n  onBeforeAction: function () {\n \n    Meteor.subscribe('latestProducts', function () {\n      dataReadyHold.release();\n    });\n\n    Meteor.subscribe('getSellerProducts', function () {\n      dataReadyHold.release();\n    });\n  }\n});\n\nFeedController = RouteController.extend({\n  onBeforeAction: function () {\n    this.feedSubscription = feedSubscription;\n  }\n});\n\nRecipesController = RouteController.extend({\n  data: function () {\n    return _.values(RecipesData);\n  }\n});\n\nBookmarksController = RouteController.extend({\n  onBeforeAction: function () {\n    if (Meteor.user())\n      Meteor.subscribe('bookmarks');\n    else\n      Overlay.open('authOverlay');\n  },\n  data: function () {\n    if (Meteor.user())\n      return _.values(_.pick(RecipesData, Meteor.user().bookmarkedRecipeNames));\n  }\n});\n\nRecipeController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('recipe', this.params.name);\n  },\n  data: function () {\n    return RecipesData[this.params.name];\n  }\n});\n\n// addSellerController = RouteController.extend({\n//   onBeforeAction:function()\n//   {\n//     console.log('Seller Controller loaded');\n\n    \n//     if (Meteor.userId())\n//     {\n//       var currentSeller = Meteor.wrapAsync(getThisSeller(Meteor.userId()));     \n//     }\n//   }\n// });\n\n\n\n// function getThisSeller(id)\n// {\n//   console.log(\"Get Seller  : \" + id);\n//   var retProd = {};\n//   var returnProd=[];\n   \n//   var repro =   Meteor.apply('getProductSeller', [id],{wait: true}, function(err,data){\n//     if (!err)\n//     {\n      \n//       Session.set(\"currentSeller\",data);\n//       console.log(data);\n     \n \n//     }\n//     else\n//     {\n//       console.log(err);\n//     }\n    \n//   });\n// }\n \n \nProductController = RouteController.extend({\n  onBeforeAction : function()\n  {\n    if (this.params._id)\n    {\n      console.log(\"Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product',Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n      //var productImages = Meteor.wrapAsync(getProductImages(currentProduct.prodImg));\n      //currentProduct.prodImg = productImages;\n      dataReadyHold.release();\n\n    }\n    \n  }\n  \n  // ,\n  // data : function()\n  // {\n  //   currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n  // }\n  \n   \n});\n\nfunction getThisProdData(id)\n{\n  console.log(\"Get Single product publish Router Method : \" + id);\n  var retProd = {};\n  var returnProd=[];\n  var repro =   Meteor.apply('getProduct', [id],{wait: false}, function(err,data){\n    if (!err)\n    {\n      sessionStorage.removeItem(\"currentProduct\");\n      Session.set(\"currentProduct\",data);  \n    }\n    else\n    {\n      console.log(err);\n      sessionStorage.removeItem(\"currentProduct\");\n    }    \n  });  \n}\n\n\nSellerController = RouteController.extend({\n  onBeforeAction: function()\n  {\n    console.log('Seller Controller loaded');\n    if (Meteor.userId())\n    {\n      //loading.start();\n      //Meteor.subscribe('SellerDetailsImages',Meteor.userId());\n      Meteor.subscribe('getSeller',Meteor.userId());\n      Sellers.findOne({userId:Meteor.userId()});\n     \n      // Meteor.call('getSeller', [Meteor.userId()], function(error, success) { \n      //   if (error) { \n      //     console.log('error getting seller', error); \n      //     sessionStorage.removeItem(\"currentSeller\");\n      //   } \n      //   if (success) { \n      //     console.log(\"Client Router Seller : \" + success);\n      //     sessionStorage.removeItem(\"currentSeller\");\n      //     Session.set(\"currentSeller\",success);\n      //   } \n      // });\n      console.log('Seller Controller reference data');\n      Meteor.subscribe('referenceData', function () {\n        console.log(ReferenceData.find({}).count());\n        //loading.stop();\n        dataReadyHold.release();\n      });\n      \n       \n    }\n  }\n})\n\nEditProductController = RouteController.extend({\n  onBeforeAction:function(){\n    console.log(\"Edit Product\");\n    if (this.params._id)\n    {\n      console.log(\"Edit Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product',Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n      dataReadyHold.release();\n    }\n  }\n});\n\nAdminController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('news');\n  }\n});\n\nHomeController = RouteController.extend({\n  onBeforeAction:function(){\n      Meteor.subscribe('featuredProducts');\n    console.log(\"Home from router products \" );\n    dataReadyHold.release();\n  }\n});\n\nRouter.route('home', {\n  path: '/'\n});\n\n// Router.route('products', {\n//   path : '/products/:_searchTerm',\n//   // name: 'products',\n//   // template: 'products',\n//   });\n \nRouter.route('products');\n\nRouter.route('seller');\n\nRouter.route('feed');\n\n\n\nRouter.route('recipes');\n\nRouter.route('bookmarks');\n\nRouter.route('about');\n\nRouter.route('recipe', {\n  path: '/recipes/:name'\n});\n\nRouter.route('product', {\n  path : '/product/:_id',\n  name: 'productPage',\n  template: 'product',\n  });\n\n  Router.route('editproduct', {\n    path : '/editproduct/:_id',\n    name: 'productEditPage',\n    template: 'tmp_product_maintain',\n    layoutTemplate: null,\n    controller: EditProductController\n    });\n  \n\n  Router.route('login',{\n    path :'/login',\n    template :'authOverlay',\n    layoutTemplate: 'appBody'\n  });\n\n  Router.route('signup',{\n    path :'/signup',\n    template :'authOverlaySignup',\n    layoutTemplate: 'appBody'\n  })\n\n\nRouter.route('admin', {\n  layoutTemplate: null\n});\n\nRouter.onBeforeAction('dataNotFound', {\n  only: 'recipe'\n});\n\n"," \n\nSellers.allow({\n    insert: function(userId, doc) {\n      return doc.userId === userId;\n    },\n    update: function(userId,doc){\n      return doc.userId === userId;\n    },\n    remove: function(userId, doc) {\n        return doc.userId === userId;\n      }\n  });\n  \n \n  Meteor.methods({\n    'getSeller':function(id){\n      var result={};\n      try\n      {\n        //console.log(\" server find one : \" + id);\n        //loading.start();\n        var SellerResult = Meteor.apply('getProductSeller',[id],{returnStubValue: true});\n       \n         //console.log(\"Server seller \" );\n \n        if (SellerResult)\n        {\n          //console.log(\"has seller\");\n          result=SellerResult;\n        \n        }\n        else\n\n        {\n         // console.log(\"has no seller\");\n          result  = {\n            _id:\"\",\n             userId:Meteor.userId(),\n             businessname : \"\",\n             busTagLine: \"\",\n             busLogo: \"\",\n             busAvatar: \"\",\n             bustel: \"\",\n             buscel: \"\",\n             busemail: \"\",\n             cont1 : \"\",\n             cont2 : \"\",\n             add1: \"\",\n             add2: \"\",\n             add3: \"\",\n             add4: \"\",\n             add5: \"\",\n             website: \"\"\n  \n            }\n             \n        }\n        //loading.stop();\n      }\n      catch (exp)\n      {\n        //loading.halt();\n          throw exp;\n      }\n      //console.log(result);\n      return result;\n      \n    },\n   \n    'newSeller':function(sellerObj){\n     // var result = Products.find({_id:prodid});\n      \n     try {\n \n    \n\n      \n     var sellerResult = \n     Sellers.upsert({\n      // Selector\n      userId: sellerObj.userId \n        }, {\n      // Modifier\n      $set: {\n        businessname : sellerObj.businessname,\n        busTagLine: sellerObj.busTagLine,\n        busLogo : sellerObj.busLogo,\n        busAvatar : sellerObj.busAvatar,\n        bustel : sellerObj.bustel,\n        buscel : sellerObj.buscel,\n        busemail : sellerObj.busemail,\n        cont1 : sellerObj.cont1,\n        cont2 : sellerObj.cont2,\n        add1 : sellerObj.add1,\n        add2 : sellerObj.add2,\n        add3 : sellerObj.add3,\n        add4 : sellerObj.add4,\n        add5 : sellerObj.add5,\n        website : sellerObj.website\n      }\n      });\n       \n    //console.log(sellerResult);\n\n      //return Sellers.insert(sellerObj);\n      \n     } catch (error) {\n        \n       console.log(\"Server - Seller - \" + error);\n       throw error;\n     }\n     \n      \n    },\n    \n    'updateSeller':function(sellerObj){\n        // var result = Products.find({_id:prodid});\n         return Sellers.findOne({userId:prodid});\n    },\n    'deleteSeller':function(id){\n        // var result = Products.find({_id:prodid});\n         return Sellers.remove({userId:id});\n    }\n    \n  });\n\n    \n\n  Sellers.allSellers= function(){\n      return Sellers.find({});\n  }\n\n  Sellers.more = function(continuationValue){\n      //https://www.npmjs.com/package/mongo-cursor-pagination\n      return Sellers.find({}, {sort: {date: -1}});\n    \n  } \n\n   \n  /*\n  Meteor.methods({\n    createActivity: function(activity, tweet, loc) {\n      Meteor.userId(), String,\n      activity, {\n        recipeName: String,\n        text: String,\n        image: String\n      },\n      tweet, Boolean,\n      loc, Match.OneOf(Object, null),\n      \n      activity.userId = Meteor.userId(,\n      activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n      activity.userName = Meteor.user().profile.name;\n      activity.date = new Date;\n      \n      if (! this.isSimulation && loc)\n        activity.place = getLocationPlace(loc,\n      \n      var id = Activities.insert(activity,\n      \n      if (! this.isSimulation && tweet)\n        tweetActivity(activity,\n      \n      return id;\n    }\n  },\n  \n  if (Meteor.isServer) {\n    var twitterOauth = function(options) {\n      var config = Meteor.settings.twitter\n      var userConfig = Meteor.user().services.twitter;\n  \n      return {\n        consumer_key: config.consumerKey,\n        consumer_secret: config.secret,\n        token: userConfig.accessToken,\n        token_secret: userConfig.accessTokenSecret\n      };\n    }\n    \n    var tweetActivity = function(activity) {\n      // creates the tweet text, optionally truncating to fit the appended text\n      function appendTweet(text, append) {\n        var MAX = 117; // Max size of tweet with image attached\n        \n        if ((text + append).length > MAX)\n          return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n        else\n          return text + append;\n      }\n      \n      // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n      var image = activity.image.replace(/^data.*base64,/, '',\n  \n      var response = HTTP.post(\n        'https://upload.twitter.com/1.1/media/upload.json', {\n          params: { media: image },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n      \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to post image to twitter',\n  \n      if (! response.data)\n        throw new Meteor.Error(500, 'Did not receive attachment from twitter',\n  \n      var attachment = response.data;\n  \n      response = HTTP.post(\n        'https://api.twitter.com/1.1/statuses/update.json', {\n          params: {\n            status: appendTweet(activity.text, ' #localmarket'),\n            media_ids: attachment.media_id_string\n          },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n  \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to create tweet',\n    }\n    \n    var getLocationPlace = function(loc) {\n      var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n        + '?granularity=neighborhood'\n        + '&max_results=1'\n        + '&accuracy=' + loc.coords.accuracy\n        + '&lat=' + loc.coords.latitude\n        + '&long=' + loc.coords.longitude;\n      \n      var response = HTTP.get(url,\n                              {npmRequestOptions: { oauth: twitterOauth() } },\n  \n      if (response.statusCode === 200 && response.data) {\n        var place = _.find(response.data.result.places, function(place) {\n          return place.place_type === 'neighborhood';\n        },\n        \n        return place && place.full_name;\n      }\n    }\n  }\n   \n  */","// Provide defaults for Meteor.settings\n//\n// To configure your own Twitter keys, see:\n//   https://github.com/meteor/localmarket#configuring-twitter\nif (typeof Meteor.settings === 'undefined')\n  Meteor.settings = {};\n  \n\n_.defaults(Meteor.settings, {\n  twitter: {\n    consumerKey: \"PLfrg2bUh0oL0asi3R2fumRjm\", \n    secret: \"sRI8rnwO3sx7xUAxNWTX0WEDWph3WEBHu6tTdJYQ5wVrJeVCCt\"\n  },\n  ///Users/farid/Documents/Projects/Meteor/untitled folder/localmarket-master/.meteor/local/build/programs/web.browser/app/img/prods\n  products:{\n    fileSavePath:\"/Users/farid/Documents/Projects/Meteor/justadit/public/img/prods/\", \n    imgPath:\"/img/prods/\",\n    maxfileUploadSize:2000000,\n    maxfileUploadSource:\"\"\n  },\n  featuredProductsLimit : 4\n});\n\nServiceConfiguration.configurations.upsert(\n  { service: \"twitter\" },\n  {\n    $set: {\n      consumerKey: Meteor.settings.twitter.consumerKey,\n      secret: Meteor.settings.twitter.secret\n    }\n  }\n);\n","Meteor.publish('bookmarkCounts', function() {\n  return BookmarkCounts.find();\n});\n\nMeteor.publish('news', function() {\n  return News.find({}, {sort: {date: -1}, limit: 1});\n});\n\n\nMeteor.publish('images',function(){\n  return Images.find({});\n});\n\n \n\n\nMeteor.publish('latestProducts', function () {\n\n  console.log(\"Publishing home view products :\" + Meteor.settings.featuredProductsLimit );\n  var returnProds;\n  try\n  {\n     \n    returnProds = Products.find({},{sort:{createdAt:-1}} );\n \n  }\n  catch (exp)\n  {\n    console.log(\"Server : latest Products - \" + exp);\n  }\n  console.log(\"Publishing Latest Product : \" )\n  return returnProds;\n\n   \n  \n   \n});\n\nMeteor.publish('latestActivity', function () {\n  console.log(\"Publishing Activities : \" + Activities.count)\n  return Activities.latest();\n});\n\nMeteor.publish('feed', function() {\n  return Activities.find({}, {sort: {date: -1}, limit: 10});\n});\n\nMeteor.publish('recipe', function(name) {\n  check(name, String);\n  return [\n    BookmarkCounts.find({recipeName: name}),\n    Activities.find({recipeName: name})\n  ];\n});\n\nMeteor.publish('referenceData', function() {\n  console.log(\"Publishing Activities : \" + ReferenceData.count)\n  return ReferenceData.find({});\n});\n\nMeteor.publish('allProducts', function(){\n   //return Products.find({},{order:{createdAt:-1}});\n   \n});\n\nMeteor.publish('featuredProducts',function(){\n  console.log(\"Publishing home view products :\" + Meteor.settings.featuredProductsLimit );\n\nvar returnProds;\ntry\n{\n \n  returnProds = Products.find({},{sort:{createdAt:-1}},{limit: Meteor.settings.featuredProductsLimit});\n \n}\ncatch (exp)\n{\n  console.log(\"Server : featuredProduct - \" + exp);\n}\nreturn returnProds;\n  \n \n});\n\n\nMeteor.publish('product', function(id) {\n  check(id, String);\n  console.log(\"Get Single product publish : \" + id);\n  var returnProd=[];\n  try\n  {\n     \n    this.ready();\n    var Prods = Products.findOne({_id:id});\n    //console.log(Prods);\n    return Products.find({_id:id});\n     \n \n  }\n  catch (exp)\n  {\n    this.ready();\n    console.log(\"Server : Product - \" + exp);\n  }\n \n \n  \n   \n});\n\nMeteor.publish('getSeller',function(id){\n  check(id,String);\n  console.log(\"Getting Seller : \" + id);\n  var result = [];\n  try\n  {\n    var sellers = Sellers.find({userId:id});\n \n    return sellers;\n  }\n  catch(exp)\n  {\n    console.log(\"Server Side : Error getting sellers - \" + exp);\n  }\n  return result;\n\n});\n\nMeteor.publish('getSellers',function(){\n \n  console.log(\"Getting Seller  Images\");\n  return Sellers.find({});\n\n});\n\n  Meteor.publish('SellerDetailsImages',function(id){\n    check(id,String);\n    console.log(\"Getting Seller Details Images\");\n    return Images.find({ImageCat:'SellerDetails',SellerId:id});\n\n  });\n  Meteor.publish('SellerProductImages',function(id){\n    //check(id,String);\n    console.log(\"Getting Seller Product Images\");\n    return Images.find({ImageCat:'ProductDetails',ImageId:id});\n\n  });\n\n  Meteor.publish('SingleProductImage', function(id) {\n    //check(id, String);\n    //console.log(\"Get product single image publish : \" + id);\n    var returnImage = [];\n    try\n    {\n    var img = Images.findOne({ImageId:id});    \n    returnImage.push(img);\n    }\n    catch (exp)\n    {\n      console.log(\"Server - Product Image - \" + exp);\n    }  \n    return Images.find({ImageId:id},{limit:1});   \n     \n});\n  \n\n  Meteor.publish('ProductImages', function(id) {\n    //check(id, String);\n    console.log(\"Get Seller products images publish : \" + id);\n     var returnImages = Images.find({ImageId:id});\n     console.log(returnImages.count());\n    try\n    {\n      Images.find({ImageId:id}).forEach(element => {\n        //console.log(element);\n      });\n     \n    }\n    catch (exp)\n    {\n      console.log(\"Server - Product Images - \" + exp);\n    }\n\n    return returnImages;\n     \n});\n \n  Meteor.publish('SellerProducts', function(id) {\n    check(id, String);\n    console.log(\"Get Seller products publish : \" + id);\n    try {\n      var SellerProds = Products.find({sellerId:id});\n    return SellerProds;\n    } catch (error) {\n      throw error;\n    }\n    \n     \n});\n\nMeteor.publish('QSearch',function (options){\n console.log(\"Quick Search\");\n var searchTerms = \"'/^.*\" + options + \".*$/i'\";\n    console.log(searchTerms);\n    //$text: {$search: searchValue} },\n    var prods = Products.find({\"producttitle\":{$regex:searchTerms}});\n    console.log(prods.count());\n    var result = [];\n    prods.forEach(element => {\n      result.push(element);\n    });\n    //var result = Products.find({$text: {$search: searchTerms}}).fetch();\n    //({$text:{$search:\"tutorialspoint\"}})\n    \n    console.log(result);\n    return result;\n  \n});\n// autopublish the user's bookmarks and admin status\nMeteor.publish(null, function() {\n  return Meteor.users.find(this.userId, {\n    fields: {\n      admin: 1,\n      bookmarkedRecipeNames: 1,\n      'services.twitter.profile_image_url_https': 1\n    }\n  });\n});","Accounts.onCreateUser(function(options, user) {\n  if (options.profile)\n    user.profile = options.profile;\n\n  // If this is the first user going into the database, make them an admin\n  if (Meteor.users.find().count() === 0)\n    user.admin = true;\n\n  return user;\n});\n\nAccounts.onLogin(function() { \n  console.log(\"Login in\");\n  if (Meteor.userId)\n  {\n    return true;\n    \n  }\n \n});\n \n\nAccounts.onLogout(function(){\n  if (!Meteor.userId)\n  {\n    this.Router.go(\"/\");\n  }\n  \n});\n "]}