{"version":3,"sources":["meteor://ðŸ’»app/client/templates/Maintain_Product.js","meteor://ðŸ’»app/client/templates/activity.js","meteor://ðŸ’»app/client/templates/admin.js","meteor://ðŸ’»app/client/templates/app-body.js","meteor://ðŸ’»app/client/templates/auth-overlay.js","meteor://ðŸ’»app/client/templates/auth-signup.js","meteor://ðŸ’»app/client/templates/bookmarks.1.js","meteor://ðŸ’»app/client/templates/bookmarks.js","meteor://ðŸ’»app/client/templates/carousel.js","meteor://ðŸ’»app/client/templates/home.js","meteor://ðŸ’»app/client/templates/login.js","meteor://ðŸ’»app/client/templates/nav.js","meteor://ðŸ’»app/client/templates/overlay.js","meteor://ðŸ’»app/client/templates/product-item.js","meteor://ðŸ’»app/client/templates/product.js","meteor://ðŸ’»app/client/templates/products.js","meteor://ðŸ’»app/client/templates/recipe-item.js","meteor://ðŸ’»app/client/templates/recipe.js","meteor://ðŸ’»app/client/templates/search.js","meteor://ðŸ’»app/client/templates/seller.js","meteor://ðŸ’»app/client/templates/share-overlay.js","meteor://ðŸ’»app/client/templates/showImage.js","meteor://ðŸ’»app/client/templates/ticker.js","meteor://ðŸ’»app/client/templates/whats-cooking.js","meteor://ðŸ’»app/client/lib/JIC.js","meteor://ðŸ’»app/client/lib/common.js","meteor://ðŸ’»app/client/lib/compressjs.js","meteor://ðŸ’»app/client/lib/init.js","meteor://ðŸ’»app/client/lib/jquery.touchwipe.js","meteor://ðŸ’»app/client/lib/jqueryValidate.js","meteor://ðŸ’»app/client/helpers.js","meteor://ðŸ’»app/client/init.js","meteor://ðŸ’»app/lib/startup/apiSetup.js","meteor://ðŸ’»app/lib/startup/fixtures.js","meteor://ðŸ’»app/lib/activities.js","meteor://ðŸ’»app/lib/bookmarks.js","meteor://ðŸ’»app/lib/common.js","meteor://ðŸ’»app/lib/media.js","meteor://ðŸ’»app/lib/news.js","meteor://ðŸ’»app/lib/product.js","meteor://ðŸ’»app/lib/products.js","meteor://ðŸ’»app/lib/recipes-data.js","meteor://ðŸ’»app/lib/router.js","meteor://ðŸ’»app/lib/seller.js"],"names":["Template","tmp_product_maintain","helpers","create","console","log","rendered","destroyed","events","event","template","ImageId","currentTarget","attributes","value","imageFile","Images","find","_id","remove","alert","activity","onRendered","self","Router","current","params","activityId","data","$activity","$","firstNode","top","offset","$parent","closest","parentTop","scrollTop","firstName","userName","split","recipeTitle","RecipesData","recipeName","title","path","name","query","admin","isAdmin","Meteor","user","latestNews","News","latest","preventDefault","text","target","val","insert","date","Date","loginWithTwitter","ANIMATION_DURATION","NOTIFICATION_TIMEOUT","MENU_KEY","IGNORE_CONNECTION_ISSUE_KEY","CONNECTION_ISSUE_TIMEOUT","Session","setDefault","nextInitiator","initiator","Deps","autorun","notifications","Mongo","Collection","appBody","addNotification","notification","id","setTimeout","startup","document","body","touchwipe","wipeLeft","set","wipeRight","preventDefaultEvents","dataReadyHold","release","_uihooks","insertElement","node","next","insertBefore","start","Velocity","hook","velocity","translateX","duration","easing","queue","removeElement","end","complete","menuOpen","get","overlayOpen","Overlay","isOpen","connected","status","stopImmediatePropagation","history","back","isCordova","window","open","href","_","isFunction","callback","authOverlay","onCreated","userId","close","logout","go","loginStyle","trimInput","replace","isValidPassword","length","isValidEmail","re","RegExp","test","customLogin","e","t","Loading","emailadd","password","email","result","loginWithPassword","err","stop","authOverlaySignup","SignUp","passwordr","Accounts","createUser","username","bookmarks","recipeCount","pluralize","carousel","wipeUp","wipeDown","FEATURED_COUNT","home","featuredRecipes","recipes","values","selection","i","push","splice","random","featuredProducts","subscribe","Products","limit","sort","createdAt","activities","Activities","login","services","_loginButtons","getLoginServices","nav","$nav","siblings","children","first","waypoint","direction","toggleClass","context","state","initial","TEMPLATE_KEY","DATA_KEY","equals","overlay","done","$node","hide","productItem","highlightedClass","size","bookmarkCount","count","getImage","imgid","findOne","getFirstElement","arr","Array","TAB_KEY","product","getProduct","loading","instance","setTab","tab","lastTab","fromProduct","toProduct","isActiveTab","thisProductImages","imageId","ProductImgs","activeTabClass","bookmarked","productData","call","stopPropagation","_searchTerm","products","latestProducts","searchTerm","escape","$or","producttitle","$regex","$options","productDescription","homeProducts","productTitle","recipeItem","recipe","BookmarkCounts","fromRecipe","toRecipe","include","bookmarkedRecipeNames","QuickSearch","searchValue","route","SellerProducts_tmp","error","Seller_tmp","amISeller","businessname","busTagLine","busLogo","busAvatar","bustel","buscel","busemail","cont1","cont2","add1","add2","add3","add4","add5","website","Sellers","seller","tmp_product_sell","fr","FileReader","getElementById","innerHTML","fileCount","files","isToBig","uploadSize","HandleClientImageFile","onload","src","readAsDataURL","businesstagLine","imgBusLogo","bustell","buscell","person1","person2","busLogoFile","fileLogo","randLogoId","Random","buslogImdId","BuslogoImg","FS","File","sellerId","ImageCat","ImageType","fileObj","createDate","now","toLocaleString","currentuser","SellerObj","exp","file","targetElement","preview","querySelector","insertImg","Image","className","image","compressedImage","canvas","createElement","width","naturalWidth","height","naturalHeight","ctx","getContext","drawImage","compressValue","toDataURL","newImg","appendChild","compressImage","source_img_obj","quality","output_format","mime_type","result_image_obj","cvs","style","newImageData","HandleClientImageData","isClient","thisForm","validate","productImages","prodImg","compressedImages","prodimgId","saveId","productImg","extension","type","halt","ImagesInserted","prdTitle","description","prdDesc","img","price","prdprice","prdCat","expireValue","prdExpire","expireDate","timetoadd","ReferenceData","expDate","myExpDate","prodObj","expireAt","TWEETING_KEY","IMAGE_KEY","shareOverlay","attachedImage","avatar","twitter","profile_image_url_https","tweeting","MeteorCamera","getPicture","reason","is","tweet","Geolocation","currentLocation","action","showImage","getSellerImage","getProdCardImage","imgId","getCarouselCardImage","ticker","EthTools","getAllTickers","feed","ready","feedSubscription","jic","compress","upload","compressed_img_obj","upload_url","file_input_name","filename","successCallback","errorCallback","duringCallback","customHeaders","XMLHttpRequest","prototype","sendAsBinary","undefined","string","bytes","map","c","charCodeAt","send","Uint8Array","buffer","substr","toLowerCase","xhr","boundary","setRequestHeader","headerKey","Function","onprogress","evt","lengthComputable","loaded","total","atob","join","onreadystatechange","readyState","responseText","s","r","n","exports","o","l","m","d","Object","defineProperty","configurable","enumerable","__esModule","default","hasOwnProperty","p","arguments","from","querySelectorAll","isArray","forEach","rate","a","dimension","dimen","addEventListener","download","imagePrefix","click","assign","f","inputSelector","dropSelector","rateSelector","parseInt","emit","downloadSelector","u","on","imageSelector","options","Compress","Symbol","iterator","constructor","eval","dataTransfer","apply","concat","TypeError","writable","key","_events","lazyLoadImages","require","init","fn","settings","config","min_move_x","min_move_y","extend","each","startX","startY","isMoving","cancelTouch","removeEventListener","onTouchMove","x","touches","pageX","y","pageY","dx","dy","Math","abs","onTouchStart","documentElement","jQuery","debug","warn","validator","attr","onsubmit","validateDelegate","submitHandler","submitButton","hasClass","cancelSubmit","submit","handle","hidden","appendTo","currentForm","form","pendingRequest","formSubmitted","focusInvalid","valid","element","removeAttrs","$element","index","removeAttr","rules","command","argument","staticRules","existingRules","normalizeRule","messages","filtered","method","normalizeRules","classRules","attributeRules","dataRules","required","param","expr","blank","trim","filled","unchecked","prop","defaults","format","source","args","makeArray","unshift","slice","groups","errorClass","validClass","errorElement","errorContainer","errorLabelContainer","ignore","ignoreTitle","onfocusin","lastActive","focusCleanup","blockFocusCleanup","unhighlight","addWrapper","errorsFor","onfocusout","checkable","submitted","optional","onkeyup","which","elementValue","lastElement","onclick","parentNode","highlight","findByName","addClass","removeClass","setDefaults","remote","url","dateISO","number","digits","creditcard","equalTo","maxlength","minlength","rangelength","range","max","min","autoCreateRanges","labelContainer","errorContext","containers","add","valueCache","pending","invalid","reset","delegate","eventType","invalidHandler","bind","checkForm","errorMap","triggerHandler","showErrors","prepareForm","elements","currentElements","check","validationTargetFor","clean","prepareElement","numberOfInvalids","toHide","errors","errorList","message","successList","grep","defaultShowErrors","resetForm","hideErrors","removeData","objectLength","obj","findLastActive","filter","focus","trigger","rulesCache","not","selector","toShow","dependencyMismatch","rule","parameters","methods","formatAndAdd","customDataMessage","customMessage","String","findDefined","defaultMessage","theregex","toToggle","wrapper","parent","showLabel","success","validElements","show","invalidElements","label","html","idOrName","wrap","append","errorPlacement","insertAfter","getLength","nodeName","depend","dependTypes","startRequest","stopRequest","previousValue","old","classRuleSettings","addClassRules","classes","getAttribute","Number","depends","keepRule","parameter","parts","transformed","addMethod","toString","nCheck","nDigit","bEven","cDigit","charAt","unbind","previous","originalMessage","ajax","mode","port","dataType","response","pendingRequests","ajaxPrefilter","abort","ajaxSettings","handler","thing","plural","isUndefined","hash","wordOnly","Handlebars","registerHelper","DIMENSIONS","small","large","full","UI","imageName","str","objCol","NaN","someObject","ImgId","returnimgs","v1","v2","isEqual","someArr","option","pathing","fileSavePath","refName","refData","imagename","routeNames","usedId","isServer","geoLocation","refDatas","prodData","prod","busCat","businessag","office","cell","contact1","contact2","logoImg","ISODate","allow","doc","createActivity","loc","Boolean","Match","OneOf","userAvatar","profile","isSimulation","place","getLocationPlace","tweetActivity","twitterOauth","userConfig","consumer_key","consumerKey","consumer_secret","secret","token","accessToken","token_secret","accessTokenSecret","appendTweet","MAX","substring","HTTP","post","media","npmRequestOptions","oauth","statusCode","Error","attachment","media_ids","media_id_string","coords","accuracy","latitude","longitude","places","place_type","full_name","affected","users","update","$ne","$addToSet","$inc","$pull","newRandomId","prefixStr","rnd","jsWriteFile","fbinaryData","fs","Npm","base64Image","binaryData","Buffer","pathtoFile","rootPath","strPath","imagePath","writeFileName","exists","writeFile","saveImageFile","getReferenceData","addTime","imageStore","Store","FileSystem","chunkSize","maxTries","stores","getProductImages","prodImages","returnImages","Product","order","results","productObj","newProd","ProdImgs","productResult","upsert","$set","MyProducts","SellerID","more","continuationValue","featuredProductsLimit","prodresult","Results","prodid","sell","returnStubValue","prodImgs","searchItem","searchTerms","prods","allProducts","prodId","bookedMarked","SellerId","skip","createProduct","prodCat","ProdInsert","thisCurrentProduct","configure","layoutTemplate","notFoundTemplate","LaunchScreen","hold","ProductsController","RouteController","onBeforeAction","FeedController","RecipesController","BookmarksController","pick","RecipeController","ProductController","sessionStorage","removeItem","currentProduct","wrapAsync","getThisProdData","retProd","returnProd","repro","wait","SellerController","EditProductController","AdminController","HomeController","controller","only","SellerResult","sellerObj","sellerResult","allSellers"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"/app.js","sourcesContent":["Template.tmp_product_maintain.helpers({ \n    create: function() { \n         console.log(\"Maintain Created\");\n    }, \n    rendered: function() { \n        console.log(\"Maintain rendered\");\n    }, \n    destroyed: function() { \n        console.log(\"Maintain destroyed\");\n    }, \n}); \n\nTemplate.tmp_product_maintain.events({ \n    'click .deleteImg': function(event, template) { \n\n        var ImageId = event.currentTarget.attributes['imgid'].value;\n        imageFile = Images.find({_id:ImageId});  \n        Images.remove({_id:ImageId});\n          \n    },\n    'click .updateRec': function(event,template){\n        alert('update the record')\n    } \n}); \n","Template.activity.onRendered(function() {\n  var self = this;\n\n  // If the activity is in a list, scroll it into view. Note, we can't just use\n  // element.scrollIntoView() because it attempts to scroll in the X direction\n  // messing up our animations\n  if (Router.current().params.activityId === self.data._id) {\n    var $activity = $(self.firstNode);\n    var top = $activity.offset().top;\n    var $parent = $(self.firstNode).closest('.content-scrollable');\n    var parentTop = $parent.offset().top;\n    $parent.scrollTop(top - parentTop);\n  }\n});\n\nTemplate.activity.helpers({\n  firstName: function() {\n    return this.userName.split(' ')[0];\n  },\n  recipeTitle: function() {\n    return RecipesData[this.recipeName].title;\n  },\n  path: function() {\n    return Router.path('recipe', { name: this.recipeName },\n      { query: { activityId: this._id } })\n  }\n})\n","Template.admin.helpers({\n  isAdmin: function() {\n    return Meteor.user() && Meteor.user().admin;\n  },\n  \n  latestNews: function() {\n    return News.latest();\n  }\n});\n\nTemplate.admin.events({\n  'submit form': function(event) {\n    event.preventDefault();\n\n    var text = $(event.target).find('[name=text]').val();\n    News.insert({ text: text, date: new Date });\n\n    alert('Saved latest news');\n  },\n  \n  'click .login': function() {\n    Meteor.loginWithTwitter();\n  }\n})","var ANIMATION_DURATION = 300;\nvar NOTIFICATION_TIMEOUT = 3000;\nvar MENU_KEY = 'menuOpen';\nvar IGNORE_CONNECTION_ISSUE_KEY = 'ignoreConnectionIssue';\nvar CONNECTION_ISSUE_TIMEOUT = 5000;\n\nSession.setDefault(IGNORE_CONNECTION_ISSUE_KEY, true);\nSession.setDefault(MENU_KEY, false);\n\n// XXX: this work around until IR properly supports this\n//   IR refactor will include Location.back, which will ensure that initator is\n//   set \nvar nextInitiator = null, initiator = null;\nDeps.autorun(function() {\n  // add a dep\n  Router.current();\n  \n  initiator = nextInitiator;\n  nextInitiator = null;\n});\n\nvar notifications = new Mongo.Collection(null);\n\nTemplate.appBody.addNotification = function(notification) {\n  var id = notifications.insert(notification);\n\n  Meteor.setTimeout(function() {\n    notifications.remove(id);\n  }, NOTIFICATION_TIMEOUT);\n} \n\nMeteor.startup(function () {\n  // set up a s  left / right handler\n  $(document.body).touchwipe({ \n    wipeLeft: function () {\n      Session.set(MENU_KEY, false);\n    },\n    wipeRight: function () {\n      Session.set(MENU_KEY, true);\n    },\n    preventDefaultEvents: false\n  });\n\n  // Only show the connection error box if it has been 5 seconds since\n  // the app started\n  setTimeout(function () {\n    // Launch screen handle created in lib/router.js\n    dataReadyHold.release();\n\n    // Allow the connection error box to be shown if there is an issue\n    Session.set(IGNORE_CONNECTION_ISSUE_KEY, false);\n  }, CONNECTION_ISSUE_TIMEOUT);\n});\n\nTemplate.appBody.onRendered(function() {\n  this.find(\"#content-container\")._uihooks = {\n    insertElement: function(node, next) {\n      // short-circuit and just do it right away\n      if (initiator === 'menu')\n        return $(node).insertBefore(next);\n\n      var start = (initiator === 'back') ? '-100%' : '100%';\n\n      $.Velocity.hook(node, 'translateX', start);\n      $(node)\n      .insertBefore(next)\n      .velocity({translateX: [0, start]}, {\n        duration: ANIMATION_DURATION,\n        easing: 'ease-in-out',\n        queue: false\n      });\n    },\n    removeElement: function(node) {\n      if (initiator === 'menu')\n        return $(node).remove();\n\n      var end = (initiator === 'back') ? '100%' : '-100%';\n\n      $(node)\n      .velocity({translateX: end}, {\n        duration: ANIMATION_DURATION,\n        easing: 'ease-in-out',\n        queue: false,\n        complete: function() {\n          $(node).remove();\n        }\n      });\n    }\n  };\n\n  this.find(\".notifications\")._uihooks = {\n    insertElement: function(node, next) {\n      $(node)\n      .insertBefore(next)\n      .velocity(\"slideDown\", { \n        duration: ANIMATION_DURATION, \n        easing: [0.175, 0.885, 0.335, 1.05]\n      });\n    },\n    removeElement: function(node) {\n      $(node)\n      .velocity(\"fadeOut\", {\n        duration: ANIMATION_DURATION,\n        complete: function() {\n          $(node).remove();\n        }\n      });\n    }\n  };\n});\n\n\nTemplate.appBody.helpers({\n  menuOpen: function() {\n    return Session.get(MENU_KEY) && 'menu-open';\n  },\n  \n  overlayOpen: function() {\n    return Overlay.isOpen() ? 'overlay-open' : '';\n  },\n  \n  connected: function() {\n    return Session.get(IGNORE_CONNECTION_ISSUE_KEY) ||\n      Meteor.status().connected;\n  },\n  \n  notifications: function() {\n    return notifications.find();\n  }\n});\n\nTemplate.appBody.events({\n  'click .js-menu': function(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n    Session.set(MENU_KEY, ! Session.get(MENU_KEY));\n  },\n\n  'click .js-back': function(event) {\n    nextInitiator = 'back';\n    \n    // XXX: set the back transition via Location.back() when IR 1.0 hits\n    history.back();\n    event.stopImmediatePropagation();\n    event.preventDefault();\n  },\n  \n  'click a.js-open': function(event) {\n    // On Cordova, open links in the system browser rather than In-App\n    if (Meteor.isCordova) {\n      event.preventDefault();\n      window.open(event.target.href, '_system');\n    }\n  },\n\n  'click .content-overlay': function(event) {\n    Session.set(MENU_KEY, false);\n    event.preventDefault();\n  },\n\n  'click #menu a': function(event) {\n    nextInitiator = 'menu'\n    Session.set(MENU_KEY, false);\n  },\n  \n  'click .js-notification-action': function() {\n    if (_.isFunction(this.callback)) {\n      this.callback();\n      notifications.remove(this._id);\n    }\n  }\n});\n","// If the auth overlay is on the screen but the user is logged in,\n//   then we have come back from the loginWithTwitter flow,\n//   and the user has successfully signed in.\n//\n// We have to use an autorun for this as callbacks get lost in the\n//   redirect flow.\nTemplate.authOverlay.onCreated(function() {\n  this.autorun(function() {\n    if (Meteor.userId()  && Overlay.template() === 'authOverlay')\n    {\n      \n      //Router.go(\"/\");\n      Overlay.close();\n    }\n  });\n});\n\nTemplate.logout.events({\n  'click .btnLogout' : function(){\n    Meteor.logout();\n    Router.go(\"/\");\n  },\n  'click .btnCancel' : function(){\n    Router.go(\"/\");\n  }\n});\n\nTemplate.authOverlay.events({\n  'click .js-signin': function() {\n    Meteor.loginWithTwitter({loginStyle: 'redirect'});\n  }\n});\nvar trimInput = function(val) {\n  return val.replace(/^\\s*|\\s*$/g, \"\");\n};\nvar isValidPassword = function(val) {\n  return val.length >= 6 ? true : false; \n}\nvar isValidEmail = function(val) {\n  var re = new RegExp('/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/');\n\n  var isValidEmail = re.test(val) ===null?false:true;\n  \n  return isValidEmail;\n}\n\nTemplate.customLogin.events({\n  'click #btnLogin':function(e,t)\n  {\n    e.preventDefault();\n    Loading.start();\n \n    var emailadd = t.$(\"#emailAddress\").val() ;\n    var password =t.$(\"#password\").val();\n    email = trimInput(emailadd);\n    password = trimInput(password);\n    var result = false;\n   if (isValidEmail(email) && isValidPassword(password))\n   {\n     result = true;\n\n   }\n    if (result)\n    {\n      \n      Meteor.loginWithPassword(email, password, function(err){\n        if (err)\n        {}\n          // The user might not have been found, or their passwword\n          // could be incorrect. Inform the user that their\n          // login attempt has failed. \n        else\n        {\n          Router.go(\"/\");\n        }\n          // The user has been logged in.\n      });\n     \n    }\n    else\n    {\n      alert(\"Invlaid email and Password\");\n      \n    }\n    Loading.stop();\n  } ,\n  'click .btnCancel' : function(){\n    Router.go(\"/\");\n  }\n\n});\nTemplate.customLogin.events({\n  'click .bSignup' : function(e,t) {   \n    Router.go(\"/signup\");\n  }\n});\nTemplate.authOverlay.rendered = function()\n{\n    console.log(\"rendering login\");\n   //alert('Template Login redered');\n \n    \n   \n   \n   // Accounts._loginButtons.data-toggle = \"tab\";\n};\n\n\n// Accounts.ui.config({\n//   requestPermissions: {\n//     facebook: ['user_likes'],\n//     github: ['user', 'repo']\n//   },\n//   requestOfflineToken: {\n//     google: true\n//   },\n//   passwordSignupFields: 'USERNAME_AND_OPTIONAL_EMAIL'\n// });","// If the auth overlay is on the screen but the user is logged in,\n//   then we have come back from the loginWithTwitter flow,\n//   and the user has successfully signed in.\n//\n// We have to use an autorun for this as callbacks get lost in the\n//   redirect flow.\nTemplate.authOverlaySignup.onCreated(function() {\n  this.autorun(function() {\n    if (Meteor.userId()  && Overlay.template() === 'authOverlaySignup')\n    {\n      \n      //Router.go(\"/\");\n      Overlay.close();\n    }\n  });\n});\n\n \n\nTemplate.authOverlaySignup.events({\n  'click .js-signin': function() {\n    Meteor.loginWithTwitter({loginStyle: 'redirect'});\n  }\n});\nvar trimInput = function(val) {\n  return val.replace(/^\\s*|\\s*$/g, \"\");\n};\nvar isValidPassword = function(val) {\n  return val.length >= 6 ? true : false; \n}\nvar isValidEmail = function(val) {\n  var re = new RegExp('/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/');\n\n  var isValidEmail = re.test(val) ===null?false:true;\n  \n  return isValidEmail;\n}\n\nTemplate.SignUp.events({\n  'click .btnSignup':function(e,t)\n  {\n    e.preventDefault();\n    Loading.start();\n \n    var emailadd = t.$(\"#signupEmail\").val() ;\n    var password =t.$(\"#signupPassword\").val();\n    var passwordr =t.$(\"#signupRPassword\").val();\n    email = trimInput(emailadd);\n    password = trimInput(password);\n    passwordr = trimInput(passwordr);\n    var result = false;\n   if (isValidEmail(email) && isValidPassword(password) && password == passwordr )\n   {\n     result = true;\n\n   }\n    if (result)\n    {\n      Accounts.createUser({\n        email: email,\n        username:email,\n        password: password\n            });\n      Meteor.loginWithPassword(email, password, function(err){\n        if (err)\n        {\n            alert('could not be logged in now.')\n        }\n       \n        else\n        {\n          Router.go(\"/\");\n        }\n          // The user has been logged in.\n      });\n     \n    }\n    else\n    {\n      alert(\"Invlaid email and Password\");\n      \n    }\n    Loading.stop();\n  }\n  \n\n});\n\nTemplate.SignUp.events({\n  'click .bLogin' : function(e,t) {\n    Router.go(\"/login\");\n  },\n  'click .btnCancel' : function(){\n    Router.go(\"/\");\n  }\n});\n\n\nTemplate.authOverlaySignup.rendered = function()\n{\n    console.log(\"rendering login\");\n   //alert('Template Login redered');\n \n    \n   \n   \n   // Accounts._loginButtons.data-toggle = \"tab\";\n};\n\n\n// Accounts.ui.config({\n//   requestPermissions: {\n//     facebook: ['user_likes'],\n//     github: ['user', 'repo']\n//   },\n//   requestOfflineToken: {\n//     google: true\n//   },\n//   passwordSignupFields: 'USERNAME_AND_OPTIONAL_EMAIL'\n// });","Template.bookmarks.helpers({\n  recipeCount: function() {\n    return pluralize(this.length, 'recipe');\n  }\n});","Template.bookmarks.helpers({\n  recipeCount: function() {\n    return pluralize(this.length, 'recipe');\n  }\n});","Template.carousel.onRendered(function () {\n   \n    Loading.start();\n    \n    this.$('#Caro').touchwipe({\n      wipeUp: function () {\n          \n        $('#Caro').carousel('prev');\n      },\n      preventDefaultEvents: false\n    });\n    this.$('#CaroImg').touchwipe({\n      wipeDown: function () {\n        $('#Caro').carousel('next');\n      },\n      preventDefaultEvents: false\n    });\n\n\n    Loading.stop();\n  });","var FEATURED_COUNT = 4;\n\nTemplate.home.helpers({\n  // selects FEATURED_COUNT number of recipes at random\n  featuredRecipes: function() {\n    var recipes = _.values(RecipesData);\n    var selection = [];\n    \n    for (var i = 0;i < FEATURED_COUNT;i++)\n    {\n      selection.push(recipes.splice(_.random(recipes.length - 1), 1)[0]);\n    }\n    return selection;\n  },\n  featuredProducts:function(){\n      console.log(\"Featured Products\");\n      //let wrappedAsyncFunction = Loading.wrapAsync(someAsyncFunction);\n      Meteor.subscribe('featuredProducts');\n      return Products.find({},{limit:FEATURED_COUNT,sort:{createdAt:-1}});\n       \n        }\n  ,\n  \n  activities: function() {\n    return Activities.latest();\n  },\n  \n  latestNews: function() {\n    return News.latest();\n  }\n});","Template.login.events({\n    'click #logout-button': function() {\n      Meteor.logout();\n    }\n  });\n\n  Template.login.helpers({\n    services: function() {\n      return Accounts._loginButtons.getLoginServices();\n    }\n  });\n  \n  // Template.login.service = function()\n  // {\n  //     //returns an array like [{name: 'facebook'}];\n  //     return getLoginServices();\n  // }","Template.nav.onRendered(function() {\n  var $nav = this.$('nav');\n  $nav.siblings('.content-scrollable:not(.static-nav)').children().first().waypoint(function(direction) {\n    $nav.toggleClass('scrolled', direction === 'down');\n  }, {\n    context: '.content-scrollable',\n    offset: -200\n  });\n});\n\nTemplate.nav.helpers({\n  // Iron Router stores {initial: true} in history state if this is\n  // the first route that we hit in an app. There are a variety of \n  // unexpected ways that this can happen (for example oauth, or \n  // hot code push), but we can't rely on going back in such cases.\n  back: function () {\n    return this.back && ! history.state.initial;\n  }\n});\n","var TEMPLATE_KEY = 'overlayTemplate';\nvar DATA_KEY = 'overlayData';\nvar ANIMATION_DURATION = 200;\n\nSession.setDefault(TEMPLATE_KEY, null);\n\nOverlay = {\n  open: function(template, data) {\n    Session.set(TEMPLATE_KEY, template);\n    Session.set(DATA_KEY, data);\n  },\n  close: function() {\n    Session.set(TEMPLATE_KEY, null);\n    Session.set(DATA_KEY, null);\n  },\n  isOpen: function() {\n    return ! Session.equals(TEMPLATE_KEY, null);\n  },\n  template: function () {\n    return Session.get(TEMPLATE_KEY);\n  },\n  data: function () {\n    return Session.get(DATA_KEY);\n  }\n}\n\nTemplate.overlay.onRendered(function() {\n  this.find('#overlay-hook')._uihooks = {\n    insertElement: function(node, next, done) {\n      var $node = $(node);\n\n      $node\n      .hide()\n      .insertBefore(next)\n      .velocity('fadeIn', {\n        duration: ANIMATION_DURATION\n      });\n    },\n    removeElement: function(node, done) {\n      var $node = $(node);\n\n      $node\n      .velocity(\"fadeOut\", {\n        duration: ANIMATION_DURATION,\n        complete: function() {\n          $node.remove();\n        }\n      });\n    }\n  }\n});\n\nTemplate.overlay.helpers({\n  template: function() {\n    return Overlay.template();\n  },\n  \n  data: function() {\n    return Overlay.data();\n  }\n});\n\nTemplate.overlay.events({\n  'click .js-close-overlay': function(event) {\n    event.preventDefault();\n    Overlay.close()\n  }\n});\n","Template.productItem.helpers({\n    path: function () {\n      return Router.path('product', this._id);\n    },\n    \n    highlightedClass: function () {\n      if (this.size === 'large')\n        return 'highlighted';\n    },\n    \n    bookmarkCount: function () {\n      var count =  1;//BookmarkCounts.find({}).count());\n      return count && count.count;\n    },\n    getImage: function(imgid) {         \n      return Images.findOne({ImageId:imgid});         \n    },\n    getFirstElement:function(arr)\n    {\n      if ( arr == 'undefined')\n      {return null};\n      if (arr instanceof Array)\n      {\n        return arr[0];\n      }\n       \n      //return str;\n\n\n\n       \n    },\n\n    \n  });\n\n   ","var TAB_KEY = 'productShowTab';\n\nTemplate.product.helpers({ \n  getProduct: function(id) { \n    loading.start();\n    \n    var result = Template.instance.data.Products;\n    //var result = Meteor.apply('getProduct',[id],{wait:true});\n    loading.stop();\n     return result;\n  } \n});\n// Template.product.helpers({\n//   thisSelectedProduct : function(){\n//     var self = this;\n//     try {\n//         var result;\n//         result = Session.get(\"currentProduct\");//Products.find({_id:Router.current().params._id});\n//         return result;\n//     } catch (error) {\n      \n//     }\n    \n    \n//   }\n\n// });\n\nTemplate.product.onCreated(function() {\n    // console.log(\"Create Product template\");\n    // console.log(\"parameter Id \" + Router.current().params._id);\n    var self = this;\n \n    Loading.start();\n    \n  if (Router.current().params._id)\n    Template.product.setTab('feed');\n  else\n    Template.product.setTab('product');\n});\n\nTemplate.product.onRendered(function () {\n   \n  Loading.stop();\n  this.$('.product').touchwipe({\n    wipeDown: function () {\n      if (Session.equals(TAB_KEY, 'product'))\n        Template.productItem.setTab('show')\n    },\n    preventDefaultEvents: false\n  });\n  this.$('.attribution-product').touchwipe({\n    wipeUp: function () {\n      if (! Session.equals(TAB_KEY, 'product'))\n        Template.productItem.setTab('product')\n    },\n    preventDefaultEvents: false\n  });\n});\n\n\n\n// CSS transitions can't tell the difference between e.g. reaching\n//   the \"make\" tab from the expanded state or the \"feed\" tab\n//   so we need to help the transition out by attaching another\n//   class that indicates if the feed tab should slide out of the\n//   way smoothly, right away, or after the transition is over\nTemplate.product.setTab = function(tab) {\n    var lastTab = Session.get(TAB_KEY);\n    Session.set(TAB_KEY, tab);\n    \n    var fromProduct = (lastTab === 'product') && (tab !== 'product');\n    $('.feed-scrollable').toggleClass('instant', fromProduct);\n  \n    var toProduct = (lastTab !== 'product') && (tab === 'product');\n    $('.feed-scrollable').toggleClass('delayed', toProduct);\n  }\n  \n  Template.product.helpers({\n    isActiveTab: function(name) {\n      return Session.equals(TAB_KEY, name);\n    },\n    thisProductImages:function(imageId){\n      console.log(\"Searching for imageid : \" + imageId + \" -  Image Count : \" + Images.count);\n      Meteor.subscribe('ProductImages', imageId)\n      //Loading.start();\n      var ProductImgs = Images.find({});\n      //Loading.stop();\n \n      return ProductImgs;\n    },\n    activeTabClass: function() {\n      return Session.get(TAB_KEY);\n    },\n    bookmarked: function() {\n      return Meteor.user() ;//&& _.include(Meteor.user().bookmarkedRecipeNames, this.name);\n    },\n    activities: function() {\n      return Activities.find({recipeName: this.name}, {sort: {date: -1}});\n    },\n    productData: function() {\n        //console.log(\"Router data \" + Template.instance().data[0]);\n        return Template.instance().data[0];\n    }\n  });\n  \n  Template.product.events({\n    'click .js-add-bookmark': function(event) {\n      event.preventDefault();\n  \n      if (! Meteor.userId())\n        return Overlay.open('authOverlay');\n      \n      Meteor.call('bookmarkRecipe', this.name);\n    },\n  \n    'click .js-remove-bookmark': function(event) {\n      event.preventDefault();\n  \n      Meteor.call('unbookmarkRecipe', this.name);\n    },\n    \n    'click .js-show-recipe': function(event) {\n      event.stopPropagation();\n      Template.product.setTab('make')\n    },\n    \n    'click .js-show-feed': function(event) {\n      event.stopPropagation();\n      Template.product.setTab('feed')\n    },\n    \n    'click .js-uncollapse': function() {\n      Template.product.setTab('recipe')\n    },\n  \n    'click .js-share': function() {\n      Overlay.open('shareOverlay', this);\n    }\n  });\n  ","var TAB_KEY = 'productShowTab';\n\nTemplate.product.onCreated(function() {\n  //debugger;\n  if (Router.current().params._searchTerm)\n\n    Template.product.setTab('feed');\n  else\n    Template.product.setTab('product');\n});\n\nTemplate.product.onRendered(function () {\n  // this.$('.product').touchwipe({\n  //   wipeDown: function () {\n  //     if (Session.equals(TAB_KEY, 'product'))\n  //       Template.product.setTab('show')\n  //   },\n  //   preventDefaultEvents: false\n  // });\n  // this.$('.attribution-product').touchwipe({\n  //   wipeUp: function () {\n  //     if (! Session.equals(TAB_KEY, 'product'))\n  //       Template.product.setTab('product')\n  //   },\n  //   preventDefaultEvents: false\n  // });\n});\n\n// CSS transitions can't tell the difference between e.g. reaching\n//   the \"make\" tab from the expanded state or the \"feed\" tab\n//   so we need to help the transition out by attaching another\n//   class that indicates if the feed tab should slide out of the\n//   way smoothly, right away, or after the transition is over\nTemplate.product.setTab = function(tab) {\n  var lastTab = Session.get(TAB_KEY);\n  Session.set(TAB_KEY, tab);\n  \n  var fromProduct = (lastTab === 'product') && (tab !== 'product');\n  $('.feed-scrollable').toggleClass('instant', fromProduct);\n\n  var toProduct = (lastTab !== 'product') && (tab === 'product');\n  $('.feed-scrollable').toggleClass('delayed', toProduct);\n}\n\nTemplate.product.helpers({\n  isActiveTab: function(name) {\n    return Session.equals(TAB_KEY, name);\n  },\n  activeTabClass: function() {\n    return Session.get(TAB_KEY);\n  },\n  bookmarked: function() {\n    return true;//Meteor.user() && _.include(Meteor.user().bookmarkedRecipeNames, this.name);\n  },\n  activities: function() {\n    return Activities.find({recipeName: this.name}, {sort: {date: -1}});\n  }\n});\n\nTemplate.product.events({\n  'click .js-add-bookmark': function(event) {\n    event.preventDefault();\n\n    if (! Meteor.userId())\n      return Overlay.open('authOverlay');\n    \n    Meteor.call('bookmarkRecipe', this.name);\n  },\n\n  'click .js-remove-bookmark': function(event) {\n    event.preventDefault();\n\n    Meteor.call('unbookmarkRecipe', this.name);\n  },\n  \n  'click .js-show-product': function(event) {\n    event.stopPropagation();\n    Template.product.setTab('show')\n  },\n  \n  'click .js-show-feed': function(event) {\n    event.stopPropagation();\n    Template.product.setTab('feed')\n  },\n  \n  'click .js-uncollapse': function() {\n    Template.product.setTab('product')\n  },\n\n  'click .js-share': function() {\n    Overlay.open('shareOverlay', this);\n  }\n});\n\n\n\n\n\n \n  \n  Template.products.helpers({\n    firstName: function() {\n      return this.userName.split(' ')[0];\n    },\n    latestProducts : function()\n    {//({done: false},{order: {status: 1}, limit: 5});\n      //return Products.find({},{sort:{createdAt:-1}});\n      Loading.start();\n      var query =false;\n      if(Router.current().params.searchTerm)\n      {\n       query = RegExp.escape(Router.current().params.searchTerm)  ;\n      }\n      var result ={};\n      if (query && query != \"\")\n      {\n        result = Products.find({$or:[{producttitle:{ $regex: query, $options: 'i' },productDescription:{ $regex: query, $options: 'i' }}]},{sort:{createdAt:-1}});    \n  \n\n      }\n      else\n      {\n        result = Products.find({},{sort:{createdAt:-1}});\n    \n      }\n      Loading.stop();\n      return result;\n    },\n    homeProducts : function()\n    {\n      return Products.find({},{sort:{createdAt:-1},limit:4});\n    },\n    productTitle: function() {\n      return \"\";//RecipesData[this.recipeName].title;\n    },\n    path: function() {\n      return Router.path('product', { id: this._id },\n        { query: { _id: this._id } })\n    }\n  })\n\n  \n","Template.recipeItem.helpers({\n  path: function () {\n    return Router.path('recipe', this.recipe);\n  },\n  \n  highlightedClass: function () {\n    if (this.size === 'large')\n      return 'highlighted';\n  },\n  \n  bookmarkCount: function () {\n    var count = BookmarkCounts.findOne({recipeName: this.name});\n    return count && count.count;\n  }\n});","var TAB_KEY = 'recipeShowTab';\n\nTemplate.recipe.onCreated(function() {\n  if (Router.current().params.activityId)\n    Template.recipe.setTab('feed');\n  else\n    Template.recipe.setTab('recipe');\n});\n\nTemplate.recipe.onRendered(function () {\n  this.$('.recipe').touchwipe({\n    wipeDown: function () {\n      if (Session.equals(TAB_KEY, 'recipe'))\n        Template.recipe.setTab('make')\n    },\n    preventDefaultEvents: false\n  });\n  this.$('.attribution-recipe').touchwipe({\n    wipeUp: function () {\n      if (! Session.equals(TAB_KEY, 'recipe'))\n        Template.recipe.setTab('recipe')\n    },\n    preventDefaultEvents: false\n  });\n});\n\n// CSS transitions can't tell the difference between e.g. reaching\n//   the \"make\" tab from the expanded state or the \"feed\" tab\n//   so we need to help the transition out by attaching another\n//   class that indicates if the feed tab should slide out of the\n//   way smoothly, right away, or after the transition is over\nTemplate.recipe.setTab = function(tab) {\n  var lastTab = Session.get(TAB_KEY);\n  Session.set(TAB_KEY, tab);\n  \n  var fromRecipe = (lastTab === 'recipe') && (tab !== 'recipe');\n  $('.feed-scrollable').toggleClass('instant', fromRecipe);\n\n  var toRecipe = (lastTab !== 'recipe') && (tab === 'recipe');\n  $('.feed-scrollable').toggleClass('delayed', toRecipe);\n}\n\nTemplate.recipe.helpers({\n  isActiveTab: function(name) {\n    return Session.equals(TAB_KEY, name);\n  },\n  activeTabClass: function() {\n    return Session.get(TAB_KEY);\n  },\n  bookmarked: function() {\n    return Meteor.user() && _.include(Meteor.user().bookmarkedRecipeNames, this.name);\n  },\n  activities: function() {\n    return Activities.find({recipeName: this.name}, {sort: {date: -1}});\n  }\n});\n\nTemplate.recipe.events({\n  'click .js-add-bookmark': function(event) {\n    event.preventDefault();\n\n    if (! Meteor.userId())\n      return Overlay.open('authOverlay');\n    \n    Meteor.call('bookmarkRecipe', this.name);\n  },\n\n  'click .js-remove-bookmark': function(event) {\n    event.preventDefault();\n\n    Meteor.call('unbookmarkRecipe', this.name);\n  },\n  \n  'click .js-show-recipe': function(event) {\n    event.stopPropagation();\n    Template.recipe.setTab('make')\n  },\n  \n  'click .js-show-feed': function(event) {\n    event.stopPropagation();\n    Template.recipe.setTab('feed')\n  },\n  \n  'click .js-uncollapse': function() {\n    Template.recipe.setTab('recipe')\n  },\n\n  'click .js-share': function() {\n    Overlay.open('shareOverlay', this);\n  }\n});\n","Template.QuickSearch.helpers({ \n    create: function() { \n         \n    }, \n    rendered: function() { \n         \n    }, \n    destroyed: function() { \n         \n    }, \n}); \n\nTemplate.QuickSearch.events({ \n    'click #btnQSearch': function(event, template) { \n        console.log(\"Searching Quick\");\n        // debugger;\n        var searchValue = template.$('#searchTerm')[0].value;\n        \n        //alert(searchValue);\n        Router.route('pathfor products');\n        }\n    });","\n\nTemplate.SellerProducts_tmp.helpers({\n  'myProducts':function(){\n    console.log(\"This sellers products:\" + Meteor.userId());\n\n    Loading.call(\"getSellerProducts\", [], [], [], function (error, result){\n      if (error)\n      {\n        console.log(\"Error getting seller products \" + error) ;\n      }\n      else\n      {\n        // console.log(\"Got it\");\n        // console.log(result);\n        Session.set(\"SellerProducts\",result);\n      }\n    });\n    \n    \n    return Session.get(\"SellerProducts\");\n  }\n})\n\nTemplate.Seller_tmp.helpers({\n   \n    amISeller: function() {\n      if (Meteor.userId())\n\n      {\n    \n        console.log(\" Client Checking  for seller : \" + Meteor.userId());\n        Meteor.subscribe('getSeller',Meteor.userId());\n         \n        var result =  {\n          _id:\"\",\n           userId:Meteor.userId(),\n           businessname : \"\",\n           busTagLine: \"\",\n           busLogo: \"\",\n           busAvatar: \"\",\n           bustel: \"\",\n           buscel: \"\",\n           busemail: \"\",\n           cont1 : \"\",\n           cont2 : \"\",\n           add1: \"\",\n           add2: \"\",\n           add3: \"\",\n           add4: \"\",\n           add5: \"\",\n           website: \"\"\n          };\n        if (Sellers.find({userId:Meteor.userId()}).count() === 0)\n        {\n          console.log(\"Seller not found\");\n        }        \n        else\n        {\n          result = Sellers.findOne({userId:Meteor.userId()});          \n        }  \n       return result;\n         \n      }\n        \n        \n    },\n    \n});\n\nTemplate.seller.onRendered(function() {\n  console.log(\"Create Seller template\");\n  \n \n \n  \n \n  });\n\n  Template.tmp_product_sell.onRendered(function(){\n   \n     \n  });\n\n  Template.tmp_product_sell.events({\n    'change .prodImg' :function (event,template)\n    {     \n      event.preventDefault();\n      \n      var fr=new FileReader();   \n      document.getElementById('prdImages').innerHTML = \"\";\n \n      var fileCount = event.currentTarget.files.length;\n      \n      if (fileCount > 10)\n      {\n        alert('Oh No Too Many files , please select 10 or less');\n        event.currentTarget  =\"\";        \n        return false;\n      }\n      var isToBig = false;\n      var uploadSize =0;\n      for (i=0 ; i < fileCount ; i++)\n      {\n        console.log(\"Processing files \" + event.currentTarget.files[i].name);\n         //document.querySelector('imgProgress').outerHTML=\"<span>Processing file \"+ event.currentTarget.files[i].name +\"</span>\";\n         HandleClientImageFile(event.currentTarget.files[i],\"prdImages\");\n       \n      }\n\n \n      \n     event.currentTarget  = \"\";\n    \n    }\n  });\n\nTemplate.seller.events({\n   \n    'change .imgBuLogo' :function (event,template)\n    { \n     event.preventDefault();     \n        console.log('Add Seller BusLogo Upload');\n        Loading.start();\n      \n      var fr=new FileReader();        \n      fr.onload=function(event){\n              \n              var data=event.target.result;      \n              template.$('.imgBusLogo')[0].src = data;    \n      }      \n      fr.readAsDataURL(event.currentTarget.files[0]);  \n      \n      Loading.stop();\n    },\n    'change .imgAvatar' :function (event,template)\n    { \n      event.preventDefault();        \n      \n      var fr=new FileReader();        \n      fr.onload=function(event){\n              var data=event.target.result;                            \n              template.$('.imgBusAvatar')[0].src = data;          \n      }\n      if (event.currentTarget.files[0].size < 2000000)\n      {\n       fr.readAsDataURL(event.currentTarget.files[0]);          \n      }\n      else\n      {\n        template.$('.imgBusAvatar')[0].src = \"/img/app/big.jpg\";  \n      }  \n    },\n    'submit .add_Seller_form' :function (event,template)\n    {       \n      \n      event.preventDefault();\n       target = event.target;\n      //'seller.add'(excel) { \n        Loading.start();\n         businessname = target.businessname.value;\n         busTagLine= target.businesstagLine.value;\n         busLogo= target.imgBusLogo.src;\n         //busAvatar= target.imgBusAvatar.src;\n         bustel= target.bustell.value;\n         buscel= target.buscell.value;\n         busemail= target.busemail.value;\n         cont1 = target.person1.value;\n         cont2 = target.person2.value;\n         add1= target.add1.value;\n         add2= target.add2.value;\n         add3= target.add3.value;\n         add4= target.add4.value;\n         add5= target.add5.value;\n         website= target.website.value;\n\n\n         var busLogoFile = target.fileLogo.files;\n         var randLogoId = Random.id();\n         var buslogImdId = Random.id();      \n      \n         if (busLogoFile.length > 0)\n         {\n          var BuslogoImg = new FS.File(busLogoFile[0]);\n           \n            BuslogoImg.sellerId = Meteor.userId();\n            BuslogoImg.ImageCat = \"SellerDetails\";\n            BuslogoImg.ImageType = \"BusLogo\";\n            BuslogoImg.ImageId = randLogoId;\n            try {\n              Images.insert(BuslogoImg, function (err, fileObj) {\n                if (err)\n                {\n             \n                }\n                // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n              });      \n              \n            } catch (error) {\n              \n            }\n              \n           \n         }\n        \n       \n       createDate = Date.now().toLocaleString();\n\n      if (target.currentuser === null)\n      {\n          alert('You must be logged in to be a seller');\n          return false;\n      }\n     \n      var SellerObj = {\n          //_id:this._id,\n           userId:Meteor.userId(),\n           businessname : target.businessname.value,\n           busTagLine: target.businesstagLine.value,\n           busLogo: randLogoId,\n           //busAvatar: randAvaId,\n           bustel: target.bustell.value,\n           buscel: target.buscell.value,\n           busemail: target.busemail.value,\n           cont1 : target.person1.value,\n           cont2 : target.person2.value,\n           add1: target.add1.value,\n           add2: target.add2.value,\n           add3: target.add3.value,\n           add4: target.add4.value,\n           add5: target.add5.value,\n           website: target.website.value\n\n      }\n\n     // Loading.start();\n      \n  var result =  Meteor.call(\n    'newSeller',\n    SellerObj,\n    (err) =>\n            {\n                if (err)\n                {\n                    console.log(err);\n                    alert('OOps something went wrong adding new seller, please retry .');\n                }\n                else\n                {\n                    //clean up form   \n                    try\n                    {\n                    \n                    }\n                    catch (exp)\n                    {\n                        console.log(exp);\n                    }\n                }\n            });\n\n            Loading.stop();\n  \n  }\n});\n\n \n\n \n\n\n\n  \n  function HandleClientImageFile(file,targetElement)\n  {\n    var preview = document.querySelector(\"#\" + targetElement);\n    var fr = new FileReader();\n   \n    //insertImg.name=\"imgprds\";\n  \n    if (file.name === null)\n    {\n      return null;\n    }\n  \n     \n    fr.onload =function(event)\n    {\n      var data = event.target.result;\n      var insertImg = new Image();\n      insertImg.id = \"prdImages\";\n      //insertImg.style =\"height=100%;width=100%\"; \n      insertImg.className=\"prdImages img-responsive\";    \n      insertImg.src = data;\n     \n      \n\n      var image = new Image();\n      var compressedImage = new Image();\n      image.onload = function() {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = insertImg.naturalWidth;       \n        canvas.height = insertImg.naturalHeight;        \n       var ctx = canvas.getContext(\"2d\").drawImage(insertImg, 0, 0);//,insertImg.naturalWidth,insertImg.naturalHeight, 0, 0,insertImg.naturalWidth,insertImg.naturalHeight);\n       compressedImage.width =  insertImg.naturalWidth;\n       compressedImage.height = insertImg.naturalHeight;\n        var compressValue = 1/100;\n       switch(true) {\n        case (file.size < 400000):\n            compressValue = 100/100;\n            break;\n        case (file.size < 800000):\n            compressValue = 80/100;\n            break;\n        case (file.size < 2000000):\n            compressValue = 60/100;\n            break;\n        case (file.size < 4000000):\n            compressValue = 40/100;\n            break;    \n        case (file.size < 6000000):\n            compressValue = 20/100;\n            break;     \n        default:\n        compressValue = 10/100;\n        break;     \n    }\n\n       compressedImage = canvas.toDataURL(\"image/jpeg\", compressValue);\n       var newImg  = new Image(); \n        //newImg.height =1000;\n        newImg.id = \"prdImages\";\n        newImg.src = compressedImage;\n        newImg.className=\"prdImages img-responsive\"; \n        preview.appendChild(newImg); \n      };\n      image.src = data;\n\n \n\n       \n    \n    }\n  \n    fr.readAsDataURL(file);\n     \n    \n  }\n\n  function compressImage(source_img_obj, quality, output_format){\n             \n    var mime_type = \"image/jpeg\";\n    if(typeof output_format !== \"undefined\" && output_format==\"png\"){\n       mime_type = \"image/png\";\n    }\n    var result_image_obj = new Image();\n    \n    try\n    {\n    var cvs = document.createElement('canvas');\n    cvs.style.width = source_img_obj.naturalWidth;\n    cvs.style.height = source_img_obj.naturalHeight;\n \n    //ctx.drawImage(img,0,0,img.width,img.height,0,0,400,300);\n    var ctx = cvs.getContext(\"2d\").drawImage(source_img_obj, 0, 0,source_img_obj.naturalHeight,source_img_obj.naturalWidth, 0, 0,source_img_obj.naturalHeight,source_img_obj.naturalWidth);\n    var newImageData = cvs.toDataURL(mime_type, quality/100);\n    \n    result_image_obj.src = newImageData;\n    result_image_obj.style.width = source_img_obj.naturalWidth;\n    result_image_obj.style.height = source_img_obj.naturalHeight;\n    }\n    catch (exp)\n    {\n        result_image_obj = null;\n    }\n\n    return result_image_obj; \n}\n\n  function HandleClientImageData(file,targetElement)\n  {\n    var preview = document.querySelector(\"#\" + targetElement);\n     \n \n    //insertImg.name=\"imgprds\";\n  \n    if (file === null)\n    {\n      return null;\n    }\n  \n     \n    \n      var data = file;\n      var insertImg = new Image();\n      insertImg.id = \"prdImages\";\n      insertImg.style =\"height=100%;width=100%\"; \n      insertImg.className=\"prdImages img-responsive\";    \n      insertImg.src = data;    \n      preview.appendChild(insertImg);    \n    \n     \n    \n  }\n  \n  \n  \n  \n  \n  if (Meteor.isClient)\n  {\n  \n\n    \n   \n  \n  Template.tmp_product_sell.events({\n    'submit .product-link-add'(event) {\n      var thisForm = $('.product-link-add');\n      thisForm.validate();\n      event.preventDefault();\n        \n      try {\n      \n\n \n        var productImages = event.target.prodImg.files;\n        var compressedImages = $('.prdImages');\n        var prodimgId = Random.id();\n        var saveId;        \n        if (productImages.length > 0)\n        {\n          \n          for (var i =0;i < productImages.length ; i  ++)\n          {\n            var fr = new FS.File(compressedImages[i].src);\n\n             \n          \n                    Loading.start();\n                    var productImg = new FS.File(productImages[i]);\n                    fr.name = productImg.name;\n                    fr.extension = productImg.extension;\n                    fr.type = productImg.type;\n                    fr.sellerId = Meteor.userId();\n                    fr.ImageCat = \"ProductImage\";\n                    fr.ImageType = \"ProductDisplay\";\n                    fr.ImageId = prodimgId ;\n                    //template.$('.imgBusLogo')[0].src = data;    \n                    saveId = Images.insert(fr, function (err, fileObj) {\n                      // Inserted new doc with ID fileObj._id, and kicked off the data upload using HTTP\n                      });\n                      Loading.stop();         \n                  \n        }  \n        }\n        \n       \n        \n      } catch (error) {\n        console.log(\"Error inserting Product Images\");\n        Loading.halt();\n      }\n     \n      var ImagesInserted = prodimgId;\n       \n  \n      //debugger;\n      \n      const target = event.target;\n      const title = target.prdTitle.value;\n      const description = target.prdDesc.value;\n      const img = ImagesInserted;\n      const price = target.prdprice.value;\n      const prdCat = target.prdCat.value;\n      const createDate =  new Date();\n      const expireValue = target.prdExpire.value;\n      const expireDate = new Date();\n      \n       \n      console.log(description);\n  \n   \n        var timetoadd = ReferenceData.findOne({name:\"addTime\",id:expireValue}).timetoadd;\n    \n        var expDate = new Date();//Date.parse(expDate.format());// moment().add(timetoadd,'days');\n        var myExpDate =new Date();// Date.parse(expDate.format());\n  \n        var prodObj =\n        {\n          sellerId:Meteor.userId(),\n          producttitle:title,    \n          productDescription:description,\n          price:price,\n          prdCat:prdCat,\n          prodImg : img,\n          createdAt:createDate,\n          expireAt : new Date(myExpDate) \n        }\n       \n       // Here we need to get the images that have been selected to be uploaded to the server\n        \n      \n  \n        try {\n          Loading.call(\"products.insert\", prodObj, [], [], function (error, result){\n            if (error)\n            {\n              alert('Something went wrong. Please try again.')\n            }\n            else\n            {\n              //clear form.\n            }\n          });\n                   \n        } catch (error) {\n          console.log(\"Error Inserting product\");\n  \n          \n        }\n        \n   \n   \n      \n  \n    }\n  });\n  \n  }","var TWEETING_KEY = 'shareOverlayTweeting';\nvar IMAGE_KEY = 'shareOverlayAttachedImage';\n\nTemplate.shareOverlay.onCreated(function() {\n  Session.set(TWEETING_KEY, true);\n  Session.set(IMAGE_KEY, null);\n});\n\nTemplate.shareOverlay.helpers({\n  attachedImage: function() {\n    return Session.get(IMAGE_KEY);\n  },\n  \n  avatar: function() {\n    return Meteor.user().services.twitter.profile_image_url_https;\n  },\n  \n  tweeting: function() {\n    return Session.get(TWEETING_KEY);\n  }\n});\n\nTemplate.shareOverlay.events({\n  'click .js-attach-image': function() {\n    MeteorCamera.getPicture({width: 320}, function(error, data) {\n      if (error)\n        alert(error.reason);\n      else\n        Session.set(IMAGE_KEY, data);\n    });\n  },\n  \n  'click .js-unattach-image': function() {\n    Session.set(IMAGE_KEY, null);\n  },\n  \n  'change [name=tweeting]': function(event) {\n    Session.set(TWEETING_KEY, $(event.target).is(':checked'));\n  },\n  \n  'submit': function(event, template) {\n    var self = this;\n\n    event.preventDefault();\n    \n    var text = $(event.target).find('[name=text]').val();\n    var tweet = Session.get(TWEETING_KEY);\n    \n    Meteor.call('createActivity', {\n      recipeName: self.name,\n      text: text,\n      image: Session.get(IMAGE_KEY)\n    }, tweet, Geolocation.currentLocation(), function(error, result) {\n      if (error) {\n        alert(error.reason);\n      } else {\n        Template.appBody.addNotification({\n          action: 'View',\n          title: 'Your photo was shared.',\n          callback: function() {\n            Router.go('recipe', { name: self.name }, \n              { query: { activityId: result } });\n\n            Template.recipe.setTab('feed');\n          }\n        });\n      }\n    });\n\n    Overlay.close();\n  }\n});\n","Template.showImage.helpers({\n    getSellerImage: function(imgid) { \n        //console.log(\"Getting Seller images : \" + imgid);\n        var img = Images.findOne({ImageId:imgid});\n        \n        //console.log(img.getFileRecord().collection.storesLookup.images.path);\n        \n        return img;\n         \n    },\n    \n    getProdCardImage:function(imgId){\n        return Images.find({ImageId:imgId},{limit:1});\n    },\n    getCarouselCardImage:function(imgId){\n        return Images.find({ImageId:imgId});\n    },\n});","Template.ticker.helpers({ \n    create: function() { \n        \n    }, \n    rendered: function() { \n        // debugger;\n        // EthTools.ticker.start();\n    }, \n    destroyed: function() { \n        EthTools.ticker.stop();\n    }, \n    getAllTickers:function()\n    {\n    \n        //EthTools.ticker.start();\n        // var results = EthTools.ticker.find().fetch();\n        // for (var i in results)\n        // {\n        //     console.log(i + \" : \" + results[i]);\n        // }\n        //return null;\n    }\n}); \n\n \n","Template.feed.helpers({\n  activities: function() {\n    return Activities.find({}, {sort: {date: -1}});\n  },\n  ready: function() {\n    return Router.current().feedSubscription.ready();\n  }\n})","/*!\n * JIC JavaScript Library v2.0.2\n * https://github.com/brunobar79/J-I-C/\n *\n * Copyright 2016, Bruno Barbieri\n * Dual licensed under the MIT or GPL Version 2 licenses.\n *\n * Date: Tue Jul 11 13:13:03 2016 -0400\n */\n\n\n\n/**\n * Create the jic object.\n * @constructor\n */\n\nvar jic = {\n        /**\n         * Receives an Image Object (can be JPG OR PNG) and returns a new Image Object compressed\n         * @param {Image} source_img_obj The source Image Object\n         * @param {Integer} quality The output quality of Image Object\n         * @param {String} output format. Possible values are jpg and png\n         * @return {Image} result_image_obj The compressed Image Object\n         */\n\n        compress: function(source_img_obj, quality, output_format){\n             \n             var mime_type = \"image/jpeg\";\n             if(typeof output_format !== \"undefined\" && output_format==\"png\"){\n                mime_type = \"image/png\";\n             }\n             \n\n             var cvs = document.createElement('canvas');\n             cvs.width = source_img_obj.naturalWidth;\n             cvs.height = source_img_obj.naturalHeight;\n             var ctx = cvs.getContext(\"2d\").drawImage(source_img_obj, 0, 0);\n             var newImageData = cvs.toDataURL(mime_type, quality/100);\n             var result_image_obj = new Image();\n             result_image_obj.src = newImageData;\n             return result_image_obj;\n        },\n\n        /**\n         * Receives an Image Object and upload it to the server via ajax\n         * @param {Image} compressed_img_obj The Compressed Image Object\n         * @param {String} The server side url to send the POST request\n         * @param {String} file_input_name The name of the input that the server will receive with the file\n         * @param {String} filename The name of the file that will be sent to the server\n         * @param {function} successCallback The callback to trigger when the upload is succesful.\n         * @param {function} (OPTIONAL) errorCallback The callback to trigger when the upload failed.\n\t     * @param {function} (OPTIONAL) duringCallback The callback called to be notified about the image's upload progress.\n\t     * @param {Object} (OPTIONAL) customHeaders An object representing key-value  properties to inject to the request header.\n         */\n\n        upload: function(compressed_img_obj, upload_url, file_input_name, filename, successCallback, errorCallback, duringCallback, customHeaders){\n\n            //ADD sendAsBinary compatibilty to older browsers\n            if (XMLHttpRequest.prototype.sendAsBinary === undefined) {\n                XMLHttpRequest.prototype.sendAsBinary = function(string) {\n                    var bytes = Array.prototype.map.call(string, function(c) {\n                        return c.charCodeAt(0) & 0xff;\n                    });\n                    this.send(new Uint8Array(bytes).buffer);\n                };\n            }\n\n            var type = \"image/jpeg\";\n            if(filename.substr(-4).toLowerCase()==\".png\"){\n                type = \"image/png\";\n            }\n\n            var data = compressed_img_obj.src;\n            data = data.replace('data:' + type + ';base64,', '');\n            \n            var xhr = new XMLHttpRequest();\n            xhr.open('POST', upload_url, true);\n            var boundary = 'someboundary';\n\n            xhr.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\n\t\t\n\t\t// Set custom request headers if customHeaders parameter is provided\n\t\tif (customHeaders && typeof customHeaders === \"object\") {\n\t\t\tfor (var headerKey in customHeaders){\n\t\t\t\txhr.setRequestHeader(headerKey, customHeaders[headerKey]);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// If a duringCallback function is set as a parameter, call that to notify about the upload progress\n\t\tif (duringCallback && duringCallback instanceof Function) {\n\t\t\txhr.upload.onprogress = function (evt) {\n\t\t\t\tif (evt.lengthComputable) {  \n\t\t\t\t\tduringCallback ((evt.loaded / evt.total)*100);  \n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\t\n            xhr.sendAsBinary(['--' + boundary, 'Content-Disposition: form-data; name=\"' + file_input_name + '\"; filename=\"' + filename + '\"', 'Content-Type: ' + type, '', atob(data), '--' + boundary + '--'].join('\\r\\n'));\n            \n            xhr.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4){\n\t\t\t\tif (this.status == 200) {\n\t\t\t\t\tsuccessCallback(this.responseText);\n\t\t\t\t}else if (this.status >= 400) {\n\t\t\t\t\tif (errorCallback &&  errorCallback instanceof Function) {\n\t\t\t\t\t\terrorCallback(this.responseText);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n            };\n\n\n        }\n};\n","if (Meteor.isClient) {\n    \n    //const compress = require('compress.js');\n    RegExp.escape = function(s) {  \n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n      };\n    \n}","!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"/dists/\",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){\"use strict\";(function(e){function t(e){return e&&e.__esModule?e:{default:e}}function r(e){function t(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=r?document.querySelector(e):Array.from(document.querySelectorAll(e));return Array.isArray(o)?o.forEach(function(e){n(e,t,function(e){(0,i.default)(e,p,{rate:a.rate,dimension:a.dimen})})}):n(o,t,function(e){(0,i.default)(e,p,{rate:a.rate,dimension:a.dimen})}),o}function n(e,t,n){e.addEventListener(t,function(e){e.preventDefault(),e.stopPropagation(),n(e)})}function r(e){e.preventDefault(),e.stopPropagation();var t=m=m||document.createElement(\"a\");t.download=a.imagePrefix+a.name.replace(/\\..+/,\"\"),t.href=s[0],t.click()}var o={rate:50,imagePrefix:\"compressed-\",name:\"image\"},a=Object.assign({},o,e),f=[],s=[],d=(a.inputSelector&&t(a.inputSelector,\"change\"),a.dropSelector?t(a.dropSelector,\"drop\"):null);!function(e){e&&(e.addEventListener(\"dragenter\",function(e){e.preventDefault(),console.log(\"drag entered\")}),e.addEventListener(\"dragover\",function(e){e.preventDefault(),console.log(\"drag entered\")}),e.addEventListener(\"dragleave\",function(e){e.preventDefault(),console.log(\"drag entered\")}))}(d);a.rateSelector&&function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=r?document.querySelector(e):Array.from(document.querySelectorAll(e));Array.isArray(o)?o.forEach(function(e){n(e,t,function(e){a.rate=parseInt(e.target.value),p.emit(\"startCompression\",f,p,{rate:a.rate,dimension:a.dimen})})}):n(o,t,function(e){a.rate=parseInt(e.target.value),p.emit(\"startCompression\",f,p,{rate:a.rate,dimension:a.dimen})})}(a.rateSelector,\"change\");(a.downloadSelector?document.querySelector(a.downloadSelector):null).addEventListener(\"click\",r);var m=null,p=new u.default;return p.on(\"startCompression\",l.default),p.on(\"saveFileUrl\",function(e){f=e}),p.on(\"ImageCreated\",function(e){var t=e.map(function(e){return(0,c.compress)(e,a.rate)});p.emit(\"compressed\",t)}),p.on(\"compressed\",function(e){a.imageSelector&&(document.querySelector(a.imageSelector).src=e[0]),s=e}),{options:a,on:function(e,t){p.on(e,t)}}}var o=n(3),i=t(o),a=n(4),u=t(a),c=n(5),l=t(c);e.Compress=r}).call(t,n(2))},function(e,t,n){\"use strict\";var r,o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};r=function(){return this}();try{r=r||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"===(\"undefined\"==typeof window?\"undefined\":o(window))&&(r=window)}e.exports=r},function(e,t,n){\"use strict\";function r(e,t){var n=Array.from(e.target.files||e.dataTransfer.files),r=e.target.files?\"changed\":\"dropped\";return t.emit(r,n),n}function o(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=new FileReader,a=0,u=[];i.onload=function(){a--,u.push(i.result),0===a&&(t.emit(\"saveFileUrl\",u),t.emit.apply(t,[\"startCompression\",u,t].concat(r)))},e.forEach(function(e){a++,i.readAsDataURL(e)})}Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];o.apply(void 0,[r(e,t),t].concat(i))}},function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this._events={}}return o(e,[{key:\"on\",value:function(e,t){var n=this._events;n[e]=n[e]||[],n[e].push(t)}},{key:\"emit\",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this._events;if(!(e in o))return!1;o[e].forEach(function(e){return e.apply(void 0,n)})}}]),e}();t.default=i},function(e,t,n){\"use strict\";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];return e.map(function(e){var o=new Image;o.src=e,o.onload=function(){r.push({img:o,dimension:Object.assign({},{width:o.width,height:o.height},n)}),t.emit(\"ImageCreated\",r)}})}function o(e,t){var n=a.getContext(\"2d\");return a.width=e.dimension.width,a.height=e.dimension.height,n.drawImage(e.img,0,0,e.dimension.width,e.dimension.height),a.toDataURL(\"image/jpeg\",t/100)}function i(e,t,n){var o=n.dimension;t.emit(\"compressing\"),r(e,t,o)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.compress=o,t.default=i;var a=document.createElement(\"canvas\")}]);"," if (Meteor.isClient) {\n    \n    //const compress = require('compress.js');\n    var lazyLoadImages = require('lazy-load-images');\n    lazyLoadImages.init();\n   \n}\n\n ","/**\n * jQuery Plugin to obtain touch gestures from iPhone, iPod Touch and iPad, should also work with Android mobile phones (not tested yet!)\n * Common usage: wipe images (left and right to show the previous or next image)\n * \n * @author Andreas Waltl, netCU Internetagentur (http://www.netcu.de)\n * @version 1.1.1 (9th December 2010) - fix bug (older IE's had problems)\n * @version 1.1 (1st September 2010) - support wipe up and wipe down\n * @version 1.0 (15th July 2010)\n */\n(function($) { \n   $.fn.touchwipe = function(settings) {\n     var config = {\n    \t\tmin_move_x: 20,\n    \t\tmin_move_y: 20,\n \t\t\twipeLeft: function() { },\n \t\t\twipeRight: function() { },\n \t\t\twipeUp: function() { },\n \t\t\twipeDown: function() { },\n\t\t\tpreventDefaultEvents: true\n\t };\n     \n     if (settings) $.extend(config, settings);\n \n     this.each(function() {\n    \t var startX;\n    \t var startY;\n\t\t var isMoving = false;\n\n    \t function cancelTouch() {\n    \t\t this.removeEventListener('touchmove', onTouchMove);\n    \t\t startX = null;\n    \t\t isMoving = false;\n    \t }\t\n    \t \n    \t function onTouchMove(e) {\n    \t\t if(config.preventDefaultEvents) {\n    \t\t\t e.preventDefault();\n    \t\t }\n    \t\t if(isMoving) {\n\t    \t\t var x = e.touches[0].pageX;\n\t    \t\t var y = e.touches[0].pageY;\n\t    \t\t var dx = startX - x;\n\t    \t\t var dy = startY - y;\n\t    \t\t if(Math.abs(dx) >= config.min_move_x) {\n\t    \t\t\tcancelTouch();\n\t    \t\t\tif(dx > 0) {\n\t    \t\t\t\tconfig.wipeLeft();\n\t    \t\t\t}\n\t    \t\t\telse {\n\t    \t\t\t\tconfig.wipeRight();\n\t    \t\t\t}\n\t    \t\t }\n\t    \t\t else if(Math.abs(dy) >= config.min_move_y) {\n\t\t    \t\t\tcancelTouch();\n\t\t    \t\t\tif(dy > 0) {\n\t\t    \t\t\t\tconfig.wipeDown();\n\t\t    \t\t\t}\n\t\t    \t\t\telse {\n\t\t    \t\t\t\tconfig.wipeUp();\n\t\t    \t\t\t}\n\t\t    \t\t }\n    \t\t }\n    \t }\n    \t \n    \t function onTouchStart(e)\n    \t {\n    \t\t if (e.touches.length == 1) {\n    \t\t\t startX = e.touches[0].pageX;\n    \t\t\t startY = e.touches[0].pageY;\n    \t\t\t isMoving = true;\n    \t\t\t this.addEventListener('touchmove', onTouchMove, false);\n    \t\t }\n    \t }    \t \n    \t if ('ontouchstart' in document.documentElement) {\n    \t\t this.addEventListener('touchstart', onTouchStart, false);\n    \t }\n     });\n \n     return this;\n   };\n \n })(jQuery);\n","/*!\n * jQuery Validation Plugin 1.11.1\n *\n * http://bassistance.de/jquery-plugins/jquery-plugin-validation/\n * http://docs.jquery.com/Plugins/Validation\n *\n * Copyright 2013 JÃƒÂ¶rn Zaefferer\n * Released under the MIT license:\n *   http://www.opensource.org/licenses/mit-license.php\n */\n\n(function($) {\n    \n    $.extend($.fn, {\n        // http://docs.jquery.com/Plugins/Validation/validate\n        validate: function( options ) {\n    \n            // if nothing is selected, return nothing; can't chain anyway\n            if ( !this.length ) {\n                if ( options && options.debug && window.console ) {\n                    console.warn( \"Nothing selected, can't validate, returning nothing.\" );\n                }\n                return;\n            }\n    \n            // check if a validator for this form was already created\n            var validator = $.data( this[0], \"validator\" );\n            if ( validator ) {\n                return validator;\n            }\n    \n            // Add novalidate tag if HTML5.\n            this.attr( \"novalidate\", \"novalidate\" );\n    \n            validator = new $.validator( options, this[0] );\n            $.data( this[0], \"validator\", validator );\n    \n            if ( validator.settings.onsubmit ) {\n    \n                this.validateDelegate( \":submit\", \"click\", function( event ) {\n                    if ( validator.settings.submitHandler ) {\n                        validator.submitButton = event.target;\n                    }\n                    // allow suppressing validation by adding a cancel class to the submit button\n                    if ( $(event.target).hasClass(\"cancel\") ) {\n                        validator.cancelSubmit = true;\n                    }\n    \n                    // allow suppressing validation by adding the html5 formnovalidate attribute to the submit button\n                    if ( $(event.target).attr(\"formnovalidate\") !== undefined ) {\n                        validator.cancelSubmit = true;\n                    }\n                });\n    \n                // validate the form on submit\n                this.submit( function( event ) {\n                    if ( validator.settings.debug ) {\n                        // prevent form submit to be able to see console output\n                        event.preventDefault();\n                    }\n                    function handle() {\n                        var hidden;\n                        if ( validator.settings.submitHandler ) {\n                            if ( validator.submitButton ) {\n                                // insert a hidden input as a replacement for the missing submit button\n                                hidden = $(\"<input type='hidden'/>\").attr(\"name\", validator.submitButton.name).val( $(validator.submitButton).val() ).appendTo(validator.currentForm);\n                            }\n                            validator.settings.submitHandler.call( validator, validator.currentForm, event );\n                            if ( validator.submitButton ) {\n                                // and clean up afterwards; thanks to no-block-scope, hidden can be referenced\n                                hidden.remove();\n                            }\n                            return false;\n                        }\n                        return true;\n                    }\n    \n                    // prevent submit for invalid forms or custom submit handlers\n                    if ( validator.cancelSubmit ) {\n                        validator.cancelSubmit = false;\n                        return handle();\n                    }\n                    if ( validator.form() ) {\n                        if ( validator.pendingRequest ) {\n                            validator.formSubmitted = true;\n                            return false;\n                        }\n                        return handle();\n                    } else {\n                        validator.focusInvalid();\n                        return false;\n                    }\n                });\n            }\n    \n            return validator;\n        },\n        // http://docs.jquery.com/Plugins/Validation/valid\n        valid: function() {\n            if ( $(this[0]).is(\"form\")) {\n                return this.validate().form();\n            } else {\n                var valid = true;\n                var validator = $(this[0].form).validate();\n                this.each(function() {\n                    valid = valid && validator.element(this);\n                });\n                return valid;\n            }\n        },\n        // attributes: space seperated list of attributes to retrieve and remove\n        removeAttrs: function( attributes ) {\n            var result = {},\n                $element = this;\n            $.each(attributes.split(/\\s/), function( index, value ) {\n                result[value] = $element.attr(value);\n                $element.removeAttr(value);\n            });\n            return result;\n        },\n        // http://docs.jquery.com/Plugins/Validation/rules\n        rules: function( command, argument ) {\n            var element = this[0];\n    \n            if ( command ) {\n                var settings = $.data(element.form, \"validator\").settings;\n                var staticRules = settings.rules;\n                var existingRules = $.validator.staticRules(element);\n                switch(command) {\n                case \"add\":\n                    $.extend(existingRules, $.validator.normalizeRule(argument));\n                    // remove messages from rules, but allow them to be set separetely\n                    delete existingRules.messages;\n                    staticRules[element.name] = existingRules;\n                    if ( argument.messages ) {\n                        settings.messages[element.name] = $.extend( settings.messages[element.name], argument.messages );\n                    }\n                    break;\n                case \"remove\":\n                    if ( !argument ) {\n                        delete staticRules[element.name];\n                        return existingRules;\n                    }\n                    var filtered = {};\n                    $.each(argument.split(/\\s/), function( index, method ) {\n                        filtered[method] = existingRules[method];\n                        delete existingRules[method];\n                    });\n                    return filtered;\n                }\n            }\n    \n            var data = $.validator.normalizeRules(\n            $.extend(\n                {},\n                $.validator.classRules(element),\n                $.validator.attributeRules(element),\n                $.validator.dataRules(element),\n                $.validator.staticRules(element)\n            ), element);\n    \n            // make sure required is at front\n            if ( data.required ) {\n                var param = data.required;\n                delete data.required;\n                data = $.extend({required: param}, data);\n            }\n    \n            return data;\n        }\n    });\n    \n    // Custom selectors\n    $.extend($.expr[\":\"], {\n        // http://docs.jquery.com/Plugins/Validation/blank\n        blank: function( a ) { return !$.trim(\"\" + $(a).val()); },\n        // http://docs.jquery.com/Plugins/Validation/filled\n        filled: function( a ) { return !!$.trim(\"\" + $(a).val()); },\n        // http://docs.jquery.com/Plugins/Validation/unchecked\n        unchecked: function( a ) { return !$(a).prop(\"checked\"); }\n    });\n    \n    // constructor for validator\n    $.validator = function( options, form ) {\n        this.settings = $.extend( true, {}, $.validator.defaults, options );\n        this.currentForm = form;\n        this.init();\n    };\n    \n    $.validator.format = function( source, params ) {\n        if ( arguments.length === 1 ) {\n            return function() {\n                var args = $.makeArray(arguments);\n                args.unshift(source);\n                return $.validator.format.apply( this, args );\n            };\n        }\n        if ( arguments.length > 2 && params.constructor !== Array  ) {\n            params = $.makeArray(arguments).slice(1);\n        }\n        if ( params.constructor !== Array ) {\n            params = [ params ];\n        }\n        $.each(params, function( i, n ) {\n            source = source.replace( new RegExp(\"\\\\{\" + i + \"\\\\}\", \"g\"), function() {\n                return n;\n            });\n        });\n        return source;\n    };\n    \n    $.extend($.validator, {\n    \n        defaults: {\n            messages: {},\n            groups: {},\n            rules: {},\n            errorClass: \"error\",\n            validClass: \"valid\",\n            errorElement: \"label\",\n            focusInvalid: true,\n            errorContainer: $([]),\n            errorLabelContainer: $([]),\n            onsubmit: true,\n            ignore: \":hidden\",\n            ignoreTitle: false,\n            onfocusin: function( element, event ) {\n                this.lastActive = element;\n    \n                // hide error label and remove error class on focus if enabled\n                if ( this.settings.focusCleanup && !this.blockFocusCleanup ) {\n                    if ( this.settings.unhighlight ) {\n                        this.settings.unhighlight.call( this, element, this.settings.errorClass, this.settings.validClass );\n                    }\n                    this.addWrapper(this.errorsFor(element)).hide();\n                }\n            },\n            onfocusout: function( element, event ) {\n                if ( !this.checkable(element) && (element.name in this.submitted || !this.optional(element)) ) {\n                    this.element(element);\n                }\n            },\n            onkeyup: function( element, event ) {\n                if ( event.which === 9 && this.elementValue(element) === \"\" ) {\n                    return;\n                } else if ( element.name in this.submitted || element === this.lastElement ) {\n                    this.element(element);\n                }\n            },\n            onclick: function( element, event ) {\n                // click on selects, radiobuttons and checkboxes\n                if ( element.name in this.submitted ) {\n                    this.element(element);\n                }\n                // or option elements, check parent select in that case\n                else if ( element.parentNode.name in this.submitted ) {\n                    this.element(element.parentNode);\n                }\n            },\n            highlight: function( element, errorClass, validClass ) {\n                if ( element.type === \"radio\" ) {\n                    this.findByName(element.name).addClass(errorClass).removeClass(validClass);\n                } else {\n                    $(element).addClass(errorClass).removeClass(validClass);\n                }\n            },\n            unhighlight: function( element, errorClass, validClass ) {\n                if ( element.type === \"radio\" ) {\n                    this.findByName(element.name).removeClass(errorClass).addClass(validClass);\n                } else {\n                    $(element).removeClass(errorClass).addClass(validClass);\n                }\n            }\n        },\n    \n        // http://docs.jquery.com/Plugins/Validation/Validator/setDefaults\n        setDefaults: function( settings ) {\n            $.extend( $.validator.defaults, settings );\n        },\n    \n        messages: {\n            required: \"This field is required.\",\n            remote: \"Please fix this field.\",\n            email: \"Please enter a valid email address.\",\n            url: \"Please enter a valid URL.\",\n            date: \"Please enter a valid date.\",\n            dateISO: \"Please enter a valid date (ISO).\",\n            number: \"Please enter a valid number.\",\n            digits: \"Please enter only digits.\",\n            creditcard: \"Please enter a valid credit card number.\",\n            equalTo: \"Please enter the same value again.\",\n            maxlength: $.validator.format(\"Please enter no more than {0} characters.\"),\n            minlength: $.validator.format(\"Please enter at least {0} characters.\"),\n            rangelength: $.validator.format(\"Please enter a value between {0} and {1} characters long.\"),\n            range: $.validator.format(\"Please enter a value between {0} and {1}.\"),\n            max: $.validator.format(\"Please enter a value less than or equal to {0}.\"),\n            min: $.validator.format(\"Please enter a value greater than or equal to {0}.\")\n        },\n    \n        autoCreateRanges: false,\n    \n        prototype: {\n    \n            init: function() {\n                this.labelContainer = $(this.settings.errorLabelContainer);\n                this.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);\n                this.containers = $(this.settings.errorContainer).add( this.settings.errorLabelContainer );\n                this.submitted = {};\n                this.valueCache = {};\n                this.pendingRequest = 0;\n                this.pending = {};\n                this.invalid = {};\n                this.reset();\n    \n                var groups = (this.groups = {});\n                $.each(this.settings.groups, function( key, value ) {\n                    if ( typeof value === \"string\" ) {\n                        value = value.split(/\\s/);\n                    }\n                    $.each(value, function( index, name ) {\n                        groups[name] = key;\n                    });\n                });\n                var rules = this.settings.rules;\n                $.each(rules, function( key, value ) {\n                    rules[key] = $.validator.normalizeRule(value);\n                });\n    \n                function delegate(event) {\n                    var validator = $.data(this[0].form, \"validator\"),\n                        eventType = \"on\" + event.type.replace(/^validate/, \"\");\n                    if ( validator.settings[eventType] ) {\n                        validator.settings[eventType].call(validator, this[0], event);\n                    }\n                }\n                $(this.currentForm)\n                    .validateDelegate(\":text, [type='password'], [type='file'], select, textarea, \" +\n                        \"[type='number'], [type='search'] ,[type='tel'], [type='url'], \" +\n                        \"[type='email'], [type='datetime'], [type='date'], [type='month'], \" +\n                        \"[type='week'], [type='time'], [type='datetime-local'], \" +\n                        \"[type='range'], [type='color'] \",\n                        \"focusin focusout keyup\", delegate)\n                    .validateDelegate(\"[type='radio'], [type='checkbox'], select, option\", \"click\", delegate);\n    \n                if ( this.settings.invalidHandler ) {\n                    $(this.currentForm).bind(\"invalid-form.validate\", this.settings.invalidHandler);\n                }\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Validator/form\n            form: function() {\n                this.checkForm();\n                $.extend(this.submitted, this.errorMap);\n                this.invalid = $.extend({}, this.errorMap);\n                if ( !this.valid() ) {\n                    $(this.currentForm).triggerHandler(\"invalid-form\", [this]);\n                }\n                this.showErrors();\n                return this.valid();\n            },\n    \n            checkForm: function() {\n                this.prepareForm();\n                for ( var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++ ) {\n                    this.check( elements[i] );\n                }\n                return this.valid();\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Validator/element\n            element: function( element ) {\n                element = this.validationTargetFor( this.clean( element ) );\n                this.lastElement = element;\n                this.prepareElement( element );\n                this.currentElements = $(element);\n                var result = this.check( element ) !== false;\n                if ( result ) {\n                    delete this.invalid[element.name];\n                } else {\n                    this.invalid[element.name] = true;\n                }\n                if ( !this.numberOfInvalids() ) {\n                    // Hide error containers on last error\n                    this.toHide = this.toHide.add( this.containers );\n                }\n                this.showErrors();\n                return result;\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Validator/showErrors\n            showErrors: function( errors ) {\n                if ( errors ) {\n                    // add items to error list and map\n                    $.extend( this.errorMap, errors );\n                    this.errorList = [];\n                    for ( var name in errors ) {\n                        this.errorList.push({\n                            message: errors[name],\n                            element: this.findByName(name)[0]\n                        });\n                    }\n                    // remove items from success list\n                    this.successList = $.grep( this.successList, function( element ) {\n                        return !(element.name in errors);\n                    });\n                }\n                if ( this.settings.showErrors ) {\n                    this.settings.showErrors.call( this, this.errorMap, this.errorList );\n                } else {\n                    this.defaultShowErrors();\n                }\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Validator/resetForm\n            resetForm: function() {\n                if ( $.fn.resetForm ) {\n                    $(this.currentForm).resetForm();\n                }\n                this.submitted = {};\n                this.lastElement = null;\n                this.prepareForm();\n                this.hideErrors();\n                this.elements().removeClass( this.settings.errorClass ).removeData( \"previousValue\" );\n            },\n    \n            numberOfInvalids: function() {\n                return this.objectLength(this.invalid);\n            },\n    \n            objectLength: function( obj ) {\n                var count = 0;\n                for ( var i in obj ) {\n                    count++;\n                }\n                return count;\n            },\n    \n            hideErrors: function() {\n                this.addWrapper( this.toHide ).hide();\n            },\n    \n            valid: function() {\n                return this.size() === 0;\n            },\n    \n            size: function() {\n                return this.errorList.length;\n            },\n    \n            focusInvalid: function() {\n                if ( this.settings.focusInvalid ) {\n                    try {\n                        $(this.findLastActive() || this.errorList.length && this.errorList[0].element || [])\n                        .filter(\":visible\")\n                        .focus()\n                        // manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find\n                        .trigger(\"focusin\");\n                    } catch(e) {\n                        // ignore IE throwing errors when focusing hidden elements\n                    }\n                }\n            },\n    \n            findLastActive: function() {\n                var lastActive = this.lastActive;\n                return lastActive && $.grep(this.errorList, function( n ) {\n                    return n.element.name === lastActive.name;\n                }).length === 1 && lastActive;\n            },\n    \n            elements: function() {\n                var validator = this,\n                    rulesCache = {};\n    \n                // select all valid inputs inside the form (no submit or reset buttons)\n                return $(this.currentForm)\n                .find(\"input, select, textarea\")\n                .not(\":submit, :reset, :image, [disabled]\")\n                .not( this.settings.ignore )\n                .filter(function() {\n                    if ( !this.name && validator.settings.debug && window.console ) {\n                        console.error( \"%o has no name assigned\", this);\n                    }\n    \n                    // select only the first element for each name, and only those with rules specified\n                    if ( this.name in rulesCache || !validator.objectLength($(this).rules()) ) {\n                        return false;\n                    }\n    \n                    rulesCache[this.name] = true;\n                    return true;\n                });\n            },\n    \n            clean: function( selector ) {\n                return $(selector)[0];\n            },\n    \n            errors: function() {\n                var errorClass = this.settings.errorClass.replace(\" \", \".\");\n                return $(this.settings.errorElement + \".\" + errorClass, this.errorContext);\n            },\n    \n            reset: function() {\n                this.successList = [];\n                this.errorList = [];\n                this.errorMap = {};\n                this.toShow = $([]);\n                this.toHide = $([]);\n                this.currentElements = $([]);\n            },\n    \n            prepareForm: function() {\n                this.reset();\n                this.toHide = this.errors().add( this.containers );\n            },\n    \n            prepareElement: function( element ) {\n                this.reset();\n                this.toHide = this.errorsFor(element);\n            },\n    \n            elementValue: function( element ) {\n                var type = $(element).attr(\"type\"),\n                    val = $(element).val();\n    \n                if ( type === \"radio\" || type === \"checkbox\" ) {\n                    return $(\"input[name='\" + $(element).attr(\"name\") + \"']:checked\").val();\n                }\n    \n                if ( typeof val === \"string\" ) {\n                    return val.replace(/\\r/g, \"\");\n                }\n                return val;\n            },\n    \n            check: function( element ) {\n                element = this.validationTargetFor( this.clean( element ) );\n    \n                var rules = $(element).rules();\n                var dependencyMismatch = false;\n                var val = this.elementValue(element);\n                var result;\n    \n                for (var method in rules ) {\n                    var rule = { method: method, parameters: rules[method] };\n                    try {\n    \n                        result = $.validator.methods[method].call( this, val, element, rule.parameters );\n    \n                        // if a method indicates that the field is optional and therefore valid,\n                        // don't mark it as valid when there are no other rules\n                        if ( result === \"dependency-mismatch\" ) {\n                            dependencyMismatch = true;\n                            continue;\n                        }\n                        dependencyMismatch = false;\n    \n                        if ( result === \"pending\" ) {\n                            this.toHide = this.toHide.not( this.errorsFor(element) );\n                            return;\n                        }\n    \n                        if ( !result ) {\n                            this.formatAndAdd( element, rule );\n                            return false;\n                        }\n                    } catch(e) {\n                        if ( this.settings.debug && window.console ) {\n                            console.log( \"Exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method.\", e );\n                        }\n                        throw e;\n                    }\n                }\n                if ( dependencyMismatch ) {\n                    return;\n                }\n                if ( this.objectLength(rules) ) {\n                    this.successList.push(element);\n                }\n                return true;\n            },\n    \n            // return the custom message for the given element and validation method\n            // specified in the element's HTML5 data attribute\n            customDataMessage: function( element, method ) {\n                return $(element).data(\"msg-\" + method.toLowerCase()) || (element.attributes && $(element).attr(\"data-msg-\" + method.toLowerCase()));\n            },\n    \n            // return the custom message for the given element name and validation method\n            customMessage: function( name, method ) {\n                var m = this.settings.messages[name];\n                return m && (m.constructor === String ? m : m[method]);\n            },\n    \n            // return the first defined argument, allowing empty strings\n            findDefined: function() {\n                for(var i = 0; i < arguments.length; i++) {\n                    if ( arguments[i] !== undefined ) {\n                        return arguments[i];\n                    }\n                }\n                return undefined;\n            },\n    \n            defaultMessage: function( element, method ) {\n                return this.findDefined(\n                    this.customMessage( element.name, method ),\n                    this.customDataMessage( element, method ),\n                    // title is never undefined, so handle empty string as undefined\n                    !this.settings.ignoreTitle && element.title || undefined,\n                    $.validator.messages[method],\n                    \"<strong>Warning: No message defined for \" + element.name + \"</strong>\"\n                );\n            },\n    \n            formatAndAdd: function( element, rule ) {\n                var message = this.defaultMessage( element, rule.method ),\n                    theregex = /\\$?\\{(\\d+)\\}/g;\n                if ( typeof message === \"function\" ) {\n                    message = message.call(this, rule.parameters, element);\n                } else if (theregex.test(message)) {\n                    message = $.validator.format(message.replace(theregex, \"{$1}\"), rule.parameters);\n                }\n                this.errorList.push({\n                    message: message,\n                    element: element\n                });\n    \n                this.errorMap[element.name] = message;\n                this.submitted[element.name] = message;\n            },\n    \n            addWrapper: function( toToggle ) {\n                if ( this.settings.wrapper ) {\n                    toToggle = toToggle.add( toToggle.parent( this.settings.wrapper ) );\n                }\n                return toToggle;\n            },\n    \n            defaultShowErrors: function() {\n                var i, elements;\n                for ( i = 0; this.errorList[i]; i++ ) {\n                    var error = this.errorList[i];\n                    if ( this.settings.highlight ) {\n                        this.settings.highlight.call( this, error.element, this.settings.errorClass, this.settings.validClass );\n                    }\n                    this.showLabel( error.element, error.message );\n                }\n                if ( this.errorList.length ) {\n                    this.toShow = this.toShow.add( this.containers );\n                }\n                if ( this.settings.success ) {\n                    for ( i = 0; this.successList[i]; i++ ) {\n                        this.showLabel( this.successList[i] );\n                    }\n                }\n                if ( this.settings.unhighlight ) {\n                    for ( i = 0, elements = this.validElements(); elements[i]; i++ ) {\n                        this.settings.unhighlight.call( this, elements[i], this.settings.errorClass, this.settings.validClass );\n                    }\n                }\n                this.toHide = this.toHide.not( this.toShow );\n                this.hideErrors();\n                this.addWrapper( this.toShow ).show();\n            },\n    \n            validElements: function() {\n                return this.currentElements.not(this.invalidElements());\n            },\n    \n            invalidElements: function() {\n                return $(this.errorList).map(function() {\n                    return this.element;\n                });\n            },\n    \n            showLabel: function( element, message ) {\n                var label = this.errorsFor( element );\n                if ( label.length ) {\n                    // refresh error/success class\n                    label.removeClass( this.settings.validClass ).addClass( this.settings.errorClass );\n                    // replace message on existing label\n                    label.html(message);\n                } else {\n                    // create label\n                    label = $(\"<\" + this.settings.errorElement + \">\")\n                        .attr(\"for\", this.idOrName(element))\n                        .addClass(this.settings.errorClass)\n                        .html(message || \"\");\n                    if ( this.settings.wrapper ) {\n                        // make sure the element is visible, even in IE\n                        // actually showing the wrapped element is handled elsewhere\n                        label = label.hide().show().wrap(\"<\" + this.settings.wrapper + \"/>\").parent();\n                    }\n                    if ( !this.labelContainer.append(label).length ) {\n                        if ( this.settings.errorPlacement ) {\n                            this.settings.errorPlacement(label, $(element) );\n                        } else {\n                            label.insertAfter(element);\n                        }\n                    }\n                }\n                if ( !message && this.settings.success ) {\n                    label.text(\"\");\n                    if ( typeof this.settings.success === \"string\" ) {\n                        label.addClass( this.settings.success );\n                    } else {\n                        this.settings.success( label, element );\n                    }\n                }\n                this.toShow = this.toShow.add(label);\n            },\n    \n            errorsFor: function( element ) {\n                var name = this.idOrName(element);\n                return this.errors().filter(function() {\n                    return $(this).attr(\"for\") === name;\n                });\n            },\n    \n            idOrName: function( element ) {\n                return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);\n            },\n    \n            validationTargetFor: function( element ) {\n                // if radio/checkbox, validate first element in group instead\n                if ( this.checkable(element) ) {\n                    element = this.findByName( element.name ).not(this.settings.ignore)[0];\n                }\n                return element;\n            },\n    \n            checkable: function( element ) {\n                return (/radio|checkbox/i).test(element.type);\n            },\n    \n            findByName: function( name ) {\n                return $(this.currentForm).find(\"[name='\" + name + \"']\");\n            },\n    \n            getLength: function( value, element ) {\n                switch( element.nodeName.toLowerCase() ) {\n                case \"select\":\n                    return $(\"option:selected\", element).length;\n                case \"input\":\n                    if ( this.checkable( element) ) {\n                        return this.findByName(element.name).filter(\":checked\").length;\n                    }\n                }\n                return value.length;\n            },\n    \n            depend: function( param, element ) {\n                return this.dependTypes[typeof param] ? this.dependTypes[typeof param](param, element) : true;\n            },\n    \n            dependTypes: {\n                \"boolean\": function( param, element ) {\n                    return param;\n                },\n                \"string\": function( param, element ) {\n                    return !!$(param, element.form).length;\n                },\n                \"function\": function( param, element ) {\n                    return param(element);\n                }\n            },\n    \n            optional: function( element ) {\n                var val = this.elementValue(element);\n                return !$.validator.methods.required.call(this, val, element) && \"dependency-mismatch\";\n            },\n    \n            startRequest: function( element ) {\n                if ( !this.pending[element.name] ) {\n                    this.pendingRequest++;\n                    this.pending[element.name] = true;\n                }\n            },\n    \n            stopRequest: function( element, valid ) {\n                this.pendingRequest--;\n                // sometimes synchronization fails, make sure pendingRequest is never < 0\n                if ( this.pendingRequest < 0 ) {\n                    this.pendingRequest = 0;\n                }\n                delete this.pending[element.name];\n                if ( valid && this.pendingRequest === 0 && this.formSubmitted && this.form() ) {\n                    $(this.currentForm).submit();\n                    this.formSubmitted = false;\n                } else if (!valid && this.pendingRequest === 0 && this.formSubmitted) {\n                    $(this.currentForm).triggerHandler(\"invalid-form\", [this]);\n                    this.formSubmitted = false;\n                }\n            },\n    \n            previousValue: function( element ) {\n                return $.data(element, \"previousValue\") || $.data(element, \"previousValue\", {\n                    old: null,\n                    valid: true,\n                    message: this.defaultMessage( element, \"remote\" )\n                });\n            }\n    \n        },\n    \n        classRuleSettings: {\n            required: {required: true},\n            email: {email: true},\n            url: {url: true},\n            date: {date: true},\n            dateISO: {dateISO: true},\n            number: {number: true},\n            digits: {digits: true},\n            creditcard: {creditcard: true}\n        },\n    \n        addClassRules: function( className, rules ) {\n            if ( className.constructor === String ) {\n                this.classRuleSettings[className] = rules;\n            } else {\n                $.extend(this.classRuleSettings, className);\n            }\n        },\n    \n        classRules: function( element ) {\n            var rules = {};\n            var classes = $(element).attr(\"class\");\n            if ( classes ) {\n                $.each(classes.split(\" \"), function() {\n                    if ( this in $.validator.classRuleSettings ) {\n                        $.extend(rules, $.validator.classRuleSettings[this]);\n                    }\n                });\n            }\n            return rules;\n        },\n    \n        attributeRules: function( element ) {\n            var rules = {};\n            var $element = $(element);\n            var type = $element[0].getAttribute(\"type\");\n    \n            for (var method in $.validator.methods) {\n                var value;\n    \n                // support for <input required> in both html5 and older browsers\n                if ( method === \"required\" ) {\n                    value = $element.get(0).getAttribute(method);\n                    // Some browsers return an empty string for the required attribute\n                    // and non-HTML5 browsers might have required=\"\" markup\n                    if ( value === \"\" ) {\n                        value = true;\n                    }\n                    // force non-HTML5 browsers to return bool\n                    value = !!value;\n                } else {\n                    value = $element.attr(method);\n                }\n    \n                // convert the value to a number for number inputs, and for text for backwards compability\n                // allows type=\"date\" and others to be compared as strings\n                if ( /min|max/.test( method ) && ( type === null || /number|range|text/.test( type ) ) ) {\n                    value = Number(value);\n                }\n    \n                if ( value ) {\n                    rules[method] = value;\n                } else if ( type === method && type !== 'range' ) {\n                    // exception: the jquery validate 'range' method\n                    // does not test for the html5 'range' type\n                    rules[method] = true;\n                }\n            }\n    \n            // maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs\n            if ( rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength) ) {\n                delete rules.maxlength;\n            }\n    \n            return rules;\n        },\n    \n        dataRules: function( element ) {\n            var method, value,\n                rules = {}, $element = $(element);\n            for (method in $.validator.methods) {\n                value = $element.data(\"rule-\" + method.toLowerCase());\n                if ( value !== undefined ) {\n                    rules[method] = value;\n                }\n            }\n            return rules;\n        },\n    \n        staticRules: function( element ) {\n            var rules = {};\n            var validator = $.data(element.form, \"validator\");\n            if ( validator.settings.rules ) {\n                rules = $.validator.normalizeRule(validator.settings.rules[element.name]) || {};\n            }\n            return rules;\n        },\n    \n        normalizeRules: function( rules, element ) {\n            // handle dependency check\n            $.each(rules, function( prop, val ) {\n                // ignore rule when param is explicitly false, eg. required:false\n                if ( val === false ) {\n                    delete rules[prop];\n                    return;\n                }\n                if ( val.param || val.depends ) {\n                    var keepRule = true;\n                    switch (typeof val.depends) {\n                    case \"string\":\n                        keepRule = !!$(val.depends, element.form).length;\n                        break;\n                    case \"function\":\n                        keepRule = val.depends.call(element, element);\n                        break;\n                    }\n                    if ( keepRule ) {\n                        rules[prop] = val.param !== undefined ? val.param : true;\n                    } else {\n                        delete rules[prop];\n                    }\n                }\n            });\n    \n            // evaluate parameters\n            $.each(rules, function( rule, parameter ) {\n                rules[rule] = $.isFunction(parameter) ? parameter(element) : parameter;\n            });\n    \n            // clean number parameters\n            $.each(['minlength', 'maxlength'], function() {\n                if ( rules[this] ) {\n                    rules[this] = Number(rules[this]);\n                }\n            });\n            $.each(['rangelength', 'range'], function() {\n                var parts;\n                if ( rules[this] ) {\n                    if ( $.isArray(rules[this]) ) {\n                        rules[this] = [Number(rules[this][0]), Number(rules[this][1])];\n                    } else if ( typeof rules[this] === \"string\" ) {\n                        parts = rules[this].split(/[\\s,]+/);\n                        rules[this] = [Number(parts[0]), Number(parts[1])];\n                    }\n                }\n            });\n    \n            if ( $.validator.autoCreateRanges ) {\n                // auto-create ranges\n                if ( rules.min && rules.max ) {\n                    rules.range = [rules.min, rules.max];\n                    delete rules.min;\n                    delete rules.max;\n                }\n                if ( rules.minlength && rules.maxlength ) {\n                    rules.rangelength = [rules.minlength, rules.maxlength];\n                    delete rules.minlength;\n                    delete rules.maxlength;\n                }\n            }\n    \n            return rules;\n        },\n    \n        // Converts a simple string to a {string: true} rule, e.g., \"required\" to {required:true}\n        normalizeRule: function( data ) {\n            if ( typeof data === \"string\" ) {\n                var transformed = {};\n                $.each(data.split(/\\s/), function() {\n                    transformed[this] = true;\n                });\n                data = transformed;\n            }\n            return data;\n        },\n    \n        // http://docs.jquery.com/Plugins/Validation/Validator/addMethod\n        addMethod: function( name, method, message ) {\n            $.validator.methods[name] = method;\n            $.validator.messages[name] = message !== undefined ? message : $.validator.messages[name];\n            if ( method.length < 3 ) {\n                $.validator.addClassRules(name, $.validator.normalizeRule(name));\n            }\n        },\n    \n        methods: {\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/required\n            required: function( value, element, param ) {\n                // check if dependency is met\n                if ( !this.depend(param, element) ) {\n                    return \"dependency-mismatch\";\n                }\n                if ( element.nodeName.toLowerCase() === \"select\" ) {\n                    // could be an array for select-multiple or a string, both are fine this way\n                    var val = $(element).val();\n                    return val && val.length > 0;\n                }\n                if ( this.checkable(element) ) {\n                    return this.getLength(value, element) > 0;\n                }\n                return $.trim(value).length > 0;\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/email\n            email: function( value, element ) {\n                // contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/\n                return this.optional(element) || /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i.test(value);\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/url\n            url: function( value, element ) {\n                // contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/\n                return this.optional(element) || /^(https?|s?ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value);\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/date\n            date: function( value, element ) {\n                return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString());\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/dateISO\n            dateISO: function( value, element ) {\n                return this.optional(element) || /^\\d{4}[\\/\\-]\\d{1,2}[\\/\\-]\\d{1,2}$/.test(value);\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/number\n            number: function( value, element ) {\n                return this.optional(element) || /^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test(value);\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/digits\n            digits: function( value, element ) {\n                return this.optional(element) || /^\\d+$/.test(value);\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/creditcard\n            // based on http://en.wikipedia.org/wiki/Luhn\n            creditcard: function( value, element ) {\n                if ( this.optional(element) ) {\n                    return \"dependency-mismatch\";\n                }\n                // accept only spaces, digits and dashes\n                if ( /[^0-9 \\-]+/.test(value) ) {\n                    return false;\n                }\n                var nCheck = 0,\n                    nDigit = 0,\n                    bEven = false;\n    \n                value = value.replace(/\\D/g, \"\");\n    \n                for (var n = value.length - 1; n >= 0; n--) {\n                    var cDigit = value.charAt(n);\n                    nDigit = parseInt(cDigit, 10);\n                    if ( bEven ) {\n                        if ( (nDigit *= 2) > 9 ) {\n                            nDigit -= 9;\n                        }\n                    }\n                    nCheck += nDigit;\n                    bEven = !bEven;\n                }\n    \n                return (nCheck % 10) === 0;\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/minlength\n            minlength: function( value, element, param ) {\n                var length = $.isArray( value ) ? value.length : this.getLength($.trim(value), element);\n                return this.optional(element) || length >= param;\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/maxlength\n            maxlength: function( value, element, param ) {\n                var length = $.isArray( value ) ? value.length : this.getLength($.trim(value), element);\n                return this.optional(element) || length <= param;\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/rangelength\n            rangelength: function( value, element, param ) {\n                var length = $.isArray( value ) ? value.length : this.getLength($.trim(value), element);\n                return this.optional(element) || ( length >= param[0] && length <= param[1] );\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/min\n            min: function( value, element, param ) {\n                return this.optional(element) || value >= param;\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/max\n            max: function( value, element, param ) {\n                return this.optional(element) || value <= param;\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/range\n            range: function( value, element, param ) {\n                return this.optional(element) || ( value >= param[0] && value <= param[1] );\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/equalTo\n            equalTo: function( value, element, param ) {\n                // bind to the blur event of the target in order to revalidate whenever the target field is updated\n                // TODO find a way to bind the event just once, avoiding the unbind-rebind overhead\n                var target = $(param);\n                if ( this.settings.onfocusout ) {\n                    target.unbind(\".validate-equalTo\").bind(\"blur.validate-equalTo\", function() {\n                        $(element).valid();\n                    });\n                }\n                return value === target.val();\n            },\n    \n            // http://docs.jquery.com/Plugins/Validation/Methods/remote\n            remote: function( value, element, param ) {\n                if ( this.optional(element) ) {\n                    return \"dependency-mismatch\";\n                }\n    \n                var previous = this.previousValue(element);\n                if (!this.settings.messages[element.name] ) {\n                    this.settings.messages[element.name] = {};\n                }\n                previous.originalMessage = this.settings.messages[element.name].remote;\n                this.settings.messages[element.name].remote = previous.message;\n    \n                param = typeof param === \"string\" && {url:param} || param;\n    \n                if ( previous.old === value ) {\n                    return previous.valid;\n                }\n    \n                previous.old = value;\n                var validator = this;\n                this.startRequest(element);\n                var data = {};\n                data[element.name] = value;\n                $.ajax($.extend(true, {\n                    url: param,\n                    mode: \"abort\",\n                    port: \"validate\" + element.name,\n                    dataType: \"json\",\n                    data: data,\n                    success: function( response ) {\n                        validator.settings.messages[element.name].remote = previous.originalMessage;\n                        var valid = response === true || response === \"true\";\n                        if ( valid ) {\n                            var submitted = validator.formSubmitted;\n                            validator.prepareElement(element);\n                            validator.formSubmitted = submitted;\n                            validator.successList.push(element);\n                            delete validator.invalid[element.name];\n                            validator.showErrors();\n                        } else {\n                            var errors = {};\n                            var message = response || validator.defaultMessage( element, \"remote\" );\n                            errors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;\n                            validator.invalid[element.name] = true;\n                            validator.showErrors(errors);\n                        }\n                        previous.valid = valid;\n                        validator.stopRequest(element, valid);\n                    }\n                }, param));\n                return \"pending\";\n            }\n    \n        }\n    \n    });\n    \n    // deprecated, use $.validator.format instead\n    $.format = $.validator.format;\n    \n    }(jQuery));\n    \n    // ajax mode: abort\n    // usage: $.ajax({ mode: \"abort\"[, port: \"uniqueport\"]});\n    // if mode:\"abort\" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()\n    (function($) {\n        var pendingRequests = {};\n        // Use a prefilter if available (1.5+)\n        if ( $.ajaxPrefilter ) {\n            $.ajaxPrefilter(function( settings, _, xhr ) {\n                var port = settings.port;\n                if ( settings.mode === \"abort\" ) {\n                    if ( pendingRequests[port] ) {\n                        pendingRequests[port].abort();\n                    }\n                    pendingRequests[port] = xhr;\n                }\n            });\n        } else {\n            // Proxy ajax\n            var ajax = $.ajax;\n            $.ajax = function( settings ) {\n                var mode = ( \"mode\" in settings ? settings : $.ajaxSettings ).mode,\n                    port = ( \"port\" in settings ? settings : $.ajaxSettings ).port;\n                if ( mode === \"abort\" ) {\n                    if ( pendingRequests[port] ) {\n                        pendingRequests[port].abort();\n                    }\n                    pendingRequests[port] = ajax.apply(this, arguments);\n                    return pendingRequests[port];\n                }\n                return ajax.apply(this, arguments);\n            };\n        }\n    }(jQuery));\n    \n    // provides delegate(type: String, delegate: Selector, handler: Callback) plugin for easier event delegation\n    // handler is only called when $(event.target).is(delegate), in the scope of the jquery-object for event.target\n    (function($) {\n        $.extend($.fn, {\n            validateDelegate: function( delegate, type, handler ) {\n                return this.bind(type, function( event ) {\n                    var target = $(event.target);\n                    if ( target.is(delegate) ) {\n                        return handler.apply(target, arguments);\n                    }\n                });\n            }\n        });\n    }(jQuery));","pluralize = function (n, thing, options) {\n  var plural = thing;\n  if (_.isUndefined(n)) {\n    return thing;\n  } else if (n !== 1) {\n    if (thing.slice(-1) === 's')\n      plural = thing + 'es';\n    else\n      plural = thing + 's';\n  }\n\n  if (options && options.hash && options.hash.wordOnly)\n    return plural;\n  else\n    return n + ' ' + plural;\n}\n\nHandlebars.registerHelper('pluralize', pluralize);\n\nvar DIMENSIONS = {\n  small: '320x350',\n  large: '640x480',\n  full: '640x800'\n};\n\nUI.registerHelper('urlImage', function (imageName) {\n\n  var str = \"\";\n  if (imageName instanceof Array) {\n    str = \"url('/img/prods/\" + imageName[0] + \"')\";\n  }\n  else {\n    str = \"url('/img/prods/\" + imageName + \"')\";\n  }\n  return str;\n});\n\nHandlebars.registerHelper('getFirstElement', function (objCol) {\n  var result = NaN;\n  if (objCol.count > 0) {\n    result = objCol[0];\n  }\n  return result;\n});\n\nHandlebars.registerHelper('getAllImages',function (imgId){\n  console.log(\"Getting images\");\n  console.log(Images.count());\n  return Images.find({});\n});\n\nUI.registerHelper('isNullOrEmpty', function (someObject) {\n  var result = true;\n  if ((someObject == 'undefined') || (someObject == '')) {\n    return result;\n  }\n\n  return result;\n});\n\nUI.registerHelper('getCardImageById',function (ImgId){\n  console.log(\"Getting from store\");\n \n  console.log(\"Single Image Id : \" + ImgId);\n  Meteor.subscribe('SingleProductImage',ImgId);\n  var returnimgs = Images.find({ImageId:ImgId},{limit:1});\n  \n  return returnimgs;\n});\n\nUI.registerHelper('thisSelectedProduct',function(){\n  console.log(\"This Selected Product\");\n  try {\n      var result;\n      result = Session.get(\"currentProduct\");//Products.find({_id:Router.current().params._id});\n      \n      return result;\n  } catch (error) {\n    throw error;\n  } \n});\n\nUI.registerHelper('getImageById',function (ImgId){\n  console.log(\"Getting from store\");\n   \n  console.log(\"Image Id : \" + ImgId);\n  Meteor.subscribe('ProductImages',ImgId);\n  var returnimgs = Images.find({ImageId:ImgId});\n  \n  return returnimgs;\n});\n\nHandlebars.registerHelper('getFirstElement', function (arr) {\n  if (!isUndefined(arr))\n\n  {var result = arr[0];\n\n  return result;}\n});\n\nHandlebars.registerHelper('compare', function (v1, v2) {\n  if (typeof v1 === 'object' && typeof v2 === 'object') {\n    return _.isEqual(v1, v2); // do a object comparison\n  } else {\n    return v1 === v2;\n  }\n});\nHandlebars.registerHelper('bigger', function (v1, v2) {\n  if (typeof v1 === 'object' && typeof v2 === 'object') {\n    return _.isEqual(v1, v2); // do a object comparison\n  } else {\n    return v1 > v2;\n  }\n});\nHandlebars.registerHelper('smaller', function (v1, v2) {\n  if (typeof v1 === 'object' && typeof v2 === 'object') {\n    return _.isEqual(v1, v2); // do a object comparison\n  } else {\n    return v1 < v2;\n  }\n});\nHandlebars.registerHelper('isSingle', function (someArr) {\n  if (typeof someArr == 'object') {\n    if (someArr.count == 1) {\n      return true;\n    }\n    return false;\n  }\n});\n\nUI.registerHelper('productPath', function (option) {\n\n  var pathing = \"/img/prods/\";\n\n  if (option == \"save\") {\n    pathing = Meteor.settings.products.fileSavePath;\n  }\n  return pathing;\n\n});\n\nUI.registerHelper('getReferenceData',function (refName){\n    var refData = Session.get('refData');\n    //return refData.find({name:refName});\n});\n\n \nUI.registerHelper('get_Add_Length', function ()\n  {\n    console.log(\"refdata sell tmp\");\n    return ReferenceData.find({name:\"addTime\"});\n  });\nUI.registerHelper('get_Prod_Cat', function()\n  {\n    console.log(\"Get Product Catalogue\");\n    return ReferenceData.find({name:\"prdCat\"});\n  });\n\nHandlebars.registerHelper('uiLogger', function (someObject) {\n  console.log(\"UI Logging \" + someObject);\n});\n\nUI.registerHelper('productImage', function (imagename) {\n  return '/img/prods/' + imagename;\n});\n\nUI.registerHelper('recipeImage', function (options) {\n  var size = options.hash.size || 'large';\n\n  if (options.hash.recipe)\n    return '/img/recipes/' + DIMENSIONS[size] + '/' + options.hash.recipe.name + '.jpg';\n});\n\nHandlebars.registerHelper('activePage', function () {\n  // includes Spacebars.kw but that's OK because the route name ain't that.\n  var routeNames = arguments;\n\n  return _.include(routeNames, Router.current().route.name) && 'active';\n});\n\nUI.registerHelper('thisUser', function () {\n  var result = \"Not logged in\";\n  if (Meteor.userId()) {\n    result = Meteor.usedId().name;\n  }\n  return result;\n})\n\nif (Meteor.isServer) {\n\n\n}","Meteor.startup(function() {\n  // Potentially prompts the user to enable location services. We do this early\n  // on in order to have the most accurate location by the time the user shares\n  \n  //if (Meteor.isCordova) {\n    var geoLocation = Geolocation.currentLocation();\n    if (geoLocation != null)\n    {\n      console.log(\"Location\");\n      console.log(geoLocation);\n    }\n  \n  //}\n  \n \n  \n});\n"," \nconsole.log(\"Creating Db Collections\");\nReferenceData = new Mongo.Collection('ReferenceData');\n//Products = new Mongo.Collection('Products');\nSellers = new Mongo.Collection('Sellers');\n //const featuredProducts = new Mongo.Collection('featuredProducts');\n \n\n// this.autorun(function() {\n     \n//       meteor.subscribe('featuerd')\n     \n//   });","Meteor.startup(() => { \n    if (Meteor.isServer) {\n\n     \n        \n\n    console.log(\"Server Fixture Startup\");  \n      // if the Links collection is empty\n      /*\n      console.log(Links.find().count());\n      if (Links.find().count() === 0) {\n        const data = [\n          {\n            title: 'Do the Tutorial',\n            url: 'https://www.meteor.com/try',\n            createdAt: new Date(),\n          },\n          {\n            title: 'Follow the Guide',\n            url: 'http://guide.meteor.com',\n            createdAt: new Date(),\n          },\n          {\n            title: 'Read the Docs',\n            url: 'https://docs.meteor.com',\n            createdAt: new Date(),\n          },\n          {\n            title: 'Discussions',\n            url: 'https://forums.meteor.com',\n            createdAt: new Date(),\n          },\n        ];\n    \n        data.forEach(link => Links.insert(link));\n      }*/\n    \n      console.log(\"Reference Data Check : \" + ReferenceData.find().count() ) ;\n      \n      if (ReferenceData.find().count() === 0 )\n        {\n          console.log(\"Adding Reference Data\");\n          const refDatas = [\n\n          \n            {name:\"busCat\",id:\"0\",value:\"Electronic\"},\n            {name:\"busCat\",id:\"1\",value:\"Fashion\"},\n            {name:\"busCat\",id:\"2\",value:\"Convience\"},\n            {name:\"busCat\",id:\"3\",value:\"Food\"},     \n            {name:\"busCat\",id:\"4\",value:\"Once Off\"},\n            {name:\"addTime\",id:\"1\",value:\"Free\",timetoadd:1},\n            {name:\"addTime\",id:\"2\",value:\"3 Days\",timetoadd:3},\n            {name:\"addTime\",id:\"3\",value:\"1 Week\",timetoadd:7},\n            {name:\"addTime\",id:\"4\",value:\"2 Weeks\",timetoadd:14},\n            {name:\"addTime\",id:\"5\",value:\"1 Month\",timetoadd:30},\n            {name:\"prdCat\",id:\"0\",value:\"Deals\"},\n            {name:\"prdCat\",id:\"1\",value:\"Home\"},\n            {name:\"prdCat\",id:\"2\",value:\"Food\"},\n            {name:\"prdCat\",id:\"3\",value:\"Security\"},\n            {name:\"prdCat\",id:\"4\",value:\"Education\"},\n            {name:\"prdCat\",id:\"5\",value:\"Cosmetic\"},\n            {name:\"prdCat\",id:\"6\",value:\"Kitchen\"},\n            {name:\"prdCat\",id:\"7\",value:\"Services\"},\n            {name:\"prdCat\",id:\"8\",value:\"Tools\"},\n            {name:\"prdCat\",id:\"9\",value:\"Fashion\"},\n            {name:\"prdCat\",id:\"10\",value:\"Motor Sales\"},\n            {name:\"prdCat\",id:\"11\",value:\"Computer\"},\n            {name:\"prdCat\",id:\"12\",value:\"Health\"},\n            {name:\"prdCat\",id:\"13\",value:\"Pop Ups\"},\n            {name:\"prdCat\",id:\"13\",value:\"Community Events\"},\n            {name:\"prdCat\",id:\"14\",value:\"Other\"}\n                ];\n      \n                refDatas.forEach(refData => ReferenceData.insert(refData));\n                console.log(\"Reference Data Post Insert Check : \" + ReferenceData.find().count() ) ;\n          }\n    \n        console.log(\"Product Data Check : \" + Products.find().count() ) ;\n      \n        \n          \n           \n           \n        if (Products.find().count() === 0)\n        { \n            prodData = [         \n            {\n            sellerId:\"1\",\n            producttitle:\"some item\",\n            productDescription:\"Some Product description\",\n            price:\"100.00\",\n            prdCat:0,    \n            prodImg : [\"1\"],\n            createdAt:new Date(),\n            expireAt : Date.now() + (150000 * 60) \n            },\n        \n            {\n            sellerId:\"1\",\n            producttitle:\"some item\",    \n            productDescription:\"Some Other description\",\n            price:\"100.00\",\n            prdCat:0,\n            prodImg : [\"2\"],\n            createdAt:new Date(),\n            expireAt : Date.now() + (150000 * 60) \n            },\n        \n            {\n            sellerId:\"1\",\n            producttitle:\"some item\",\n            productDescription:\"Some New description\",\n            price:\"100.00\",\n            prdCat:0,\n            prodImg : [ \"3\"],\n            createdAt:new Date(),\n            expireAt : Date.now() + (150000 * 60) \n            }];\n            prodData.forEach(prod => Products.insert(prod));\n            console.log(\"Products Data Post Insert Check : \" + Products.find().count() ) ;\n\n        }\n       \n        console.log(\"Selleres Data Check : \" + Sellers.find().count() ) ;   \n    \n        if (Sellers.find().count() === 0)\n        {\n            Sellers.insert({_id:\"1\",\n              busCat:\"Electronic\",\n            businessname:\"Test Business\",         \n            businessag:\"tag line\",\n            add1:\"Address 1\",\n            add2:\"Address 2\",\n            add3:\"Address 3\",\n            add4:\"Address 4\",\n            office:\"0118574563\",\n            cell:\"0118574563\",\n            email:\"0118574563\",\n            contact1:\"bob\",\n            contact2:\"rick\", \n            url:\"www.somesite.com\",\n            logoImg:\"http://cooldigital.photography/wp-content/uploads/2014/02/Details-of-a-Marigold-Blossom-620x404.jpg\",\n            createdAt: new Date()\n        });\n        console.log(\"Sellers Data Post Insert Check : \" + Sellers.find().count() ) ;\n        }\n\n\n        if (Images.find().count === 0)\n        {\n          Images.insert({\n            \n            \"original\" : {\n                \"name\" : \"249442-3600x2395.jpg\",\n                \"updatedAt\" : ISODate(\"2014-07-18T11:51:58.000Z\"),\n                \"size\" : 1874582,\n                \"type\" : \"image/jpeg\"\n            },\n            \"sellerId\" : \"1\",\n            \"ImageCat\" : \"ProductImage\",\n            \"ImageType\" : \"ProductDisplay\",\n            \"ImageId\" : \"1\",\n            \"uploadedAt\" : ISODate(\"2017-12-25T15:17:25.937Z\"),\n            \"copies\" : {\n                \"images\" : {\n                    \"name\" : \"249442-3600x2395.jpg\",\n                    \"type\" : \"image/jpeg\",\n                    \"size\" : 1874582,\n                    \"key\" : \"images-aaEvqjn48EqWDTu5c-249442-3600x2395.jpg\",\n                    \"updatedAt\" : ISODate(\"2017-12-25T15:17:25.968Z\"),\n                    \"createdAt\" : ISODate(\"2017-12-25T15:17:25.968Z\")\n                }\n            }\n        });\n        Images.insert({\n          \n          \"original\" : {\n              \"name\" : \"249442-3600x2395.jpg\",\n              \"updatedAt\" : ISODate(\"2014-07-18T11:51:58.000Z\"),\n              \"size\" : 1874582,\n              \"type\" : \"image/jpeg\"\n          },\n          \"sellerId\" : \"1\",\n          \"ImageCat\" : \"ProductImage\",\n          \"ImageType\" : \"ProductDisplay\",\n          \"ImageId\" : \"2\",\n          \"uploadedAt\" : ISODate(\"2017-12-25T15:17:25.937Z\"),\n          \"copies\" : {\n              \"images\" : {\n                  \"name\" : \"249442-3600x2395.jpg\",\n                  \"type\" : \"image/jpeg\",\n                  \"size\" : 1874582,\n                  \"key\" : \"images-aaEvqjn48EqWDTu5c-249442-3600x2395.jpg\",\n                  \"updatedAt\" : ISODate(\"2017-12-25T15:17:25.968Z\"),\n                  \"createdAt\" : ISODate(\"2017-12-25T15:17:25.968Z\")\n              }\n          }\n      });\n      Images.insert({\n       \n        \"original\" : {\n            \"name\" : \"249442-3600x2395.jpg\",\n            \"updatedAt\" : ISODate(\"2014-07-18T11:51:58.000Z\"),\n            \"size\" : 1874582,\n            \"type\" : \"image/jpeg\"\n        },\n        \"sellerId\" : \"1\",\n        \"ImageCat\" : \"ProductImage\",\n        \"ImageType\" : \"ProductDisplay\",\n        \"ImageId\" : \"3\",\n        \"uploadedAt\" : ISODate(\"2017-12-25T15:17:25.937Z\"),\n        \"copies\" : {\n            \"images\" : {\n                \"name\" : \"249442-3600x2395.jpg\",\n                \"type\" : \"image/jpeg\",\n                \"size\" : 1874582,\n                \"key\" : \"images-aaEvqjn48EqWDTu5c-249442-3600x2395.jpg\",\n                \"updatedAt\" : ISODate(\"2017-12-25T15:17:25.968Z\"),\n                \"createdAt\" : ISODate(\"2017-12-25T15:17:25.968Z\")\n            }\n        }\n    });\n        }\n      console.log(\"Fixtures Done\");\n     \n      \n    }\n})","Activities = new Mongo.Collection('activities');\n\nActivities.allow({\n  insert: function(userId, doc) {\n    return doc.userId === userId;\n  }\n});\n\nActivities.latest = function() {\n  return Activities.find({}, {sort: {date: -1}, limit: 1});\n}\n\nMeteor.methods({\n  createActivity: function(activity, tweet, loc) {\n    check(Meteor.userId(), String);\n    check(activity, {\n      recipeName: String,\n      text: String,\n      image: String\n    });\n    check(tweet, Boolean);\n    check(loc, Match.OneOf(Object, null));\n    \n    activity.userId = Meteor.userId();\n    activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n    activity.userName = Meteor.user().profile.name;\n    activity.date = new Date;\n    \n    if (! this.isSimulation && loc)\n      activity.place = getLocationPlace(loc);\n    \n    var id = Activities.insert(activity);\n    \n    if (! this.isSimulation && tweet)\n      tweetActivity(activity);\n    \n    return id;\n  }\n});\n\nif (Meteor.isServer) {\n  var twitterOauth = function(options) {\n    var config = Meteor.settings.twitter\n    var userConfig = Meteor.user().services.twitter;\n\n    return {\n      consumer_key: config.consumerKey,\n      consumer_secret: config.secret,\n      token: userConfig.accessToken,\n      token_secret: userConfig.accessTokenSecret\n    };\n  }\n  \n  var tweetActivity = function(activity) {\n    // creates the tweet text, optionally truncating to fit the appended text\n    function appendTweet(text, append) {\n      var MAX = 117; // Max size of tweet with image attached\n      \n      if ((text + append).length > MAX)\n        return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n      else\n        return text + append;\n    }\n    \n    // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n    var image = activity.image.replace(/^data.*base64,/, '');\n\n    var response = HTTP.post(\n      'https://upload.twitter.com/1.1/media/upload.json', {\n        params: { media: image },\n        npmRequestOptions: { oauth: twitterOauth() }\n      }\n    );\n    \n    if (response.statusCode !== 200)\n      throw new Meteor.Error(500, 'Unable to post image to twitter');\n\n    if (! response.data)\n      throw new Meteor.Error(500, 'Did not receive attachment from twitter');\n\n    var attachment = response.data;\n\n    response = HTTP.post(\n      'https://api.twitter.com/1.1/statuses/update.json', {\n        params: {\n          status: appendTweet(activity.text, ' #localmarket'),\n          media_ids: attachment.media_id_string\n        },\n        npmRequestOptions: { oauth: twitterOauth() }\n      }\n    );\n\n    if (response.statusCode !== 200)\n      throw new Meteor.Error(500, 'Unable to create tweet');\n  }\n  \n  var getLocationPlace = function(loc) {\n    var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n      + '?granularity=neighborhood'\n      + '&max_results=1'\n      + '&accuracy=' + loc.coords.accuracy\n      + '&lat=' + loc.coords.latitude\n      + '&long=' + loc.coords.longitude;\n    \n    var response = HTTP.get(url,\n                            {npmRequestOptions: { oauth: twitterOauth() } });\n\n    if (response.statusCode === 200 && response.data) {\n      var place = _.find(response.data.result.places, function(place) {\n        return place.place_type === 'neighborhood';\n      });\n      \n      return place && place.full_name;\n    }\n  }\n}\n\n// Initialize a seed activity\nMeteor.startup(function() {\n  if (Meteor.isServer && Activities.find().count() === 0) {\n    Activities.insert({\n      recipeName: 'summer-apricots-honey-panna-cotta',\n      text: 'I substituted strawberries for apricots - incredible!',\n      image: '/img/activity/activity-placeholder-strawberry-640x640.jpg',\n      userAvatar: 'https://avatars3.githubusercontent.com/u/204768?v=2&s=400',\n      userName: 'Matt Debergalis',\n      place: 'SoMA, San Francisco',\n      date: new Date\n    });\n  }\n});\n\n","BookmarkCounts = new Mongo.Collection('bookmarkCounts');\n\nMeteor.methods({\n  'bookmarkRecipe': function(recipeName) {\n    check(this.userId, String);\n    check(recipeName, String);\n\n    var affected = Meteor.users.update({\n      _id: this.userId,\n      bookmarkedRecipeNames: {$ne: recipeName}\n    }, {\n      $addToSet: {bookmarkedRecipeNames: recipeName}\n    });\n\n    if (affected)\n      BookmarkCounts.update({recipeName: recipeName}, {$inc: {count: 1}});\n  },\n\n  'unbookmarkRecipe': function(recipeName) {\n    check(this.userId, String);\n    check(recipeName, String);\n\n    var affected = Meteor.users.update({\n      _id: this.userId,\n      bookmarkedRecipeNames: recipeName\n    }, {\n      $pull: {bookmarkedRecipeNames: recipeName}\n    });\n\n    if (affected)\n      BookmarkCounts.update({recipeName: recipeName}, {$inc: {count: -1}});\n  }\n});\n\n// Initialize bookmark counts. We could use upsert instead.\nif (Meteor.isServer && BookmarkCounts.find().count() === 0) {\n  Meteor.startup(function() {\n    _.each(RecipesData, function(recipe, recipeName) {\n      BookmarkCounts.insert({recipeName: recipeName, count: 0});\n    });\n  });\n}","//import { Buffer } from \"buffer\";\n\n\n \n\n\n// Handlebars.registerHelper('saveImageFile',function(fbinaryData,filename)\n// {\n//   //import {FilesCollection} from 'meteor/ostrio:files';\n//   //var fs = require('meteor/ostrio:files');\n//   var result = false;\n//   var  base64Image = fbinaryData.split(\",\")[1];\n//   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n//   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n//   //productImage = filename;\n//   var  imagePath = Meteor.settings.products.imgPath;\n//   console.log(imagePath);\n//   try\n//   {\n//   require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n//         if (err)\n//         {\n//             console.log(err); // writes out file without error, but it's not a valid image\n//         }\n//         else\n//         {\n//           result = true;\n//         }\n//       });\n//     }\n//     catch(exp)\n//     {\n//       console.log(\"Client side File Save to server...\" + imagePath + filename);\n//       result = false;\n//     }\n//     return result;\n  \n// });\n\nHandlebars.registerHelper('UILogger',function(source,obj)\n{\n  console.log(\"UI Logger : \" + source);\n  console.log(\"Object : \"+ obj);\n});\n\nfunction newRandomId(prefixStr)\n{\n  var rnd = prefixStr + \"_\" + require(\"meteor/random\").id();\n  return rnd;\n}\n\n// Handlebars.registerHelper(\"getReferenceData\",function(refname){\n//   console.log(\"reference data load to cache\");\n//   var result = Meteor.apply('getReferenceData',[refname],{ wait:true,returnStubValue: false });\n// });\n\nfunction jsWriteFile(fbinaryData,filename)\n{\n  var  result = false;\n  try \n  {\n    //import {FilesCollection} from 'meteor/ostrio:files';\n   //var fs = require('meteor/ostrio:files');\n   // global.Buffer = global.Buffer || Npm.require(\"buffer\").Buffer;\n   var result = true;\n   var fs = Npm.require('fs');\n   var  base64Image = fbinaryData.split(\",\")[1];\n   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n   //productImage = filename;\n  console.log(\"Writing file\");\n     var pathtoFile =  Meteor.rootPath;\n    var strPath = pathtoFile.substr(0,pathtoFile.length - 7);\n\n    \n     \n\n    \n   var  imagePath = strPath + Meteor.settings.products.fileSavePath;\n   imagePath = Meteor.settings.products.fileSavePath;\n   var writeFileName = imagePath + filename;\n  \n   console.log(writeFileName);\n   try\n   {\n   // var fileWriter = new writeFile()\n   //require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n         if (!fs.exists(writeFileName))\n         {   \n         fs.writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n\n             if (err)\n             {\n                 console.log(err); // writes out file without error, but it's not a valid image\n                 result = false;\n             }\n             else\n             {\n               result = true;\n             }\n           });\n         }\n     }\n     catch(exp)\n     {\n       console.log(\"Server side File Save to server...\" + imagePath + filename);\n       console.log(exp);\n       result = false;\n     }\n  } \n  catch (error) \n  {\n    result = false;\n  }\n  return result;\n}\n\n\nMeteor.methods({ \n  saveImageFile: function(fbinaryData,filename)\n  {\n    try {\n      return jsWriteFile(fbinaryData,filename);\n    } catch (error) {\n      throw error;\n    }\n\n  //  //import {FilesCollection} from 'meteor/ostrio:files';\n  //  //var fs = require('meteor/ostrio:files');\n  //  // global.Buffer = global.Buffer || Npm.require(\"buffer\").Buffer;\n  //   var result = true;\n  //   var fs = Npm.require('fs');\n  //   var  base64Image = fbinaryData.split(\",\")[1];\n  //   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n  //   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n  //   //productImage = filename;\n  //   var  imagePath = Meteor.settings.products.fileSavePath;\n  //   var writeFileName = imagePath + filename;\n   \n  //   console.log(writeFileName);\n  //   try\n  //   {\n  //   // var fileWriter = new writeFile()\n  //   //require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n  //         if (!fs.exists(writeFileName))\n  //         {   \n  //         fs.writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n\n  //             if (err)\n  //             {\n  //                 console.log(err); // writes out file without error, but it's not a valid image\n  //                 result = false;\n  //             }\n  //             else\n  //             {\n  //               result = true;\n  //             }\n  //           });\n  //         }\n  //     }\n  //     catch(exp)\n  //     {\n  //       console.log(\"Server side File Save to server...\" + imagePath + filename);\n  //       console.log(exp);\n  //       result = false;\n  //     }\n  //     return result;\n    \n  },\n  getReferenceData:function(refName)\n  {\n\n    switch(refName) \n      {\n        case \"businessCat\":\n            return ReferenceData.find({name:busCat});\n            break;\n        case \"productCat\":\n        return ReferenceData.find({name:prdCat});\n            break;\n        case \"timeCat\":\n        return ReferenceData.find({name:addTime});\n        break;\n        default:\n            return {};\n      }\n   \n    \n  }\n});\n// function _saveImageFile()\n// {\n//   var result = false;\n//   var  base64Image = fbinaryData.split(\",\")[1];\n//   var binaryData = new  Buffer(base64Image,'base64').toString('binary') ;\n//   //var filename = \"/img/\" + sellerId+\"_\" + Random.id() +\".jpg\";\n//   //productImage = filename;\n//   var  imagePath = Meteor.settings.product.filePath;\n//   try\n//   {\n//   require(\"fs\").writeFile(imagePath + filename ,binaryData, \"binary\", function(err) {\n//         if (err)\n//         {\n//             console.log(err); // writes out file without error, but it's not a valid image\n//         }\n//         else\n//         {\n//           result = true;\n//         }\n//       });\n//     }\n//     catch(exp)\n//     {\n//       console.log(\"Client side File Save to server...\" + filename);\n//       result = false;\n//     }\n//     return result;\n// }","console.log(\"Server create FS Media Collection\");\n\n//var imageStore = new FS.Store.GridFS(\"images\", {\n//mongoUrl: 'mongodb://127.0.0.1:3001/justadit/', // optional, defaults to Meteor's local MongoDB\n//mongoOptions: {...},  // optional, see note below\n//transformWrite: myTransformWriteFunction, //optional\n//transformRead: myTransformReadFunction, //optional\n//maxTries: 1, // optional, default 5\n//chunkSize: 1024*1024  // optional, default GridFS chunk size in bytes (can be overridden per file).\n// Default: 2MB. Reasonable range: 512KB - 4MB\n//  });\nvar imageStore = new FS.Store.FileSystem(\"images\", {\n    path: \"/var/www/justaditimages/\", //optional, default is \"/cfs/files\" path within app container\n    //transformWrite: function(fileObj, readStream, writeStream) {\n        //console.log(\"Resize Image\");\n        //console.log(fileObj.name() + \" : \"  + fileObj.size());\n        // if (fileObj.size() > 500)\n        // {\n        //     if (gm.isAvailable)\n        //     {\n        //         gm(readStream, fileObj.name()).resize('500').stream().pipe(writeStream);\n        //     }\n        //     else\n        //     {\n        //         console.log(\"No GraphicsMagick Installed.\")\n        //     }\n        // }\n    //},\n    chunkSize: 2*1024*1024 - 1024,  // optional, default GridFS chunk size in bytes (can be overridden per file).\n    //Default: 2MB,//. Reasonable range: 512KB - 4MB\n    //transformWrite: myTransformWriteFunction, //optional\n    //transformRead: myTransformReadFunction, //optional\n    maxTries: 2 //optional, default 5\n});\n//   var videoStore = new FS.Store.GridFS(\"videos\", {\n//     //mongoUrl: 'mongodb://127.0.0.1:3001/justaditmedia/', // optional, defaults to Meteor's local MongoDB\n//     //mongoOptions: {...},  // optional, see note below\n//     //transformWrite: myTransformWriteFunction, //optional\n//     //transformRead: myTransformReadFunction, //optional\n//     //maxTries: 1, // optional, default 5\n//     //chunkSize: 1024*1024  // optional, default GridFS chunk size in bytes (can be overridden per file).\n//                           // Default: 2MB. Reasonable range: 512KB - 4MB\n//   });\n\nImages = new FS.Collection(\"images\", {\n    stores: [imageStore]\n});\n\n\n// Videos = new FS.Collection(\"videos\", {\n//   stores: [videoStore]\n// // });\n\n\nImages.allow({\n    insert: function () {\n        return true;\n    },\n    update: function () {\n        return true;\n    },\n    remove: function () {\n        return true;\n    },\n    download: function () {\n        return true;\n    }\n});\n\n// Videos.allow({ \n//     insert: function() { \n//         return true; \n//     }, \n//     update: function() { \n//         return true; \n//     }, \n//     remove: function() { \n//         return true; \n//     } \n// });\n\n\nMeteor.methods({\n    getProductImages: function (ImgId) {\n \n        // var result = Products.find({_id:prodid});\n        var prodImages = Images.find({ ImageId: ImgId });\n        var returnImages = [];\n        prodImages.forEach(element => {\n            returnImages.push(element);\n\n        });\n        //var sell = Meteor.apply('getProductSeller', [prod.sellerId], { returnStubValue: true });\n        //prod.seller = sell;\n        return returnImages;\n\n        //return Meteor.Mongo.Products.findOne({_id:prodid});\n    },\n});","News = new Mongo.Collection('news');\n\nNews.allow({\n  insert: function(userId) {\n    var user = Meteor.users.findOne(userId);\n    return user && user.admin;\n  }\n});\n\nNews.latest = function() {\n\n  //http://feeds.news24.com/articles/news24/SouthAfrica/rss\n  return News.findOne({}, {sort: {date: -1}, limit: 1});\n}\n\nif (Meteor.isServer && News.find().count() === 0) {\n  Meteor.startup(function() {\n    News.insert({\n      text: 'First of the season citrus has just arrived. Get succulent oranges and tangerines in our produce aisle!',\n      date: new Date\n    });\n  });\n}","Product = new Mongo.Collection('Product');\n\nProduct.allow({\n    insert: function(userId, doc) {\n      return doc.userId === userId;\n    }\n  });\n  \n \n  Meteor.methods({\n    'latestProduct':function(id){\n     \n      return Product.find({},{order:{createdAt:-1}});\n      //return result[0];\n    },\n    'QSearchProduct':function(id){\n      console.log(\"Searching\");\n      Meteor.subscribe('QSearch', id);\n      var results =  Products.find({});\n      console.log(results); \n      return results;\n      \n    },\n    'products.insert':function (productObj)\n    {\n        //var fs = Npm.require('fs');\n        var newProd = false;\n        if (productObj._id == \"\")\n        {\n            newProd = true;\n        }\n        var ProdImgs = [];\n      try \n      {\n        // console.log(productObj.prodImg);\n        // for (pImg in productObj.prodImg)\n        // {\n        //   if (newProd)\n        //   {\n        //     var randId = Random.id();// require('random');     \n        //     var FileName = productObj.userId + \"_\" + randId  + \".jpg\";            \n        //     ProdImgs.push(FileName);                \n        //     var busLogCall = Meteor.apply('saveImageFile',[pImg,FileName],{wait:true});                   \n        //   }\n        //   else\n        //   {\n        //     if (!fs.exists(pImg))\n        //     {\n        //       var randId = Random.id();// require('random');     \n        //       var FileName = productObj.userId + \"_\" + randId  + \".jpg\";            \n        //       ProdImgs.push(FileName);                \n        //       var busLogCall = Meteor.apply('saveImageFile',[pImg,FileName],{wait:true}); \n        //     }\n\n        //   }\n        // }\n        //   productObj.prodImg = ProdImgs;\n          var productResult = \n          Products.upsert({\n          // Selector\n          _id: productObj._id \n          }, {\n          // Modifier\n          $set: {\n            sellerId : productObj.sellerId,\n            producttitle : productObj.producttitle,\n            productDescription : productObj.productDescription,\n            price : productObj.price,\n            prdCat : productObj.prdCat,\n            prodImg : productObj.prodImg,\n            createdAt : productObj.createdAt,\n            expireAt : productObj.expireAt\n            \n           \n          \n          }\n          });\n\n      }\n      catch (exp)\n      {\n        throw exp;\n      }\n    }\n  });\n\n/*\n\n\nMeteor.methods(\n    \n    {\n  'products.insert'(sellerId,producttitle, productDescription , price,prodCat,createdAt,expireAt, url,prodImg) {\n\n    var ProdInsert = Products.insert({\n      sellerId, \n      producttitle,\n      productDescription , \n      price,\n      prodCat,\n      createdAt,\n      expireAt,\n      url,\n      prodImg\n      \n  });\n  return ProdInsert;\n\n  \n}\n\n\n\n\n  Product.getProduct = function(prodId)\n  {\n    var returnProduct ;\n    console.log(\"Single product Meteor Call method\");\n    try\n    {\n        Meteor.call('getProduct',[ prodId],(error,result)=>{\n            if (error)\n            {\n                console.log(error);\n            }\n            else\n            {\n                console.log(\"Meteor Call to get product : \" + result);\n          \n                returnProduct = result;\n            }\n        });\n      \n      console.log(\"Post Meteor Call after assign \" + returnProduct);\n    }\n    catch(exp)\n    {\n      throw exp;\n    }\n    return returnProduct;\n  }\n\n   */\n\n  Product.MyProducts= function(sellerId){\n      return Product.find({SellerID:sellerId});\n  }\n\n  Product.more = function(continuationValue){\n      //https://www.npmjs.com/package/mongo-cursor-pagination\n      //Product.find({},{order:{createdAt:-1}});\n      return Product.find({}, {order: {createdAt: -1}});\n    \n  } \n\n   \n  /*\n  Meteor.methods({\n    createActivity: function(activity, tweet, loc) {\n      Meteor.userId(), String,\n      activity, {\n        recipeName: String,\n        text: String,\n        image: String\n      },\n      tweet, Boolean,\n      loc, Match.OneOf(Object, null),\n      \n      activity.userId = Meteor.userId(,\n      activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n      activity.userName = Meteor.user().profile.name;\n      activity.date = new Date;\n      \n      if (! this.isSimulation && loc)\n        activity.place = getLocationPlace(loc,\n      \n      var id = Activities.insert(activity,\n      \n      if (! this.isSimulation && tweet)\n        tweetActivity(activity,\n      \n      return id;\n    }\n  },\n  \n  if (Meteor.isServer) {\n    var twitterOauth = function(options) {\n      var config = Meteor.settings.twitter\n      var userConfig = Meteor.user().services.twitter;\n  \n      return {\n        consumer_key: config.consumerKey,\n        consumer_secret: config.secret,\n        token: userConfig.accessToken,\n        token_secret: userConfig.accessTokenSecret\n      };\n    }\n    \n    var tweetActivity = function(activity) {\n      // creates the tweet text, optionally truncating to fit the appended text\n      function appendTweet(text, append) {\n        var MAX = 117; // Max size of tweet with image attached\n        \n        if ((text + append).length > MAX)\n          return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n        else\n          return text + append;\n      }\n      \n      // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n      var image = activity.image.replace(/^data.*base64,/, '',\n  \n      var response = HTTP.post(\n        'https://upload.twitter.com/1.1/media/upload.json', {\n          params: { media: image },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n      \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to post image to twitter',\n  \n      if (! response.data)\n        throw new Meteor.Error(500, 'Did not receive attachment from twitter',\n  \n      var attachment = response.data;\n  \n      response = HTTP.post(\n        'https://api.twitter.com/1.1/statuses/update.json', {\n          params: {\n            status: appendTweet(activity.text, ' #localmarket'),\n            media_ids: attachment.media_id_string\n          },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n  \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to create tweet',\n    }\n    \n    var getLocationPlace = function(loc) {\n      var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n        + '?granularity=neighborhood'\n        + '&max_results=1'\n        + '&accuracy=' + loc.coords.accuracy\n        + '&lat=' + loc.coords.latitude\n        + '&long=' + loc.coords.longitude;\n      \n      var response = HTTP.get(url,\n                              {npmRequestOptions: { oauth: twitterOauth() } },\n  \n      if (response.statusCode === 200 && response.data) {\n        var place = _.find(response.data.result.places, function(place) {\n          return place.place_type === 'neighborhood';\n        },\n        \n        return place && place.full_name;\n      }\n    }\n  }\n   \n  */","Products = new Mongo.Collection('Products');\n\n\n\nProducts.allow({\n  insert: function (userId, doc) {\n    return doc.userId === userId;\n  },\n  update:function(userId,doc)\n  {\n    return false;\n  }\n});\n\n\nMeteor.methods({\n  'featuredProducts': function () {\n    \n    console.log(\"Getting Latest featured products data \" + Meteor.settings.featuredProductsLimit);\n \n \n    var prodresult = [];\n    try\n    {\n    \n    var prod = Products.find({},{order:{createdAt: -1}},{limit: Meteor.settings.featuredProductsLimit});\n   \n    prod.forEach(element => {\n \n      prodresult.push(element);\n    });\n  }\n  catch(exp)\n  {\n    console.log(\"Error getting featured Products : \" + exp);\n    throw exp;\n  }\n      \n \n    return {Results:prodresult};\n  },\n  'getProduct': function (prodid) {\n    // var result = Products.find({_id:prodid});\n    try\n    {\n     \n      //Meteor.subscribe('product',prodid);\n      //Meteor.subscribe('getSellers');\n     \n    var prod = Products.findOne({ _id: prodid });\n    if (prod)\n    {\n      var sell = Sellers.findOne({userId:prod.sellerId});\n      var prodImages = Meteor.apply('getProductImages', [prod.prodImg], { returnStubValue: true });\n      prod.seller = sell;\n      prod.prodImgs = prodImages;\n    }\n    //loading.stop();\n    return prod;\n    }\n    catch (exp)\n    {\n      //loading.halt();\n      console.log(exp);\n    }\n\n    //return Meteor.Mongo.Products.findOne({_id:prodid});\n  },\n  \n  'getProductSeller': function (sellerId) {\n    Meteor.subscribe('getSeller',sellerId);\n    return Sellers.findOne({ userId: Meteor.userId() });\n  },\n  'QSearchProducts' : function (searchItem)\n  {\n    //debugger;\n    var searchTerms = \"'/^.*\" + searchItem[0] + \".*$/i'\";\n    console.log(searchTerms);\n    //$text: {$search: searchValue} },\n    var prods = Products.find({$or:[{\"producttitle\":{$regex:searchTerms}} , {\"productDescrption\":{$regex:searchTerms}}]});\n    var result = [];\n    prods.forEach(element => {\n      result.push(element);\n    });\n    //var result = Products.find({$text: {$search: searchTerms}}).fetch();\n    //({$text:{$search:\"tutorialspoint\"}})\n    \n    console.log(result);\n    return result;\n  },\n  'getSellerProducts': function () {\n    console.log(\"Getting Seller Server Side Products\");\n\n    var prodresult = [];\n\n    //Product.find({},{order:{createdAt:-1}});\n    var prod = Products.find({sellerId:Meteor.userId()},{order:{createdAt: -1}});\n    prod.forEach(element => {\n      //console.log(element);\n      prodresult.push(element);\n    });\n\n    return prodresult;\n  }\n\n});\n\nProducts.allProducts = function () {\n  console.log(\"Getting latest products\" + Products.count());\n  Meteor.subscribe('allProducts');\n  return Products.find({},{order:{createdAt: -1}});\n  // return Products.find({});\n}\nProducts.getProduct = function (prodId) {\n  var result;\n  console.log(\"Single product api method\");\n  try {\n    result = Products.findOne({ _id: prodId }, { limit: 1 });\n    //console.log(result.producttitle);\n  }\n  catch (exp) {\n    throw exp;\n  }\n  return result;\n}\n\nProducts.bookedMarked = function () {\n  // here get all my userid Booked marked products and then get each prod and push to array and return the array.\n}\n\nProducts.latestProducts = function () {\n  var result;\n  console.log(\"Api method\");\n  try {\n    //Product.find({},{order:{createdAt:-1}});\n    result = Products.find({},{order:{createdAt: -1}});\n\n  }\n  catch (exp) {\n    throw exp;\n  }\n\n\n  return result;//Products.find({}, {sort: {createdAt: -1}, limit: 1});\n\n\n}\n\nProducts.MyProducts = function (SellerId) {\n  //Product.find({},{order:{createdAt:-1}});\n  return Products.find({ sellerId: SellerId },{order:{createdAt: -1}});;\n}\n\n// Products.featuredProducts = function () {\n\n \n//   var result = [];\n//   console.log(\"Api method featuredProducts \");\n//   //Meteor.settings.featuredProductsLimit \n//   try {\n//     //result = Products.find({},{sort: {createdAt:1}, limit: 4});\n//     //console.log(result);\n\n//   }\n//   catch (exp) {\n//     throw exp;\n//   }\n\n\n//   return result;//Products.find({}, {sort: {createdAt: -1}, limit: 1});\n\n\n//   // var ctr = Meteor.settings.featuredProductsLimit;\n//   // console.log(\"Api Method featured : \" +  ctr);\n//   // var result = Products.find({},{sort:{createdAt:1},limit: 2});//Meteor.settings.featuredProductsLimit}); \n//   // return result;// Products.find({},{sort:{createdAt:1},limit: 2});//Meteor.settings.featuredProductsLimit});\n// }\n\nProducts.more = function (continuationValue) {\n  //https://www.npmjs.com/package/mongo-cursor-pagination\n  return Products.find().sort({createdAt:-1}).limit(12).skip(continuationValue);\n\n}\n\nMeteor.methods({\n  createProduct: function (product, loc) {\n    check(product, {\n      sellerId: String,\n      producttitle: String,\n      productDescription: String,\n      price: Number,\n      prodCat: String,\n      url: String\n    },\n      loc, Match.OneOf(Object, null));\n\n    product.sellerId = Meteor.userId;\n    product.createDate = new Date;\n    product.expireDate = require(\"moment\");\n    var ProdInsert = Products.insert({\n      sellerId,\n      producttitle,\n      productDescription,\n      price,\n      prodCat,\n      createdAt,\n      expireAt,\n      url,\n      prodImg\n\n    });\n    return ProdInsert;\n\n  },\n\n});\n  /*\n  Meteor.methods({\n    createActivity: function(activity, tweet, loc) {\n      Meteor.userId(), String,\n      activity, {\n        recipeName: String,\n        text: String,\n        image: String\n      },\n      tweet, Boolean,\n      loc, Match.OneOf(Object, null),\n      \n      activity.userId = Meteor.userId(,\n      activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n      activity.userName = Meteor.user().profile.name;\n      activity.date = new Date;\n      \n      if (! this.isSimulation && loc)\n        activity.place = getLocationPlace(loc,\n      \n      var id = Activities.insert(activity,\n      \n      if (! this.isSimulation && tweet)\n        tweetActivity(activity,\n      \n      return id;\n    }\n  },\n  \n  if (Meteor.isServer) {\n    var twitterOauth = function(options) {\n      var config = Meteor.settings.twitter\n      var userConfig = Meteor.user().services.twitter;\n  \n      return {\n        consumer_key: config.consumerKey,\n        consumer_secret: config.secret,\n        token: userConfig.accessToken,\n        token_secret: userConfig.accessTokenSecret\n      };\n    }\n    \n    var tweetActivity = function(activity) {\n      // creates the tweet text, optionally truncating to fit the appended text\n      function appendTweet(text, append) {\n        var MAX = 117; // Max size of tweet with image attached\n        \n        if ((text + append).length > MAX)\n          return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n        else\n          return text + append;\n      }\n      \n      // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n      var image = activity.image.replace(/^data.*base64,/, '',\n  \n      var response = HTTP.post(\n        'https://upload.twitter.com/1.1/media/upload.json', {\n          params: { media: image },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n      \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to post image to twitter',\n  \n      if (! response.data)\n        throw new Meteor.Error(500, 'Did not receive attachment from twitter',\n  \n      var attachment = response.data;\n  \n      response = HTTP.post(\n        'https://api.twitter.com/1.1/statuses/update.json', {\n          params: {\n            status: appendTweet(activity.text, ' #localmarket'),\n            media_ids: attachment.media_id_string\n          },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n  \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to create tweet',\n    }\n    \n    var getLocationPlace = function(loc) {\n      var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n        + '?granularity=neighborhood'\n        + '&max_results=1'\n        + '&accuracy=' + loc.coords.accuracy\n        + '&lat=' + loc.coords.latitude\n        + '&long=' + loc.coords.longitude;\n      \n      var response = HTTP.get(url,\n                              {npmRequestOptions: { oauth: twitterOauth() } },\n  \n      if (response.statusCode === 200 && response.data) {\n        var place = _.find(response.data.result.places, function(place) {\n          return place.place_type === 'neighborhood';\n        },\n        \n        return place && place.full_name;\n      }\n    }\n  }\n   \n  */","RecipesData = {\n\"spring-fromage-fort\": {\n  \"title\": \"Fromage Fort\",\n  \"highlighted\": true,\n  \"excerpt\": \"When Iâ€™ve got too many cheese bits on hand, it's now fromage fort to the rescue\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2014/04/fromage-forte-cheese-dip-spread-recipe/\"\n  },\n  \"cookTime\": \"15 min\",\n  \"ingredients\": [\n    \"8 ounces (225g) cheese pieces, hard rinds removed\",\n    \"1 to 2 ounces (30 to 60g) cream cheese\",\n    \"1/4 cup (60ml) dry white wine\",\n    \"1 garlic clove, peeled and minced\",\n    \"a few turns of freshly ground black pepper\",\n    \"pinch of cayenne or red pepper powder\",\n    \"1 tablespoon minced chives or flat-leaf parsley\",\n    \"chives or parsley, for garnish\"\n  ],\n  \"directions\": [\n    \"Cut the cheese into bite-sized cubes and put them in the bowl of a food processor with 1 ounce (30g) of the cream cheese, wine, garlic, and the black and red peppers.\",\n    \"Process the mixture until completely smooth. If it is not completely smooth (which may happen if you are starting with an assortment of harder cheeses), add the additional cream cheese, and continue to process.\"\n  ],\n  \"name\": \"spring-fromage-fort\"\n},\n\"spring-ragu-bolognese\": {\n  \"title\": \"Classic Ragu Bolognese\",\n  \"excerpt\": \"A certain magic happens as the beef and aromatic vegetables slowly cook down with wine, tomato paste, and broth\",\n  \"source\": {\n    \"name\": \"Bon AppÃ©tit\",\n    \"url\": \"http://www.bonappetit.com/recipe/classic-rag-bolognese\"\n  },\n  \"cookTime\": \"1 hr 10 min\",\n  \"ingredients\": [\n    \"2 Tbsp. extra-virgin olive oil\",\n    \"2 medium onions, finely chopped (about 1 1/2 cups)\",\n    \"2 celery stalks, finely chopped (about 1 cup)\",\n    \"2 carrots, peeled, finely chopped (about 3/4 cup)\",\n    \"6 oz. ground beef (85% lean)\",\n    \"6 oz. ground veal\",\n    \"3 oz. thinly sliced pancetta, finely chopped\",\n    \"1/2 cup dry red wine\",\n    \"3 cups (about) beef stock or chicken stock, divided\",\n    \"3 Tbsp. tomato paste\",\n    \"Kosher salt and freshly ground black pepper\",\n    \"1 cup whole milk\",\n    \"1 lb. tagliatelle or fettuccine (preferably fresh egg)\",\n    \"Finely grated Parmesan (for serving)\"\n  ],\n  \"directions\": [\n    \"Heat oil in a large heavy pot over medium-high heat.\",\n    \"Add onions, celery, and carrots.\"\n  ],\n  \"name\": \"spring-ragu-bolognese\"\n},\n\"spring-animal-cracker-cookies\": {\n  \"title\": \"Animal-Cracker Cookies\",\n  \"excerpt\": \"Create and decorate magical cookies that are as much fun as a day at the circus!\",\n  \"source\": {\n    \"name\": \"Williams-Sonoma\",\n    \"url\": \"http://www.williams-sonoma.com/recipe/animal-cracker-cookies.html\"\n  },\n  \"cookTime\": \"1 hr\",\n  \"ingredients\": [\n    \"2 1/2 cups all-purpose flour\",\n    \"1 tsp. baking powder\",\n    \"1/2 tsp. salt\",\n    \"1/8 tsp. freshly grated nutmeg\",\n    \"1/8 tsp. mace\",\n    \"12 Tbs. (1 1/2 sticks) unsalted butter, at room temperature\",\n    \"1 cup sugar\",\n    \"1 egg\",\n    \"1 tsp. vanilla extract\"\n  ],\n  \"directions\": [\n    \"Over a small bowl, sift together the flour, baking powder, salt, nutmeg and mace. Set aside.\",\n    \"In the bowl of an electric mixer fitted with the flat beater, beat the butter on high speed for 2 minutes. Reduce the speed to medium, slowly add the sugar and beat for 2 minutes, stopping the mixer occasionally to scrape down the sides of the bowl. Add the egg and vanilla and beat for 1 minute, stopping the mixer once to scrape down the sides of the bowl.\"\n  ],\n  \"name\": \"spring-animal-cracker-cookies\"\n},\n\"spring-chicken-in-mole\": {\n  \"title\": \"Chicken in MolÃ©\",\n  \"excerpt\": \"If there is one dish that could be considered Mexican haute cuisine, then Mole Poblano is surely it\",\n  \"source\": {\n    \"name\": \"Epicurious\",\n    \"url\": \"http://www.epicurious.com/recipes/food/views/Chicken-in-Mole-Puebla-Style-238185\"\n  },\n  \"cookTime\": \"2 hr\",\n  \"ingredients\": [\n    \"4 pounds chicken pieces, skin on\",\n    \"Sea salt and ground black pepper to taste\",\n    \"2 tablespoons sesame seeds, toasted, for garnish\",\n    \"white rice\",\n    \"9 mulato chiles\",\n    \"7 pasilla chiles\",\n    \"6 ancho chiles\",\n    \"1 cup plus 9 tablespoons vegetable oil or lard plus additional as needed\",\n    \"4 or 5 tomatillos, husked and cooked until soft\",\n    \"5 whole cloves\",\n    \"20 whole black peppercorns\",\n    \"1-inch piece of a Mexican cinnamon stick\",\n    \"1 tablespoon seeds from the chiles, toasted\",\n    \"1/2 teaspoon anise seeds, toasted\",\n    \"1/4 teaspoon coriander seeds, toasted\",\n    \"8 tablespoons sesame seeds, toasted\",\n    \"4 garlic cloves, roasted\",\n    \"3 tablespoons raisins\",\n    \"20 whole almonds, blanched\",\n    \"1/4 cup pumpkin seeds\",\n    \"2 corn tortillas, torn into pieces\",\n    \"3 stale French rolls, cut into 1-inch slices\",\n    \"6 to 7 cups reserved chicken broth as needed\",\n    \"1 1/2 ounces Mexican chocolate, chopped\"\n  ],\n  \"directions\": [\n    \"In a large stock pot, parboil the chicken in water seasoned with salt and pepper to taste. Drain, reserving cooking broth, and refrigerate until ready to assemble the dish.\",\n    \"Prepare the Mole Poblano. Clean the chiles by removing stems, veins, and seeds; reserve 1 tablespoon of the seeds.\"\n  ],\n  \"name\": \"spring-chicken-in-mole\"\n},\n\"spring-spanish-asparagus-revuelto\": {\n  \"title\": \"Spanish Asparagus Revuelto\",\n  \"excerpt\": \"In Spain, wild asparagus is very popular, and itâ€™s a sure sign of spring\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1016240/spanish-asparagus-revuelto.html\"\n  },\n  \"cookTime\": \"30 min\",\n  \"ingredients\": [\n    \"Olive oil\",\n    \"2 peeled garlic cloves, plus 1/2 teaspoon minced garlic\",\n    \"2 cups bread cubes, made with day-old bread, cut in 1/2-inch cubes\",\n    \"Salt and pepper\",\n    \"2 ounces diced Spanish chorizo\",\n    \"1 bunch thin asparagus, about 1 1/2 pounds, cut in 1- to 2-inch lengths\",\n    \"1 bunch green onions, chopped\",\n    \"8 large eggs, beaten\",\n    \"1/2 teaspoon pimentÃ³n\",\n    \"2 tablespoons roughly chopped Italian parsley\"\n  ],\n  \"directions\": [\n    \"Put 3 tablespoons olive oil in a cast-iron skillet over medium-high heat. Add peeled garlic cloves and let them sizzle until lightly browned, then remove.\",\n    \"Add bread cubes, season with salt and pepper, lower heat to medium and gently fry until lightly browned and crisp, about 2 minutes. Remove bread and set aside to cool.\"\n  ],\n  \"name\": \"spring-spanish-asparagus-revuelto\"\n},\n\"spring-meatloaf\": {\n  \"title\": \"Fatted Calf's Meatloaf\",\n  \"highlighted\": true,\n  \"excerpt\": \"It is a thing of beauty, shaped into a large oval loaf and glazed with tangy cocktail sauce\",\n  \"source\": {\n    \"name\": \"Food52\",\n    \"url\": \"http://food52.com/recipes/24302-fatted-calf-s-meatloaf\"\n  },\n  \"cookTime\": \"1 hr 30 min\",\n  \"ingredients\": [\n    \"3/4 teaspoons black peppercorns\",\n    \"2 allspice berries\",\n    \"2 teaspoons fennel seed\",\n    \"1 teaspoon chile flakes\",\n    \"1 whole clove\",\n    \"1 1/4 pound boneless lean beef from eye of round or sirloin, cut into 1-inch cubes\",\n    \"1 pound boneless pork picnic, cut into 1-inch cubes\",\n    \"4 ounces pork back fat, cut into 1-inch cubes\",\n    \"Sea salt\",\n    \"2 teaspoons chopped garlic\",\n    \"4 ounces chopped bacon\",\n    \"2 cups diced yellow onion\",\n    \"2 tablespoons unsalted butter\",\n    \"6 tablespoons fresh breadcrumbs\",\n    \"1 egg lightly beaten\",\n    \"1/2 cup ketchup\",\n    \"1 1/2 teaspoon Tabasco sauce\",\n    \"1 1/4 teaspoon Worcestershire sauce\",\n    \"1 teaspoon grated fresh horseradish\",\n    \"1/4 cup chopped parsley\",\n    \"2 tablespoons chopped oregano\",\n    \"1 tablespoon chopped thyme\",\n    \"1 tablespoon chopped sage\",\n    \"1/4 cup ketchup\",\n    \"1/4 teaspoon sea salt\",\n    \"1/4 teaspoon freshly ground black pepper\",\n    \"1 1/2 teaspoon grated fresh horseradish\",\n    \"1/2 teaspoon Worcestershire sauce\",\n    \"1/2 teaspoon Tabasco sauce\"\n  ],\n  \"directions\": [\n    \"Preheat the oven to 325Â° F (165Â° C). To make the forcemeat, spread the peppercorns and allspice on a baking sheet and toast for 3 to 5 minutes, until fragrant. Let cool completely.\",\n    \"Toast the fennel seeds the same way, then let cool completely.\"\n  ],\n  \"name\": \"spring-meatloaf\"\n},\n\"spring-lahmacun-turkish-pizza\": {\n  \"title\": \"Lahmacun - Turkish Pizza\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Ottolenghi\",\n    \"url\": \"http://www.ottolenghi.co.uk/lahmacun-turkish-pizza-with-spicy-minced-beef-and-salad-topping-shop\"\n  },\n  \"cookTime\": \"40 min\",\n  \"ingredients\": [\n    \"250g minced beef\",\n    \"1 medium onion, finely chopped (180g net)\",\n    \"3 3/4 tsp salt\",\n    \"1 1/2 tsp ground cinnamon\",\n    \"1 1/2 tsp ground allspice\",\n    \"1/2 tsp red chilli flakes\",\n    \"25g flat-leaf parsley, chopped\",\n    \"2 tbsp pomegranate molasses\",\n    \"1 1/2 tbsp sumac\",\n    \"3 tbsp tahini\",\n    \"25g pine nuts\",\n    \"2 tbsp lemon juice\",\n    \"250g white flour, plus extra to dust\",\n    \"1 1/2 tbsp milk powder\",\n    \"1/2 tbsp salt\",\n    \"2 tsp fast-action dried yeast\",\n    \"1/2 tbsp caster sugar\",\n    \"60ml sunflower oil\",\n    \"1 medium egg\",\n    \"100ml lukewarm water\",\n    \"Olive oil for brushing\"\n  ],\n  \"directions\": [\n    \"Start with the dough. Put the flour, milk powder, salt, yeast and sugar in a large mixing bowl and stir well to combine.\",\n    \"Make a well in the centre. Add the sunflower oil and egg and stir as you add the water.\"\n  ],\n  \"name\": \"spring-lahmacun-turkish-pizza\"\n},\n\"spring-easiest-spaghetti-and-meatballs\": {\n  \"title\": \"Easiest Spaghetti & Meatballs\",\n  \"excerpt\": \"No pasta's more iconic than spaghetti and meatballs\",\n  \"source\": {\n    \"name\": \"Martha Stewart\",\n    \"url\": \"http://www.marthastewart.com/336523/easiest-spaghetti-and-meatballs?czone=food%2Fdinner-tonight-center%2Fdinner-tonight-main-courses&gallery=274538&slide=336523&center=276948\"\n  },\n  \"cookTime\": \"30 min\",\n  \"ingredients\": [\n    \"Coarse salt and ground pepper\",\n    \"1/4 cup finely grated Parmesan, plus more for serving\",\n    \"1/4 cup chopped fresh parsley\",\n    \"2 garlic cloves, minced\",\n    \"1 large egg\",\n    \"1 pound ground beef chuck\",\n    \"1/4 cup plain dried breadcrumbs\",\n    \"1 tablespoon olive oil\",\n    \"1 can (28 ounces) crushed tomatoes in puree\",\n    \"3/4 pound spaghetti\"\n  ],\n  \"directions\": [\n    \"Set a large pot of salted water to boil. In a bowl, combine Parmesan, parsley, garlic, egg, 1 teaspoon salt, and 1 teaspoon pepper. Add beef and breadcrumbs; mix gently. Form into 16 balls.\",\n    \"In a 5-quart Dutch oven or heavy pot, heat oil over medium. Add meatballs, and cook, turning occasionally, until browned, 8 to 10 minutes.\"\n  ],\n  \"name\": \"spring-easiest-spaghetti-and-meatballs\"\n},\n\"summer-shaking-beef\": {\n  \"title\": \"Slanted Door's Shaking Beef\",\n  \"excerpt\": \"Cubes of tender filet mignon are sautÃ©ed with red onions and a vinaigrette\",\n  \"source\": {\n    \"name\": \"7x7 magazine\",\n    \"url\": \"http://www.7x7.com/recipes/secret-recipe-slanted-doors-shaking-beef\"\n  },\n  \"cookTime\": \"25 min\",\n  \"ingredients\": [\n    \"1 1/2 - 2 pounds filet mignon, fat trimmed and cut into 1 1/4-inch cubes\",\n    \"1 teaspoons ground black pepper\",\n    \"1/2 cup plus 1 tablespoon canola oil\",\n    \"1 cup thinly sliced red onion, preferably spring onions\",\n    \"3 stalks green onion, trimmed and cut to 1-inch lengths\",\n    \"1 tablespoon chopped garlic\",\n    \"2 tablespoons unsalted butter\",\n    \"2 tablespoons white vinegar\",\n    \"1/4 cup white granulated sugar\",\n    \"1/4 cup light soy sauce\",\n    \"1/4 cup fish sauce\",\n    \"1 teaspoon cooking rice wine\"\n  ],\n  \"directions\": [\n    \"Marinate meat 1/2 teaspoon black pepper and 1 tablespoon oil for about 2 hours.\",\n    \"Meanwhile, make the stir-fry sauce by combining the white vinegar, sugar, soy, fish sauce, and rice wine. Mix until sugar is dissolved. Set aside.\"\n  ],\n  \"name\": \"summer-shaking-beef\"\n},\n\"summer-bavarian-pretzel\": {\n  \"title\": \"Bavarian-style Soft Pretzel\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/2010/05/26/dining/26pretzelrex1.html\"\n  },\n  \"cookTime\": \"1 hr 30 min\",\n  \"ingredients\": [\n    \"1 tablespoon barley malt syrup or dark brown sugar\",\n    \"2 tablespoons lard or softened unsalted butter\",\n    \"2 tablespoons instant yeast\",\n    \"6 cups (about 30 ounces) bread flour\",\n    \"1 tablespoon plus 1/2 teaspoon kosher salt\",\n    \"Food-grade lye, for dipping\",\n    \"Coarse sea salt or pretzel salt, for sprinkling (do not substitute kosher salt)\"\n  ],\n  \"directions\": [\n    \"In a mixing bowl (or bowl of a mixer), stir together syrup, lard or butter, yeast, 2 cups warm water and half the flour. Add kosher salt and remaining flour and stir just until mixture comes together in a shaggy mass.\",\n    \"Turn out onto counter (or attach dough hook to mixer) and knead for 8 to 10 minutes, until smooth and supple. Cut into 12 pieces and let rest 5 minutes.\"\n  ],\n  \"name\": \"summer-bavarian-pretzel\"\n},\n\"summer-apricots-honey-panna-cotta\": {\n  \"title\": \"Apricots Honey Panna Cotta\",\n  \"highlighted\": true,\n  \"excerpt\": \"Juicy, fragrant, perfectly textured for a little fire action\",\n  \"source\": {\n    \"name\": \"Tartelette\",\n    \"url\": \"http://www.tarteletteblog.com/2011/07/recipe-gluten-free-apricots-honey-panna.html\"\n  },\n  \"cookTime\": \"35 min\",\n  \"ingredients\": [\n    \"6 apricots\",\n    \"olive oil\",\n    \"1/4 cup water\",\n    \"1 tablespoon powdered gelatin (2 sheets gelatin)\",\n    \"2 cups heavy cream\",\n    \"1/4 cup honey\",\n    \"1 cup full fat buttermilk\"\n  ],\n  \"directions\": [\n    \"Cut the apricots in half and remove the pit. Brush lightly with olive oil and grill over hot coals until tender (about 3-4 minutes on each side).\",\n    \"Let cool and puree until smooth in a food processor. Divide the mixture between 6 glasses.\"\n  ],\n  \"name\": \"summer-apricots-honey-panna-cotta\"\n},\n\"summer-elderberry-syrup\": {\n  \"title\": \"Elderberry Syrup\",\n  \"excerpt\": \"The gorgeous syrup is great in a glass of sparkling water over ice, dripped some over plain yogurt\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2007/08/respect-your-el/\"\n  },\n  \"cookTime\": \"35 min\",\n  \"ingredients\": [\n    \"2 pounds (1kg) elderberries, stems removed and rinsed\",\n    \"4 cups (1l) water\",\n    \"2 1/2 (500g) cups sugar\",\n    \"squirt of freshly-squeezed lemon juice\"\n  ],\n  \"directions\": [\n    \"Put the elderberries in a large, non-reactive pot with the water. Bring to a boil, then reduce heat to a low boil and cook for 15-20 minutes, until tender and soft.\",\n    \"Pass through a food mill, then discard the skins.\"\n  ],\n  \"name\": \"summer-elderberry-syrup\"\n},\n\"summer-spaghetti-lemon-olive\": {\n  \"title\": \"Spaghetti with Lemon & Olive Oil\",\n  \"excerpt\": \"This is one of those recipes that are almost better off without one\",\n  \"source\": {\n    \"name\": \"Smitten Kitchen\",\n    \"url\": \"http://smittenkitchen.com/blog/2011/02/spaghetti-with-lemon-and-olive-oil-al-limone/\"\n  },\n  \"cookTime\": \"20 min\",\n  \"ingredients\": [\n    \"1 pound spaghetti or linguine\",\n    \"Salt\",\n    \"3 lemons\",\n    \"1/4 cup extra virgin olive oil , plus additional for serving\",\n    \"1/4 cup heavy cream\",\n    \"1 ounce finely grated Parmesan cheese (about 1/2 cup), plus additional for serving\",\n    \"Ground black pepper\",\n    \"Small handful fresh basil or arugula leaves, shredded\"\n  ],\n  \"directions\": [\n    \"Cook linguine or spaghetti in well-salted water to your al dente tastes in a large, wide-bottomed pot.\",\n    \"While pasta is cooking, zest lemons until you have a little shy of a tablespoon of zest. Juice lemons â€” youâ€™ll have anywhere from 1/3 to 1/2 cup lemon juice.\"\n  ],\n  \"name\": \"summer-spaghetti-lemon-olive\"\n},\n\"summer-homemade-pasta-dough\": {\n  \"title\": \"Homemade Pasta Dough\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Mario Batali\",\n    \"url\": \"http://www.mariobatali.com/recipes/basic-pasta-dough/\"\n  },\n  \"cookTime\": \"25 min\",\n  \"ingredients\": [\n    \"2 Cups All-Purpose Flour\",\n    \"2 Cups 00 Flour or 4 cups All-Purpose Flour\",\n    \"4 large Eggs\"\n  ],\n  \"directions\": [\n    \"Mound the flour in the center of a large wooden board. Make a well in the center of the flour and add the eggs. Using a fork, beat the eggs together and then begin to incorporate the flour; starting with the inner rim of the well. As you expand the well, keep pushing the flour up to retain the well shape (do not worry if it looks messy).\",\n    \"When half of the flour is incorporated, the dough will begin to come together. Start kneading the dough, using primarily the palms of your hands. Once the dough is a cohesive mass, set the dough aside and scrape up and discard any dried bits of dough.\"\n  ],\n  \"name\": \"summer-homemade-pasta-dough\"\n},\n\"summer-hamburger\": {\n  \"title\": \"Diner Style Hamburgers\",\n  \"excerpt\": \"This is the traditional, griddled hamburger of diners and takeaway spots, smashed thin and cooked crisp on its edges\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1016595/hamburgers-diner-style.html\"\n  },\n  \"cookTime\": \"20 min\",\n  \"ingredients\": [\n    \"1/2 teaspoon neutral oil, like canola, or a pat of unsalted butter\",\n    \"2 pounds ground chuck, at least 20 percent fat\",\n    \"Kosher salt and black pepper to taste\",\n    \"8 slices cheese (optional)\",\n    \"8 soft hamburger buns, lightly toasted\",\n    \"Lettuce leaves, sliced tomatoes and condiments\"\n  ],\n  \"directions\": [\n    \"Add oil or butter to a large cast-iron or stainless-steel skillet and place over medium heat. Gently divide ground beef into 8 small piles of around 4 ounces each, and even more gently gather them together into orbs that are about 2 inches in height. Do not form patties.\",\n    \"Increase heat under skillet to high. Put half the orbs into the skillet with plenty of distance between them and, using a stiff metal spatula, press down on each one to form a burger that is around 4 inches in diameter and about 1/2 inch thick. Season with salt and pepper.\"\n  ],\n  \"name\": \"summer-hamburger\"\n},\n\"fall-roasted-butternut-squash-lasagna\": {\n  \"title\": \"Roasted Butternut Squash Lasagna\",\n  \"highlighted\": true,\n  \"excerpt\": \"Making homemade pasta may seem arduous, but this dish is worth the extra work\",\n  \"source\": {\n    \"name\": \"Martha Stewart\",\n    \"url\": \"http://www.marthastewart.com/857657/roasted-butternut-squash-lasagna\"\n  },\n  \"cookTime\": \"1 hr 35 min\",\n  \"ingredients\": [\n    \"2 large butternut squashes (about 2 pounds each), halved lengthwise and seeded\",\n    \"3 tablespoons extra-virgin olive oil\",\n    \"Coarse salt and freshly ground pepper\",\n    \"1 stick unsalted butter, cut into pieces\",\n    \"2 1/4 cups finely grated Parmesan cheese (about 8 ounces)\",\n    \"1/2 cup finely crushed amaretti cookies\",\n    \"1/4 cup finely chopped fresh sage\",\n    \"1/4 teaspoon freshly grated nutmeg\",\n    \"6 tablespoons unsalted butter, cut into pieces\",\n    \"1/4 cup plus 2 tablespoons all-purpose flour\",\n    \"6 cups whole milk\",\n    \"Coarse salt\",\n    \"1/4 teaspoon freshly grated nutmeg\",\n    \"Homemade Pasta\"\n  ],\n  \"directions\": [\n    \"Make the filling: Preheat oven to 400 degrees. Drizzle squash halves with oil, and season with salt and pepper. Roast squashes, cut sides down, on a rimmed baking sheet until tender and browned, about 1 hour. Let cool. Scoop flesh from skins, and puree in a food processor until smooth.\",\n    \"Melt butter in a small saucepan over medium heat. Continue to cook until browned and fragrant, about 3 minutes. Transfer to a bowl.\"\n  ],\n  \"name\": \"fall-roasted-butternut-squash-lasagna\"\n},\n\"summer-grits-icecream\": {\n  \"title\": \"Grits Praline & Brown Butter Ice Cream\",\n  \"excerpt\": \"\\\"Decadent\\\" isnâ€™t a word we throw around lightly\",\n  \"source\": {\n    \"name\": \"Anson Mills\",\n    \"url\": \"http://www.ansonmills.com/recipes/480?recipes_by=grain\"\n  },\n  \"cookTime\": \"2 hr 20 min\",\n  \"ingredients\": [\n    \"2 ounces (4 tablespoons) European-style unsalted butter\",\n    \"1 cup heavy cream\",\n    \"1 cup whole milk\",\n    \"6 large egg yolks\",\n    \"1/3 cup sugar\",\n    \"1 1/2 teaspoons vanilla extract\",\n    \"1/8 teaspoon fine sea salt\",\n    \"2 ounces Anson Mills Antebellum Coarse Yellow Grits or Antebellum Coarse White Grits\",\n    \"2 1/2 cups spring or filtered water\",\n    \"1 teaspoon fine sea salt\",\n    \"3.5 ounces sugar\"\n  ],\n  \"directions\": [\n    \"Make the ice cream base: Set a large bowl in a sink or basin filled with lots (at least 3 quarts) of ice cubes and cold water. Have a fine-mesh strainer nearby. Melt the butter in a small heavy-bottomed saucepan over low heat, stirring with a wooden spoon to scrape the browning milk solids back into the butter, until the butter is the color of a hazelnut in the shell and the kitchen smells miraculous, 3 to 5 minutes. Pull the pan off the heat and set it aside.\",\n    \"Pour the cream and milk into a medium heavy-bottomed saucepan set over medium-high heat. Whisk the egg yolks and sugar in a medium bowl. Drizzle the hot butter cautiously into the yolk-sugar mixture a little at a time, whisking well as you do.\"\n  ],\n  \"name\": \"summer-grits-icecream\"\n},\n\"fall-peanut-butter-cookie\": {\n  \"title\": \"Peanut Butter Cookie with Salted Peanut Caramel\",\n  \"excerpt\": \"This recipe takes Peanut Butter Cookies to the next level\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2008/12/peanut-butter-cookies-with-salte-1/\"\n  },\n  \"cookTime\": \"45 min\",\n  \"ingredients\": [\n    \"8 tablespoons (115g) unsalted butter, at room temperature\",\n    \"1/2 cup (120g) packed light brown sugar\",\n    \"1/2 cup (100g) granulated sugar\",\n    \"1 large egg, at room temperature\",\n    \"1 teaspoon vanilla extract\",\n    \"3/4 cup (200g) creamy salted peanut butter\",\n    \"1 3/4 cups (250g) flour\",\n    \"1/2 teaspoon baking soda\",\n    \"1/4 teaspoon salt\",\n    \"1 cup (250ml) heavy cream\",\n    \"1/2 cup (125ml) water\",\n    \"1 cup (200g) granulated sugar\",\n    \"1 tablespoon light corn syrup or glucose\",\n    \"1/8 teaspoon coarse salt\",\n    \"3/4 cup (100g) finely chopped roasted salted peanuts\"\n  ],\n  \"directions\": [\n    \"Preheat the oven to 350F and line two baking sheets with parchment paper or silicone baking mats.\",\n    \"With an electric mixer, or by hand, make the cookie dough by beating the butter, brown and granulated sugar until smooth. Beat in the egg and vanilla until well blended. If using an electric mixer, scrape down the sides of the bowl.\"\n  ],\n  \"name\": \"fall-peanut-butter-cookie\"\n},\n\"fall-amatriciana\": {\n  \"title\": \"Bucatini all' Amatriciana\",\n  \"excerpt\": \"This dish is named for the town of Amatrice...considered by many Italians to be birthplace of the best cooks on the peninsula\",\n  \"source\": {\n    \"name\": \"Mario Batali\",\n    \"url\": \"http://www.mariobatali.com/recipes/bucatini-allamatriciana/\"\n  },\n  \"cookTime\": \"30 min\",\n  \"ingredients\": [\n    \"1/4 cup extra-virgin olive oil\",\n    \"12 ounces thinly sliced guanciale pancetta, or good bacon\",\n    \"1 red onion, cut lengthwise in half and then into 1/4-inch-thick half-moons\",\n    \"3 cloves garlic, sliced\",\n    \"1 1/2 teaspoons hot red pepper flakes\",\n    \"2 cups Basic Tomato Sauce\",\n    \"1 pound Bucatini\",\n    \"Freshly grated Pecorino Romano\"\n  ],\n  \"directions\": [\n    \"Bring 6 quarts of water to a boil in a large pot, and add 2 tablespoons salt.\",\n    \"Meanwhile, in a 10- to 12-inch saute pan, combine the olive oil, ganciale, onion, garlic, and re pepper flakes; set over low heat and cook until the onion is softened and the guanciale has rendered much of its fat, about 12 minutes.\"\n  ],\n  \"name\": \"fall-amatriciana\"\n},\n\"fall-orecchiette-sausage-ragu\": {\n  \"title\": \"Orecchiette with red lamb sausage & carrots\",\n  \"excerpt\": \"Chef di Cucina Matt Abdoo expounded on the virtues of the fundamental building block of Italian cooking: fresh pasta\",\n  \"source\": {\n    \"name\": \"Mario Batali\",\n    \"url\": \"http://www.mariobatali.com/recipes/orecchiette-with-red-lamb-sausage-carrots/\"\n  },\n  \"cookTime\": \"45 min\",\n  \"ingredients\": [\n    \"1 pound ground lamb\",\n    \"1 1/2 teaspoons salt\",\n    \"1 tablespoon red wine\",\n    \"1 teaspoon cayenne pepper\",\n    \"2 teaspoons garlic purÃ©e\",\n    \"2 tablespoons roasted red pepper purÃ©e\",\n    \"1 teaspoon freshly ground black pepper\",\n    \"2 tablespoons sweet paprika\",\n    \"1 teaspoon smoked paprika\",\n    \"1 pint carrot juice\",\n    \"2 cups diced carrots\",\n    \"2 cups chopped carrots\",\n    \"1 teaspoon sugar\",\n    \"Orange zest, to taste\",\n    \"Salt and pepper, to taste\",\n    \"1/4 cup chicken stock\",\n    \"2 tablespoons of unsalted butter\",\n    \"1 pound orecchiette pasta\",\n    \"1/4 cup pecorino cheese\",\n    \"Extra virgin olive oil\",\n    \"Breadcrumbs, for garnish\"\n  ],\n  \"directions\": [\n    \"To make the spice mixture for the sausage: In a bowl, combine spices, lamb, salt, and water. Incorporate thoroughly using your hands. Set aside.\",\n    \"To make the carrot puree: Cook carrots in carrot juice until tender. Strain, and reserve the diced carrots. Puree the remaining chopped carrots. Season with orange zest, salt and pepper to taste.  Fold the diced carrots into the seasoned carrot puree. Set aside.\"\n  ],\n  \"name\": \"fall-orecchiette-sausage-ragu\"\n},\n\"winter-braised-duck\": {\n  \"title\": \"Italian Red-Wine Braised Duck w/ Olive Gremolata\",\n  \"highlighted\": true,\n  \"excerpt\": \"A good braise always trumps a steak or a roast, both in terms of complex flavors and satisfaction\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1014424/italian-red-wine-braised-duck-with-olive-gremolata.html\"\n  },\n  \"cookTime\": \"2 hr 30 min\",\n  \"ingredients\": [\n    \"4 Muscovy duck legs (about 4 pounds), untrimmed\",\n    \"Salt and pepper\",\n    \"1/2 teaspoon coriander seed, toasted and coarsely ground\",\n    \"1/2 teaspoon fennel seed, toasted and coarsely ground\",\n    \"2 tablespoons olive oil\",\n    \"2 cups finely diced onion\",\n    \"3/4 cup finely diced carrot\",\n    \"3/4 cup finely diced celery\",\n    \"1 large thyme sprig\",\n    \"1 bay leaf\",\n    \"1 4-inch strip of orange peel, pith removed\",\n    \"4 garlic cloves, minced\",\n    \"2 tablespoons tomato paste\",\n    \"1 cup chopped canned or fresh tomatoes\",\n    \"1 cup dry red wine\",\n    \"3 cups chicken broth\",\n    \"Pinch cayenne or red pepper, optional\",\n    \"Olive gremolata for garnish\"\n  ],\n  \"directions\": [\n    \"Trim duck legs of extraneous fat with a sharp knife, leaving a thin layer on top. (It is best to do this straight from the fridge, while fat is still firm.) Save duck fat for rendering.\",\n    \"Season each leg generously with salt and pepper, then sprinkle with ground coriander and fennel. Massage seasoning into meat and leave at room temperature for 30 minutes, or wrap and refrigerate overnight.\"\n  ],\n  \"name\": \"winter-braised-duck\"\n},\n\"fall-chocolate-chai-cupcake\": {\n  \"title\": \"Chocolate Chai Spice Cupcake\",\n  \"excerpt\": \"The moist chocolatey goodness of the cake can live on its own\",\n  \"source\": {\n    \"name\": \"Cupcake Bakeshop\",\n    \"url\": \"http://cupcakeblog.com/?p=50\"\n  },\n  \"cookTime\": \"55 min\",\n  \"ingredients\": [\n    \"200 gram bar of Valrhona 61% cacao\",\n    \"3 sticks butter\",\n    \"2-1/4 cups sugar\",\n    \"8 eggs\",\n    \"1-1/4 cup flour\",\n    \"1/4 cup cocoa powder, unsweetened\",\n    \"1-1/2 teaspoons baking powder\",\n    \"3 teaspoons chai spice mix\",\n    \"pinch of salt\",\n    \"1 cup (2 sticks) butter\",\n    \"4-5 cups powdered sugar, sifted\",\n    \"1/4 cup milk\",\n    \"2 teaspoons chai spice mix\",\n    \"2 teaspoons minced fresh ginger\"\n  ],\n  \"directions\": [\n    \"With a small food processor, grind up the whole fennel and cloves.\",\n    \"Transfer to a small bowl and add remaining spices. Mix to combine.\"\n  ],\n  \"name\": \"fall-chocolate-chai-cupcake\"\n},\n\"fall-mexican-rice\": {\n  \"title\": \"Mexican Rice\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"NY Times\",\n    \"url\": \"http://www.nytimes.com/recipes/1016674/mexican-rice.html\"\n  },\n  \"cookTime\": \"40 min\",\n  \"ingredients\": [\n    \"1 large clove garlic, roughly chopped\",\n    \"2 cups canned tomatoes (fresh tomatoes can be used)\",\n    \"1/2 cup green bell pepper, roughly chopped\",\n    \"1 medium onion, roughly chopped\",\n    \"1/2 medium jalapeÃ±o, seeds and veins removed\",\n    \"1 teaspoon salt\",\n    \"1/2 cup chicken stock or water\",\n    \"2 tablespoons vegetable oil\",\n    \"1 heaping cup long-grain white rice, rinsed\"\n  ],\n  \"directions\": [\n    \"Blend vegetables, salt and stock or water together into a mostly smooth purÃ©e (a few small pieces of onion and pepper are fine).\",\n    \"In a large skillet with a tightfitting lid, heat oil. Add rice and toast until it absorbs most of the oil and begins to smell nutty.\"\n  ],\n  \"name\": \"fall-mexican-rice\"\n},\n\"fall-whole-wheat-goldfish-crackers\": {\n  \"title\": \"Whole Wheat Goldfish Crackers\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Smitten Kitchen\",\n    \"url\": \"http://smittenkitchen.com/blog/2011/03/whole-wheat-goldfish-crackers/\"\n  },\n  \"cookTime\": \"1 hr 5 min\",\n  \"ingredients\": [\n    \"6 ounces (1 1/2 cups coarsely grated) sharp cheddar\",\n    \"4 tablespoons (2 ounces or 57 grams) butter\",\n    \"1/2 cup (2 1/2 ounces or 62 grams) whole wheat flour\",\n    \"1/4 cup (1 1/8 ounces or 31 grams) all-purpose flour\",\n    \"1/8 teaspoon onion powder\",\n    \"1/8 to 1/4 teaspoon table salt\"\n  ],\n  \"directions\": [\n    \"Preheat oven to 350Â°F. Combine all ingredients in a food processor, running the machine until the dough forms a ball, about two minutes.\",\n    \"If the dough feels warm or worrisome-ly soft, wrap it in waxed paper or plastic wrap and chill it in the fridge for 30 to 45 minutes. This also makes it easier to transfer shapes once they are rolled out.\"\n  ],\n  \"name\": \"fall-whole-wheat-goldfish-crackers\"\n},\n\"winter-world-peace-cookie\": {\n  \"title\": \"P.HermÃ© & D.Greenspan's World Peace Cookies\",\n  \"excerpt\": \"Shortbread cookie meets salted chocolate chip, and world peace feels within reach\",\n  \"source\": {\n    \"name\": \"Food52\",\n    \"url\": \"http://food52.com/recipes/25372-pierre-herme-dorie-greenspan-s-world-peace-cookies\"\n  },\n  \"cookTime\": \"35 min\",\n  \"ingredients\": [\n    \"1 1/4 cups all-purpose flour\",\n    \"1/3 cup unsweetened cocoa powder\",\n    \"1/2 teaspoon baking soda\",\n    \"1 stick plus 3 tablespoons (11 tablespoons) unsalted butter, room temperature\",\n    \"2/3 cups (packed) light brown sugar\",\n    \"1/4 cup granulated sugar\",\n    \"1/2 teaspoon fleur del sel or 1/4 teaspoon fine sea salt\",\n    \"1 teaspoon pure vanilla extract\",\n    \"5 ounces bittersweet chocolate, chopped into chips, or a generous 3/4 cup store-bought mini chocolate chips\"\n  ],\n  \"directions\": [\n    \"Sift the flour, cocoa and baking soda together.\",\n    \"Working with a stand mixer, preferably fitted with a paddle attachment, or with a hand mixer in a large bowl, beat the butter on medium speed until soft and creamy. Add both sugars, the salt and vanilla extract and beat for 2 minutes more.\"\n  ],\n  \"name\": \"winter-world-peace-cookie\"\n},\n\"winter-chocolate-tart\": {\n  \"title\": \"Chocolate Tart\",\n  \"highlighted\": true,\n  \"excerpt\": \"A good chocolate tart doesnâ€™t need to be fancy, but it needs to be deep, dark, and yes, somewhat decadent.\",\n  \"source\": {\n    \"name\": \"David Lebovitz\",\n    \"url\": \"http://www.davidlebovitz.com/2011/10/chocolate-tart-recipe/\"\n  },\n  \"cookTime\": \"1 hr\",\n  \"ingredients\": [\n    \"1 1/4 cup (250 g) sugar\",\n    \"6 tablespoons (90 ml) warm coffee\",\n    \"4 ounces (115 g) unsalted butter, cubed, room temperature\",\n    \"pinch of sea salt\",\n    \"4 ounces (115 g) bittersweet or semisweet chocolate, chopped\",\n    \"2 ounces (55 g) unsweetened chocolate, chopped\",\n    \"2 large eggs\",\n    \"1/4 cup (35 g) flour\",\n    \"1 tablespoon dark rum or 1 teaspoon vanilla extract\",\n    \"One 9â€“10 inch prebaked tart shell\"\n  ],\n  \"directions\": [\n    \"Preheat oven to 350ÂºF (180ÂºC.)\",\n    \"Spread the sugar in an even layer in the bottom of a large, heavy-duty saucepan or Dutch oven. Cook the sugar over moderate heat until the edges liquefy and being to caramelize. Use a heatproof utensil to gently drag the liquefied sugar toward the center of the pan, encouraging the sugar to melt evenly.\"\n  ],\n  \"name\": \"winter-chocolate-tart\"\n},\n\"winter-braised-eggs-with-beef\": {\n  \"title\": \"Braised eggs w/ beef, smoked aubergine & tomato\",\n  \"excerpt\": \"\",\n  \"source\": {\n    \"name\": \"Ottolenghi\",\n    \"url\": \"http://www.ottolenghi.co.uk/recipes/meat/braised-eggs-with-beef-smoked-aubergine-and-tomato-shop\"\n  },\n  \"cookTime\": \"1 hr 5 min\",\n  \"ingredients\": [\n    \"4 aubergines (1.1kg gross)\",\n    \"1 tbsp olive oil, plus extra for drizzling\",\n    \"1 large onion, finely chopped (200g net)\",\n    \"6 garlic cloves, roughly chopped (20g net)\",\n    \"1/2 tsp chilli flakes\",\n    \"1/2 tsp ground cinnamon\",\n    \"1/2 tsp ground cumin\",\n    \"2 tsp tomato paste\",\n    \"300g minced beef\",\n    \"2 medium tomatoes, chopped (100g net)\",\n    \"2 tsp finely chopped preserved lemon (15g)\",\n    \"4 eggs\",\n    \"3/4 tsp sumac\",\n    \"1 tbsp chopped parsley\",\n    \"Salt and black pepper\",\n    \"40g tahini\",\n    \"2 tbsp lemon juice\",\n    \"1 garlic clove, crushed\"\n  ],\n  \"directions\": [\n    \"Pierce the aubergines with a sharp knife in a few places and place each directly over a naked flame on your stovetop. Cook on medium heat for 20 minutes, turning occasionally with metal tongs until the outside is totally burnt and the aubergine starts to collapse on itself. Alternatively, place the pierced aubergines on a tin foil lined tray under a hot grill in the oven for an hour, turning every 20 minutes. Remove from and place in a colander.\",\n    \"Cut a single slit in each aubergine, from top to bottom and allow the juices to strain. Once cool enough to handle, scoop out all the flesh, avoiding all black skin, and set aside. You should have about 370g aubergine flesh.\"\n  ],\n  \"name\": \"winter-braised-eggs-with-beef\"\n},\n\"winter-cashew-gateau\": {\n  \"title\": \"Cashew Gateau with Coffee Cardamom Mousse\",\n  \"excerpt\": \"The inspiration for the caramel stained \\\"glass\\\" panel comes from my grandmother\",\n  \"source\": {\n    \"name\": \"Tartelette\",\n    \"url\": \"http://www.tarteletteblog.com/2008/08/cashew-gateau-with-coffee-cardamom.html\"\n  },\n  \"cookTime\": \"1 hr 30 min\",\n  \"ingredients\": [\n    \"3/4 cups cashew, toasted/skinned\",\n    \"1/3 cup cake flour, unsifted\",\n    \"1 Tbsp. cornstarch\",\n    \"3 large egg yolks\",\n    \"1/2 cup sugar, divided (2Tb & 6 Tb)\",\n    \"1/2 tsp. vanilla extract\",\n    \"1/2 tsp. grated lemon rind\",\n    \"2 lg. egg whites\",\n    \"2 Tb melted butter, cooled\",\n    \"1/2 teaspoon ground cardamom\",\n    \"1/2 cup espresso or strong coffee\",\n    \"1/4 cup sugar\",\n    \"1 tsp powdered unflavored gelatin, softened in 1 tablespoon cold water\",\n    \"1 cup heavy cream, cold\",\n    \"1/2 cup heavy cream\",\n    \"3/4 cup chopped chocolate or chocolate chips (about 6 oz or 180 gr)\"\n  ],\n  \"directions\": [\n    \"Position rack in the lower 3rd of the oven and preheat to 350 degrees.\",\n    \"Grease and flour a 8â€ X 4â€ inch round springform pan.\"\n  ],\n  \"name\": \"winter-cashew-gateau\"\n}\n};","var feedSubscription;\nvar thisCurrentProduct ;\n// Handle for launch screen possibly dismissed from app-body.js\ndataReadyHold = null;\n\n// Global subscriptions\nif (Meteor.isClient) {\n  Meteor.subscribe('news');\n  Meteor.subscribe('bookmarkCounts');\n  Meteor.subscribe('images');\n  Meteor.subscribe('getSellers');\n  \n  // var resultsq = Meteor.subscribe('featuredProducts');\n \n  // Session.set('featuredProducts',resultsq);\n  feedSubscription = Meteor.subscribe('feed');\n}\n\nRouter.configure({\n  layoutTemplate: 'appBody',\n  notFoundTemplate: 'notFound'\n});\n\nif (Meteor.isClient) {\n  // Keep showing the launch screen on mobile devices until we have loaded\n  // the app's data\n  dataReadyHold = LaunchScreen.hold();\n}\n\n\n\nProductsController = RouteController.extend({\n  onBeforeAction: function () {\n \n    Meteor.subscribe('latestProducts', function () {\n      dataReadyHold.release();\n    });\n\n    Meteor.subscribe('getSellerProducts', function () {\n      dataReadyHold.release();\n    });\n  }\n});\n\nFeedController = RouteController.extend({\n  onBeforeAction: function () {\n    this.feedSubscription = feedSubscription;\n  }\n});\n\nRecipesController = RouteController.extend({\n  data: function () {\n    return _.values(RecipesData);\n  }\n});\n\nBookmarksController = RouteController.extend({\n  onBeforeAction: function () {\n    if (Meteor.user())\n      Meteor.subscribe('bookmarks');\n    else\n      Overlay.open('authOverlay');\n  },\n  data: function () {\n    if (Meteor.user())\n      return _.values(_.pick(RecipesData, Meteor.user().bookmarkedRecipeNames));\n  }\n});\n\nRecipeController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('recipe', this.params.name);\n  },\n  data: function () {\n    return RecipesData[this.params.name];\n  }\n});\n\n// addSellerController = RouteController.extend({\n//   onBeforeAction:function()\n//   {\n//     console.log('Seller Controller loaded');\n\n    \n//     if (Meteor.userId())\n//     {\n//       var currentSeller = Meteor.wrapAsync(getThisSeller(Meteor.userId()));     \n//     }\n//   }\n// });\n\n\n\n// function getThisSeller(id)\n// {\n//   console.log(\"Get Seller  : \" + id);\n//   var retProd = {};\n//   var returnProd=[];\n   \n//   var repro =   Meteor.apply('getProductSeller', [id],{wait: true}, function(err,data){\n//     if (!err)\n//     {\n      \n//       Session.set(\"currentSeller\",data);\n//       console.log(data);\n     \n \n//     }\n//     else\n//     {\n//       console.log(err);\n//     }\n    \n//   });\n// }\n \n \nProductController = RouteController.extend({\n  onBeforeAction : function()\n  {\n    if (this.params._id)\n    {\n      console.log(\"Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product',Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n      //var productImages = Meteor.wrapAsync(getProductImages(currentProduct.prodImg));\n      //currentProduct.prodImg = productImages;\n      dataReadyHold.release();\n\n    }\n    \n  }\n  \n  // ,\n  // data : function()\n  // {\n  //   currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n  // }\n  \n   \n});\n\nfunction getThisProdData(id)\n{\n  console.log(\"Get Single product publish Router Method : \" + id);\n  var retProd = {};\n  var returnProd=[];\n  var repro =   Meteor.apply('getProduct', [id],{wait: false}, function(err,data){\n    if (!err)\n    {\n      sessionStorage.removeItem(\"currentProduct\");\n      Session.set(\"currentProduct\",data);  \n    }\n    else\n    {\n      console.log(err);\n      sessionStorage.removeItem(\"currentProduct\");\n    }    \n  });  \n}\n\n\nSellerController = RouteController.extend({\n  onBeforeAction: function()\n  {\n    console.log('Seller Controller loaded');\n    if (Meteor.userId())\n    {\n      //loading.start();\n      //Meteor.subscribe('SellerDetailsImages',Meteor.userId());\n      Meteor.subscribe('getSeller',Meteor.userId());\n      Sellers.findOne({userId:Meteor.userId()});\n     \n      // Meteor.call('getSeller', [Meteor.userId()], function(error, success) { \n      //   if (error) { \n      //     console.log('error getting seller', error); \n      //     sessionStorage.removeItem(\"currentSeller\");\n      //   } \n      //   if (success) { \n      //     console.log(\"Client Router Seller : \" + success);\n      //     sessionStorage.removeItem(\"currentSeller\");\n      //     Session.set(\"currentSeller\",success);\n      //   } \n      // });\n      console.log('Seller Controller reference data');\n      Meteor.subscribe('referenceData', function () {\n        console.log(ReferenceData.find({}).count());\n        //loading.stop();\n        dataReadyHold.release();\n      });\n      \n       \n    }\n  }\n})\n\nEditProductController = RouteController.extend({\n  onBeforeAction:function(){\n    console.log(\"Edit Product\");\n    if (this.params._id)\n    {\n      console.log(\"Edit Product launch :\" + this.params._id);\n      sessionStorage.removeItem(\"currentProduct\");\n      Meteor.subscribe('product',Router.current().params._id);\n      var currentProduct = Meteor.wrapAsync(getThisProdData(this.params._id));\n      dataReadyHold.release();\n    }\n  }\n});\n\nAdminController = RouteController.extend({\n  onBeforeAction: function () {\n    Meteor.subscribe('news');\n  }\n});\n\nHomeController = RouteController.extend({\n  onBeforeAction:function(){\n      Meteor.subscribe('featuredProducts');\n    console.log(\"Home from router products \" );\n    dataReadyHold.release();\n  }\n});\n\nRouter.route('home', {\n  path: '/'\n});\n\n// Router.route('products', {\n//   path : '/products/:_searchTerm',\n//   // name: 'products',\n//   // template: 'products',\n//   });\n \nRouter.route('products');\n\nRouter.route('seller');\n\nRouter.route('feed');\n\n\n\nRouter.route('recipes');\n\nRouter.route('bookmarks');\n\nRouter.route('about');\n\nRouter.route('recipe', {\n  path: '/recipes/:name'\n});\n\nRouter.route('product', {\n  path : '/product/:_id',\n  name: 'productPage',\n  template: 'product',\n  });\n\n  Router.route('editproduct', {\n    path : '/editproduct/:_id',\n    name: 'productEditPage',\n    template: 'tmp_product_maintain',\n    layoutTemplate: null,\n    controller: EditProductController\n    });\n  \n\n  Router.route('login',{\n    path :'/login',\n    template :'authOverlay',\n    layoutTemplate: 'appBody'\n  });\n\n  Router.route('signup',{\n    path :'/signup',\n    template :'authOverlaySignup',\n    layoutTemplate: 'appBody'\n  })\n\n\nRouter.route('admin', {\n  layoutTemplate: null\n});\n\nRouter.onBeforeAction('dataNotFound', {\n  only: 'recipe'\n});\n\n"," \n\nSellers.allow({\n    insert: function(userId, doc) {\n      return doc.userId === userId;\n    },\n    update: function(userId,doc){\n      return doc.userId === userId;\n    },\n    remove: function(userId, doc) {\n        return doc.userId === userId;\n      }\n  });\n  \n \n  Meteor.methods({\n    'getSeller':function(id){\n      var result={};\n      try\n      {\n        //console.log(\" server find one : \" + id);\n        //loading.start();\n        var SellerResult = Meteor.apply('getProductSeller',[id],{returnStubValue: true});\n       \n         //console.log(\"Server seller \" );\n \n        if (SellerResult)\n        {\n          //console.log(\"has seller\");\n          result=SellerResult;\n        \n        }\n        else\n\n        {\n         // console.log(\"has no seller\");\n          result  = {\n            _id:\"\",\n             userId:Meteor.userId(),\n             businessname : \"\",\n             busTagLine: \"\",\n             busLogo: \"\",\n             busAvatar: \"\",\n             bustel: \"\",\n             buscel: \"\",\n             busemail: \"\",\n             cont1 : \"\",\n             cont2 : \"\",\n             add1: \"\",\n             add2: \"\",\n             add3: \"\",\n             add4: \"\",\n             add5: \"\",\n             website: \"\"\n  \n            }\n             \n        }\n        //loading.stop();\n      }\n      catch (exp)\n      {\n        //loading.halt();\n          throw exp;\n      }\n      //console.log(result);\n      return result;\n      \n    },\n   \n    'newSeller':function(sellerObj){\n     // var result = Products.find({_id:prodid});\n      \n     try {\n \n    \n\n      \n     var sellerResult = \n     Sellers.upsert({\n      // Selector\n      userId: sellerObj.userId \n        }, {\n      // Modifier\n      $set: {\n        businessname : sellerObj.businessname,\n        busTagLine: sellerObj.busTagLine,\n        busLogo : sellerObj.busLogo,\n        busAvatar : sellerObj.busAvatar,\n        bustel : sellerObj.bustel,\n        buscel : sellerObj.buscel,\n        busemail : sellerObj.busemail,\n        cont1 : sellerObj.cont1,\n        cont2 : sellerObj.cont2,\n        add1 : sellerObj.add1,\n        add2 : sellerObj.add2,\n        add3 : sellerObj.add3,\n        add4 : sellerObj.add4,\n        add5 : sellerObj.add5,\n        website : sellerObj.website\n      }\n      });\n       \n    //console.log(sellerResult);\n\n      //return Sellers.insert(sellerObj);\n      \n     } catch (error) {\n        \n       console.log(\"Server - Seller - \" + error);\n       throw error;\n     }\n     \n      \n    },\n    \n    'updateSeller':function(sellerObj){\n        // var result = Products.find({_id:prodid});\n         return Sellers.findOne({userId:prodid});\n    },\n    'deleteSeller':function(id){\n        // var result = Products.find({_id:prodid});\n         return Sellers.remove({userId:id});\n    }\n    \n  });\n\n    \n\n  Sellers.allSellers= function(){\n      return Sellers.find({});\n  }\n\n  Sellers.more = function(continuationValue){\n      //https://www.npmjs.com/package/mongo-cursor-pagination\n      return Sellers.find({}, {sort: {date: -1}});\n    \n  } \n\n   \n  /*\n  Meteor.methods({\n    createActivity: function(activity, tweet, loc) {\n      Meteor.userId(), String,\n      activity, {\n        recipeName: String,\n        text: String,\n        image: String\n      },\n      tweet, Boolean,\n      loc, Match.OneOf(Object, null),\n      \n      activity.userId = Meteor.userId(,\n      activity.userAvatar = Meteor.user().services.twitter.profile_image_url_https;\n      activity.userName = Meteor.user().profile.name;\n      activity.date = new Date;\n      \n      if (! this.isSimulation && loc)\n        activity.place = getLocationPlace(loc,\n      \n      var id = Activities.insert(activity,\n      \n      if (! this.isSimulation && tweet)\n        tweetActivity(activity,\n      \n      return id;\n    }\n  },\n  \n  if (Meteor.isServer) {\n    var twitterOauth = function(options) {\n      var config = Meteor.settings.twitter\n      var userConfig = Meteor.user().services.twitter;\n  \n      return {\n        consumer_key: config.consumerKey,\n        consumer_secret: config.secret,\n        token: userConfig.accessToken,\n        token_secret: userConfig.accessTokenSecret\n      };\n    }\n    \n    var tweetActivity = function(activity) {\n      // creates the tweet text, optionally truncating to fit the appended text\n      function appendTweet(text, append) {\n        var MAX = 117; // Max size of tweet with image attached\n        \n        if ((text + append).length > MAX)\n          return text.substring(0, (MAX - append.length - 3)) + '...' + append;\n        else\n          return text + append;\n      }\n      \n      // we need to strip the \"data:image/jpeg;base64,\" bit off the data url\n      var image = activity.image.replace(/^data.*base64,/, '',\n  \n      var response = HTTP.post(\n        'https://upload.twitter.com/1.1/media/upload.json', {\n          params: { media: image },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n      \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to post image to twitter',\n  \n      if (! response.data)\n        throw new Meteor.Error(500, 'Did not receive attachment from twitter',\n  \n      var attachment = response.data;\n  \n      response = HTTP.post(\n        'https://api.twitter.com/1.1/statuses/update.json', {\n          params: {\n            status: appendTweet(activity.text, ' #localmarket'),\n            media_ids: attachment.media_id_string\n          },\n          npmRequestOptions: { oauth: twitterOauth() }\n        }\n      ,\n  \n      if (response.statusCode !== 200)\n        throw new Meteor.Error(500, 'Unable to create tweet',\n    }\n    \n    var getLocationPlace = function(loc) {\n      var url = 'https://api.twitter.com/1.1/geo/reverse_geocode.json'\n        + '?granularity=neighborhood'\n        + '&max_results=1'\n        + '&accuracy=' + loc.coords.accuracy\n        + '&lat=' + loc.coords.latitude\n        + '&long=' + loc.coords.longitude;\n      \n      var response = HTTP.get(url,\n                              {npmRequestOptions: { oauth: twitterOauth() } },\n  \n      if (response.statusCode === 200 && response.data) {\n        var place = _.find(response.data.result.places, function(place) {\n          return place.place_type === 'neighborhood';\n        },\n        \n        return place && place.full_name;\n      }\n    }\n  }\n   \n  */"]}